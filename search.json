[{"title":"Reduxä¸­Actionå’ŒReducerçš„ç¼–å†™","url":"/2021/04/07/10.Redux%E4%B8%ADAction%E5%92%8CReducer%E7%9A%84%E7%BC%96%E5%86%99/","content":"å‰ç«¯â€”â€”Reduxä¸­Actionå’ŒReducerçš„ç¼–å†™ä¸Šä¸€ç¯‡æ–‡ç« ä¸­åˆ›å»ºäº†Storeå’ŒReducerï¼Œèƒ½å¤Ÿä½¿ç»„ä»¶è·å–åˆ°Storeä¸­çš„æ•°æ®ã€‚\nç°åœ¨æ¥çœ‹å¦‚ä½•æ”¹å˜Storeä¸­çš„æ•°æ®ã€‚\n\nä¾ç„¶æ˜¯å›é¡¾ä¸€ä¸‹Reduxçš„å·¥ä½œæµç¨‹ã€‚\ncomponentéœ€è¦å‘Šè¯‰Storeï¼šæˆ‘è¦è·å–æ•°æ®ï¼Œè¿™å°±éœ€è¦åˆ›å»ºä¸€ä¸ªactionã€‚\nå®ç°Todo Listè¾“å…¥æ¡†çš„åŠŸèƒ½\nå›æƒ³ä¸€ä¸‹todolistçš„åŠŸèƒ½ï¼Œåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å†…å®¹ï¼Œè¾“å…¥æ¡†ä¸­çš„å†…å®¹ä¹Ÿéœ€è¦è·Ÿç€å˜åŒ–ï¼Œè¿™å°±éœ€è¦ä¸storeåšé€šä¿¡ã€‚å½“inputæ¡†ä¸­çš„å†…å®¹å‘ç”Ÿæ”¹å˜æ—¶ï¼Œå°±æ”¹å˜storeä¸­å¯¹åº”çš„æ•°æ®ã€‚\né¦–å…ˆåœ¨inputç»„ä»¶ä¸Šç»‘å®šä¸€ä¸ªhandleInputChangeäº‹ä»¶ã€‚åˆ«å¿˜è®°åœ¨constructorä¸­ä¿®æ”¹è¿™ä¸ªæ–¹æ³•çš„thisæŒ‡å‘ã€‚\nç„¶ååœ¨è¿™ä¸ªæ–¹æ³•ä¸­å®šä¹‰actionï¼Œæ¥å’Œstoreè¿›è¡Œé€šä¿¡ã€‚\nåœ¨Reactä¸­ï¼Œä¸€ä¸ªactionçš„å†™æ³•æœ‰ä¸€å®šçš„è§„èŒƒã€‚é¦–å…ˆï¼Œactionæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œéœ€è¦æœ‰typeå±æ€§ï¼Œè¿™ä¸ªå±æ€§çš„å†…å®¹æ˜¯å¯¹è¿™ä¸ªactionçš„ä¸€äº›æè¿°ã€‚valueå±æ€§ä»£è¡¨è¦ä¼ ç»™storeçš„å€¼ã€‚\nconst action = &#123;  type: &quot;change_input_value&quot;,  value: e.target.value,&#125;;\n\nç°åœ¨åˆ›å»ºäº†actionï¼Œæƒ³è¦æŠŠè¿™ä¸ªactionä¼ é€’ç»™storeã€‚\nstoreæä¾›äº†ä¸€ä¸ªæ–¹æ³•dispatch()ï¼Œè°ƒç”¨store.dispatch(action)å³å¯æŠŠactionä¼ é€’ç»™storeã€‚\nhandleInputChange(e) &#123;  const action = &#123;    type: &quot;change_input_value&quot;,    value: e.target.value,  &#125;;  store.dispatch(action);&#125;\n\nç°åœ¨å°±æŠŠactionä¼ é€’ç»™äº†storeã€‚ä¼ æ˜¯ä¼ è¿‡å»äº†ï¼Œå¯æ˜¯storeä¸çŸ¥é“è¯¥æ€ä¹ˆå¤„ç†è¿™ä¸ªactionã€‚storeè¦å»åœ¨reducerä¸­å»æŸ¥æ‰¾æ•°æ®ã€‚\nstoreè¦åšçš„æ“ä½œå°±æ˜¯ï¼ŒæŠŠå½“å‰çš„æ•°æ®å’Œæ¥æ”¶åˆ°çš„actionä¸€èµ·è½¬å‘ç»™reducerï¼Œç„¶åç”±reducerå‘Šè¯‰storeéœ€è¦åšä»€ä¹ˆã€‚\næœ‰ä¸€ä¸ªå¥½æ¶ˆæ¯æ˜¯ï¼ŒReduxä¸­çš„storeä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è½¬å‘å½“å‰çš„stateå’Œæ¥æ”¶åˆ°çš„actionã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦storeä¸€æ¥æ”¶åˆ°actionï¼Œå°±ä¼šè‡ªåŠ¨å°†å½“å‰stateå’Œè¿™ä¸ªactionè½¬å‘ç»™reducerã€‚\nè¿™æ ·çš„è¯ï¼Œreducerå°±ä¼šæ¥æ”¶åˆ°ä¸¤ä¸ªå‚æ•°ï¼šstateå’Œactionã€‚åˆ†åˆ«å¯¹åº”ä¸Šä¸€æ¬¡åœ¨storeä¸­å­˜å‚¨çš„æ•°æ®ï¼ˆä¿®æ”¹ä¹‹å‰çš„ï¼‰å’Œç”¨æˆ·ä¼ é€’çš„actionã€‚\nç°åœ¨å·¥ä½œå°±äº¤ç»™äº†reducerã€‚reduceréœ€è¦æ ¹æ®ä¼ é€’è¿‡æ¥çš„stateå’Œactionï¼Œå°†äºŒè€…ç»“åˆï¼Œåšä¸€äº›å¤„ç†ï¼Œæ¥å‘Šè¯‰storeï¼Œæ–°çš„æ•°æ®ä¼šå˜æˆä»€ä¹ˆæ ·å­ã€‚\nconst defaultState = &#123;  inputValue: &quot;store&quot;,  list: [],&#125;;// reducerå¯ä»¥æ¥æ”¶stateï¼Œä½†æ˜¯ç»ä¸èƒ½ä¿®æ”¹state// state: Storeä¸­ä¸Šä¸€æ¬¡å­˜å‚¨çš„æ•°æ®// action: ç”¨æˆ·ä¼ é€’çš„actionexport default (state = defaultState, action) =&gt; &#123;  if (action.type === &quot;change_input_value&quot;) &#123;    // å¯¹stateè¿›è¡Œä¸€æ¬¡æ·±æ‹·è´    const newState = JSON.parse(JSON.stringify(state));    // ä¿®æ”¹inputæ¡†ä¸­valueçš„å€¼    newState.inputValue = action.value;    return newState;  &#125;  return state;&#125;;\n\nè¿™é‡Œè¦æ³¨æ„ï¼Œreduceræœ‰ä¸€ä¸ªé™åˆ¶ï¼Œé‚£å°±æ˜¯reducerå¯ä»¥æ¥æ”¶stateï¼Œä½†æ˜¯ç»ä¸èƒ½ä¿®æ”¹stateã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ¥æ”¶åˆ°stateä¹‹åè¦è¿›è¡Œæ·±æ‹·è´ï¼Œç”¨æ¥æ‹¿åˆ°ä¸€ä¸ªæ–°çš„newStateã€‚\nå¯¹newStateè¿›è¡Œä¿®æ”¹ä¹‹åï¼Œå°†å…¶returnã€‚è¿™ä¸ªnewStateå°±è¢«returnç»™äº†storeã€‚storeä¼šè‡ªåŠ¨å°†åŸæ¥çš„stateæ›¿æ¢ä¸ºnewStateï¼Œæ­¤æ—¶çš„stateå°±è¢«æ›´æ–°äº†ã€‚\næ­¤æ—¶ç»„ä»¶ä¸­æ˜¾ç¤ºçš„æ•°æ®åº”è¯¥åŒæ­¥è¢«æ›´æ–°ï¼Œä½†æ˜¯Reduxå¹¶ä¸ä¼šè‡ªåŠ¨å»åšè¿™ä»¶äº‹æƒ…ã€‚æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨å¤„ç†è¿™ä¸ªé—®é¢˜ã€‚\nåœ¨å¯¹åº”çš„ç»„ä»¶ä¸­ï¼Œæ‰¾åˆ°constructoræ„é€ å‡½æ•°ï¼Œåœ¨å…¶ä¸­æ·»åŠ ä»¥ä¸‹ä¸€è¡Œä»£ç ï¼š\nstore.subscribe(this.handleStoreChange);\n\nè¿™è¡Œä»£ç è¡¨ç¤ºï¼Œå½“å‰ç»„ä»¶è®¢é˜…äº†storeã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦storeä¸­çš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œsubscribe()ä¸­çš„å‡½æ•°å°±ä¼šè‡ªåŠ¨è¢«æ‰§è¡Œã€‚\næ­¤æ—¶åªè¦æ‰‹åŠ¨æ›´æ–°å½“å‰ç»„ä»¶çš„stateå³å¯ï¼Œå³é‡æ–°å–ä¸€æ¬¡storeä¸­çš„æ•°æ®ï¼Œç„¶åè°ƒç”¨setState()æ›¿æ¢æ‰å½“å‰ç»„ä»¶çš„stateã€‚\nhandleStoreChange() &#123;  this.setState(store.getState());&#125;\n\nå®ç°Todo Liståˆ—è¡¨å±•ç¤ºçš„åŠŸèƒ½å½“ç‚¹å‡»é¡µé¢çš„æäº¤æŒ‰é’®çš„æ—¶å€™ï¼Œåº”è¯¥æŠŠå½“å‰è¾“å…¥æ¡†ä¸­çš„å†…å®¹æ·»åŠ åˆ°storeä¸­çš„listæ•°ç»„ä¸­ã€‚\né¦–å…ˆï¼Œéœ€è¦ç»™buttonç»‘å®šä¸€ä¸ªç‚¹å‡»äº‹ä»¶ã€‚åˆ«å¿˜è®°ç»‘å®šthisä½œç”¨åŸŸã€‚\nrender() &#123;  return (    &lt;div style=&#123;&#123; margin: &quot;20px auto&quot;, width: &quot;500px&quot; &#125;&#125;&gt;      &lt;Input        value=&#123;this.state.inputValue&#125;        placeholder=&quot;todo info&quot;        style=&#123;&#123; width: &quot;430px&quot; &#125;&#125;        onChange=&#123;this.handleInputChange&#125;      /&gt;      &lt;Button type=&quot;primary&quot; onClick=&#123;this.handleBtnClick&#125;&gt;        æäº¤      &lt;/Button&gt;      &lt;Divider orientation=&quot;left&quot;&gt;Todo List&lt;/Divider&gt;      &lt;List        size=&quot;large&quot;        bordered        dataSource=&#123;this.state.list&#125;        renderItem=&#123;(item) =&gt; &lt;List.Item&gt;&#123;item&#125;&lt;/List.Item&gt;&#125;      /&gt;    &lt;/div&gt;  );&#125;\n\nç°åœ¨æ¥å®ç°handleBtnClick\nhandleBtnClick() &#123;  const action = &#123;    type: &quot;add_list_item&quot;,    value: store.getState().inputValue,  &#125;;  store.dispatch(action);&#125;\n\næ­¤æ—¶åœ¨reducerä¸­æ·»åŠ add_list_itemå¯¹åº”çš„actionçš„æ“ä½œ\nif (action.type === &quot;add_list_item&quot;) &#123;  const newState = JSON.parse(JSON.stringify(state));  newState.list.push(newState.inputValue);  newState.inputValue = &quot;&quot;;  return newState;&#125;\n\nå®ç°åˆ é™¤Todo Liståˆ—è¡¨é¡¹çš„åŠŸèƒ½åŒæ ·çš„ï¼Œåœ¨åˆ—è¡¨é¡¹itemä¸Šç»‘å®šç‚¹å‡»äº‹ä»¶ï¼ŒåŒæ—¶ä¼ é€’itemå¯¹åº”çš„indexå€¼ã€‚\nrender() &#123;  return (    &lt;div style=&#123;&#123; margin: &quot;20px auto&quot;, width: &quot;500px&quot; &#125;&#125;&gt;      &lt;Input        value=&#123;this.state.inputValue&#125;        placeholder=&quot;todo info&quot;        style=&#123;&#123; width: &quot;430px&quot; &#125;&#125;        onChange=&#123;this.handleInputChange&#125;      /&gt;      &lt;Button type=&quot;primary&quot; onClick=&#123;this.handleBtnClick&#125;&gt;        æäº¤      &lt;/Button&gt;      &lt;Divider orientation=&quot;left&quot;&gt;Todo List&lt;/Divider&gt;      &lt;List        size=&quot;large&quot;        bordered        dataSource=&#123;this.state.list&#125;        renderItem=&#123;(item, index) =&gt; (          &lt;List.Item onClick=&#123;this.handleItemClick.bind(this, index)&#125;&gt;            &#123;item&#125;          &lt;/List.Item&gt;        )&#125;      /&gt;    &lt;/div&gt;  );&#125;\n\nå®ç°handleItemClick\nhandleItemClick(index) &#123;  const action = &#123;    type: &quot;delete_list_item&quot;,    index: index,  &#125;;  store.dispatch(action);&#125;\n\nåœ¨reducerä¸­å®ç°è¿™ä¸ªactionå¯¹åº”çš„åŠŸèƒ½ã€‚\nif (action.type === &quot;delete_list_item&quot;) &#123;  const newState = JSON.parse(JSON.stringify(state));  newState.list.splice(action.index, 1);  return newState;&#125;\n\nå®Œæ•´ä»£ç public/index.html\n&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;utf-8&quot; /&gt;    &lt;link rel=&quot;icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot; /&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;    &lt;title&gt;Todo List&lt;/title&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;\n\nsrc/index.js\nimport React from &quot;react&quot;;import ReactDOM from &quot;react-dom&quot;;import TodoList from &quot;./TodoList&quot;;ReactDOM.render(  &lt;React.StrictMode&gt;    &lt;TodoList /&gt;  &lt;/React.StrictMode&gt;,  document.getElementById(&quot;root&quot;));\n\nsrc/TodoList.js\nimport React, &#123; Component &#125; from &quot;react&quot;;import &quot;antd/dist/antd.css&quot;;import &#123; Input &#125; from &quot;antd&quot;;import &#123; Button &#125; from &quot;antd&quot;;import &#123; List, Divider &#125; from &quot;antd&quot;;import store from &quot;./store/index&quot;;class TodoList extends Component &#123;  constructor(props) &#123;    super(props);    this.state = store.getState();    console.log(this.state);    this.handleInputChange = this.handleInputChange.bind(this);    this.handleStoreChange = this.handleStoreChange.bind(this);    this.handleBtnClick = this.handleBtnClick.bind(this);    store.subscribe(this.handleStoreChange);  &#125;  handleInputChange(e) &#123;    const action = &#123;      type: &quot;change_input_value&quot;,      value: e.target.value,    &#125;;    store.dispatch(action);  &#125;  handleStoreChange() &#123;    console.log(store.getState());    this.setState(store.getState());  &#125;  handleBtnClick() &#123;    const action = &#123;      type: &quot;add_list_item&quot;,    &#125;;    store.dispatch(action);  &#125;  handleItemClick(index) &#123;    const action = &#123;      type: &quot;delete_list_item&quot;,      index: index,    &#125;;    store.dispatch(action);  &#125;  render() &#123;    return (      &lt;div style=&#123;&#123; margin: &quot;20px auto&quot;, width: &quot;500px&quot; &#125;&#125;&gt;        &lt;Input          value=&#123;this.state.inputValue&#125;          placeholder=&quot;todo info&quot;          style=&#123;&#123; width: &quot;430px&quot; &#125;&#125;          onChange=&#123;this.handleInputChange&#125;        /&gt;        &lt;Button type=&quot;primary&quot; onClick=&#123;this.handleBtnClick&#125;&gt;          æäº¤        &lt;/Button&gt;        &lt;Divider orientation=&quot;left&quot;&gt;Todo List&lt;/Divider&gt;        &lt;List          size=&quot;large&quot;          bordered          dataSource=&#123;this.state.list&#125;          renderItem=&#123;(item, index) =&gt; (            &lt;List.Item onClick=&#123;this.handleItemClick.bind(this, index)&#125;&gt;              &#123;item&#125;            &lt;/List.Item&gt;          )&#125;        /&gt;      &lt;/div&gt;    );  &#125;&#125;export default TodoList;\n\nsrc/store/index.js\n// åˆ›å»ºstoreimport &#123; createStore &#125; from &quot;redux&quot;;import reducer from &quot;./reducer&quot;;// åˆ›å»ºæ•°æ®å…¬å…±å­˜å‚¨ä»“åº“// è°ƒç”¨createStoreå³å¯åˆ›å»ºä¸€ä¸ªstoreconst store = createStore(  reducer,  window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__());export default store;\n\nsrc/store/reducer.js\nconst defaultState = &#123;  inputValue: &quot;&quot;,  list: [],&#125;;// reducerå¯ä»¥æ¥æ”¶stateï¼Œä½†æ˜¯ç»ä¸èƒ½ä¿®æ”¹state// state: Storeä¸­ä¸Šä¸€æ¬¡å­˜å‚¨çš„æ•°æ®// action: ç”¨æˆ·ä¼ é€’çš„actionexport default (state = defaultState, action) =&gt; &#123;  if (action.type === &quot;change_input_value&quot;) &#123;    // å¯¹stateè¿›è¡Œä¸€æ¬¡æ·±æ‹·è´    const newState = JSON.parse(JSON.stringify(state));    // ä¿®æ”¹inputæ¡†ä¸­valueçš„å€¼    newState.inputValue = action.value;    return newState;  &#125;  if (action.type === &quot;add_list_item&quot;) &#123;    const newState = JSON.parse(JSON.stringify(state));    newState.list.push(newState.inputValue);    newState.inputValue = &quot;&quot;;    return newState;  &#125;  if (action.type === &quot;delete_list_item&quot;) &#123;    const newState = JSON.parse(JSON.stringify(state));    newState.list.splice(action.index, 1);    return newState;  &#125;  return state;&#125;;\n\n","tags":["å‰ç«¯","React","Redux"]},{"title":"åŒæ—¶ä½¿ç”¨Redux-devtoolsæ’ä»¶å’ŒRedux-thunkå¦‚ä½•ç¼–å†™storeå’Œreducer","url":"/2021/04/08/11.%E5%90%8C%E6%97%B6%E4%BD%BF%E7%94%A8Redux-devtools%E6%8F%92%E4%BB%B6%E5%92%8CRedux-thunk%E5%A6%82%E4%BD%95%E7%BC%96%E5%86%99store%E5%92%8Creducer/","content":"åŒæ—¶ä½¿ç”¨Redux-devtoolsæ’ä»¶å’ŒRedux-thunkå¦‚ä½•ç¼–å†™storeå’ŒreducerRedux-thunkæ˜¯Rudexçš„ä¸€ä¸ªä¸­é—´ä»¶ã€‚\nä½¿ç”¨Redux-thunkï¼Œé¦–å…ˆè¦å®‰è£…Redux-thunkã€‚\nnpm install --save redux-thunk\n\nåœ¨åˆ›å»ºstoreçš„æ—¶å€™ï¼Œæ¥ä½¿ç”¨redux-thunkã€‚\n// åˆ›å»ºstoreimport &#123; createStore, applyMiddleware, compose &#125; from &quot;redux&quot;;import thunk from &quot;redux-thunk&quot;;import reducer from &quot;./reducer&quot;;// åˆ›å»ºæ•°æ®å…¬å…±å­˜å‚¨ä»“åº“// è°ƒç”¨createStoreå³å¯åˆ›å»ºä¸€ä¸ªstore// åˆ›å»ºstoreçš„æ—¶å€™ä½¿ç”¨redux-thunkè¿™ä¸ªä¸­é—´ä»¶// å®é™…ä¸Šï¼Œchromeä¸­çš„æ’ä»¶REDUX_DEVTOOLSä¹Ÿæ˜¯ä¸€ä¸ªreduxä¸­é—´ä»¶// åœ¨github redux-devtools-extensionä¸­æœ‰åŒæ—¶ä½¿ç”¨è¿™ä¸¤ä¸ªä¸­é—´ä»¶çš„ä½¿ç”¨æ–¹æ³•ã€‚å¦‚ä¸‹const composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__  ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__(&#123;&#125;)  : compose;const enhancer = composeEnhancers(applyMiddleware(thunk));const store = createStore(reducer, enhancer);export default store;\n\næ³¨æ„ï¼Œæ˜¯åœ¨åˆ›å»ºReduxçš„storeçš„æ—¶å€™ä½¿ç”¨äº†Reduxçš„ä¸­é—´ä»¶ã€‚æ— è®ºæ˜¯Redux-thunkè¿˜æ˜¯redux-devtoolséƒ½æ˜¯Reduxçš„ä¸­é—´ä»¶ã€‚\nä»¥ä¸Šä»£ç å®Œæˆäº†ä¸€ä»¶äº‹ï¼šå®‰è£…äº†thunkï¼Œå¹¶ä¸”åœ¨Reduxåˆ›å»ºçš„æ—¶å€™ä½¿ç”¨äº†thunkã€‚\nreducerçš„ç¼–å†™ï¼š\n// reducer.jsconst defaultState = &#123;&#125;;const reducer = (state = defaultState, action) =&gt; &#123;  // æ­¤å¤„ç¼–å†™è‡ªå·±å…³äºactionæˆ–è€…å…¶ä»–ä»£ç   return state;&#125;;export default reducer;\n\n","tags":["Redux","å‰ç«¯ï¼ŒReact","Redux-thunk"]},{"title":"HTML+CSSé¢è¯•é¢˜","url":"/2021/04/16/13.%20HTML+CSS%E9%9D%A2%E8%AF%95%E9%A2%98/","content":"HTML+CSSé¢è¯•é¢˜HTMLé¢è¯•é¢˜HTMLåœ¨é¢è¯•ä¸­å æ¯”ä¸å¤§ï¼Œé¢è¯•çš„é‡ç‚¹ä¸€èˆ¬ä¸ä¼šæ”¾åœ¨HTMLä¸Šã€‚\n\nå¦‚ä½•ç†è§£HTMLè¯­ä¹‰åŒ–ï¼Ÿ\nè¯­ä¹‰åŒ–æ˜¯ä¸ºäº†èƒ½å¤Ÿè¯»æ‡‚ä»£ç ï¼š\n\nè®©äººæ›´å®¹æ˜“è¯»æ‡‚ï¼Œå¢åŠ ä»£ç çš„å¯è¯»æ€§ã€‚æ‰€æœ‰å…ƒç´ éƒ½ä½¿ç”¨&lt;div&gt;æ ‡ç­¾ï¼Œä¸åœ¨æ®µè½ä½¿ç”¨&lt;p&gt;æ ‡ç­¾ï¼Œåˆ—è¡¨ä½¿ç”¨&lt;ul&gt;ï¼Œ&lt;li&gt;ï¼Œæ˜æ˜¾åè€…èƒ½æ›´å®¹æ˜“åœ°å»ç†è§£ä»£ç è¦è¡¨è¾¾çš„æ„æ€ã€‚\n\nè®©æœç´¢å¼•æ“æ›´å®¹æ˜“è¯»æ‡‚ï¼ˆSEOï¼‰ã€‚\n\n\n\né»˜è®¤æƒ…å†µä¸‹ï¼Œå“ªäº›HTMLæ ‡ç­¾æ˜¯å—çº§å…ƒç´ ï¼Œå“ªäº›æ˜¯å†…è”å…ƒç´ ï¼Ÿ\n\nå—çº§å…ƒç´ ï¼šdisplay: block/table; æœ‰div, h1, h2, table, ul, ol, pç­‰ã€‚å—çº§å…ƒç´ ç‹¬å ä¸€è¡Œã€‚\n\n\nå†…è”å…ƒç´ ï¼šdisplay:inline/inline-block; æœ‰span, img, input, buttonç­‰ã€‚å†…è”å…ƒç´ ä¸ä¼šç‹¬å ä¸€è¡Œï¼Œä¼šä¸€ç›´å¾€åæ’åˆ—ï¼Œç›´åˆ°æµè§ˆå™¨çš„è¾¹ç¼˜æˆ–è€…æ¢è¡Œä¸ºæ­¢ã€‚\n\n\n\nCSSé¢è¯•é¢˜å…ˆæ¢³ç†ä¸€ä¸‹CSSçš„çŸ¥è¯†æ¨¡å—æœ‰å“ªäº›ï¼š\n\nå¸ƒå±€\nå®šä½\nå›¾æ–‡æ ·å¼ã€‚å›¾ç‰‡ã€æ–‡æœ¬å®½åº¦é«˜åº¦ã€é¢œè‰²ã€å­—ä½“ç­‰ç­‰å±æ€§çš„å¤„ç†ã€‚æ¶‰åŠåˆ°ä¸€ä¸ªé‡è¦çš„é—®é¢˜ï¼šå¦‚ä½•ç»§æ‰¿\nå“åº”å¼\nCSS3ã€‚é‡ç‚¹æ˜¯flexå’ŒåŠ¨ç”»ã€‚ï¼ˆåŠ¨ç”»ä¸æ˜¯é¢è¯•çš„é‡ç‚¹ï¼‰\n\nå¸ƒå±€\nç›’å­æ¨¡å‹çš„å®½åº¦å¦‚ä½•è®¡ç®—ï¼Ÿ\n\n\nâ€‹        offsetWidth = ï¼ˆå†…å®¹å®½åº¦+å†…è¾¹è·+è¾¹æ¡†ï¼‰ï¼Œæ— å¤–è¾¹è·  ==&gt; ä¸Šå›¾ç­”æ¡ˆï¼š122px\nâ€‹        è¡¥å……ï¼šå¦‚æœè®©offsetWidthç­‰äº100pxï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ\nâ€‹        ç­”æ¡ˆï¼šæ·»åŠ box-sizing: border-box;\n\nmarginçºµå‘é‡å çš„é—®é¢˜\n\n\nâ€‹        ç›¸é‚»å…ƒç´ çš„margin-topå’Œmargin-bottomä¼šå‘ç”Ÿé‡å ã€‚\nâ€‹        ç©ºç™½å†…å®¹çš„&lt;p&gt;&lt;/p&gt;ä¹Ÿä¼šé‡å ã€‚\nâ€‹        ä¸Šå›¾ç­”æ¡ˆï¼š15px\n\nmarginè´Ÿå€¼çš„é—®é¢˜\nå¯¹marginçš„top, right, bottom, leftè®¾ç½®è´Ÿå€¼ï¼Œæœ‰ä½•æ•ˆæœï¼Ÿ\nmargin-topå’Œmargin-leftè®¾ç½®è´Ÿå€¼ï¼Œå…ƒç´ ä¼šå‘ä¸Šã€å‘å·¦ç§»åŠ¨ï¼›\nmargin-rightè®¾ç½®è´Ÿå€¼ï¼Œå³ä¾§å…ƒç´ å·¦ç§»ï¼Œè‡ªèº«ä¸å—å½±å“ï¼›\nmargin-bottomè®¾ç½®è´Ÿå€¼ï¼Œä¸‹æ–¹å…ƒç´ ä¸Šç§»ï¼Œè‡ªèº«ä¸å—å½±å“ã€‚\n\nBFCçš„ç†è§£å’Œåº”ç”¨\nä»€ä¹ˆæ˜¯BFCï¼Ÿå¦‚ä½•åº”ç”¨ï¼Ÿ\nBFCï¼šBlock Format Contextï¼Œå—çº§æ ¼å¼åŒ–ä¸Šä¸‹æ–‡ã€‚æ˜¯ä¸€å—ç‹¬ç«‹çš„æ¸²æŸ“åŒºåŸŸï¼Œå†…éƒ¨å…ƒç´ çš„æ¸²æŸ“ä¸ä¼šå½±å“è¾¹ç•Œä»¥å¤–çš„å…ƒç´ ã€‚\n\nå½¢æˆBFCçš„å¸¸è§æ¡ä»¶ï¼š\nfloatä¸æ˜¯noneã€‚åªè¦è®¾ç½®äº†floatï¼Œè¿™ä¸ªå…ƒç´ å°±å½¢æˆäº†BFCï¼›\npositionæ˜¯absoluteæˆ–fixedï¼›\noverflowä¸æ˜¯visibleï¼›ï¼ˆæœ€å¸¸ç”¨ï¼Œä¹Ÿæ˜¯æœ€ç®€å•çš„æ˜¯overflow: hidden;ï¼‰\ndisplayæ˜¯flexï¼Œinline-blockç­‰ã€‚\n\n\nBFCçš„å¸¸è§åº”ç”¨\næ¸…é™¤æµ®åŠ¨\n\n\n\n\nfloatå¸ƒå±€çš„é—®é¢˜ï¼Œä»¥åŠclearfix\n\nå¦‚ä½•å®ç°åœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€ï¼Ÿï¼ˆè€ƒå¯Ÿfloatå¸ƒå±€çš„é‡è¦æ–¹å¼ï¼‰\nåœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€çš„ç›®çš„ï¼š\n\nä¸‰æ å¸ƒå±€ï¼Œä¸­é—´ä¸€æ æœ€å…ˆåŠ è½½å’Œæ¸²æŸ“ï¼ˆå†…å®¹æœ€é‡è¦ï¼‰\nä¸¤ä¾§å†…å®¹å›ºå®šï¼Œä¸­é—´å†…å®¹éšç€å®½åº¦è‡ªé€‚åº”\nä¸€èˆ¬ç”¨äºPCç½‘é¡µ\n\nåœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€çš„æŠ€æœ¯æ€»ç»“ï¼š\n\nä½¿ç”¨floatå¸ƒå±€ï¼›\nä¸¤ä¾§ä½¿ç”¨marginè´Ÿå€¼ï¼Œä»¥ä¾¿å’Œä¸­é—´å†…å®¹æ¨ªå‘é‡å ï¼›\né˜²æ­¢ä¸­é—´å†…å®¹è¢«ä¸¤ä¾§è¦†ç›–ï¼Œä¸€ä¸ªæ˜¯ç”¨paddingï¼ˆåœ£æ¯å¸ƒå±€ï¼‰ï¼Œä¸€ä¸ªæ˜¯ç”¨marginï¼ˆåŒé£ç¿¼å¸ƒå±€ï¼‰\n\n&lt;!-- åœ£æ¯å¸ƒå±€ --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot; /&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;    &lt;title&gt;åœ£æ¯å¸ƒå±€&lt;/title&gt;    &lt;style&gt;      header &#123;        width: 100%;        height: 50px;        line-height: 50px;        text-align: center;        background-color: rgb(165, 154, 154);      &#125;      footer &#123;        clear: both;        width: 100%;        height: 50px;        line-height: 50px;        text-align: center;        background-color: rgb(165, 154, 154);      &#125;      .content &#123;        padding: 0 150px 0 200px;        position: relative;      &#125;      .main &#123;        background-color: rgb(190, 137, 137);        width: 100%;        float: left;      &#125;      .left &#123;        position: relative;        background-color: rgb(125, 179, 156);        width: 200px;        float: left;        margin-left: -100%;        right: 200px;      &#125;      .right &#123;        background-color: rgb(122, 150, 201);        width: 150px;        float: left;        margin-right: -150px;      &#125;    &lt;/style&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;header&gt;header&lt;/header&gt;    &lt;div class=&quot;content&quot;&gt;      &lt;div class=&quot;main&quot;&gt;main&lt;/div&gt;      &lt;div class=&quot;left&quot;&gt;left&lt;/div&gt;      &lt;div class=&quot;right&quot;&gt;right&lt;/div&gt;    &lt;/div&gt;    &lt;footer&gt;footer&lt;/footer&gt;  &lt;/body&gt;&lt;/html&gt;\n\n&lt;!-- åŒé£ç¿¼å¸ƒå±€ --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot; /&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;    &lt;title&gt;åŒé£ç¿¼å¸ƒå±€&lt;/title&gt;    &lt;style&gt;      header &#123;        height: 50px;        line-height: 50px;        background-color: rgb(177, 169, 169);        text-align: center;      &#125;      footer &#123;        height: 50px;        line-height: 50px;        background-color: rgb(177, 169, 169);        text-align: center;        clear: both;      &#125;      .content &#123;        width: 100%;      &#125;      .main &#123;        width: 100%;        background-color: rgb(235, 102, 102);        float: left;      &#125;      .main-wrap &#123;        margin: 0 150px 0 200px;      &#125;      .left &#123;        width: 200px;        background-color: rgb(228, 207, 88);        float: left;        margin-left: -100%;      &#125;      .right &#123;        width: 150px;        background-color: rgb(124, 238, 175);        float: left;        margin-left: -150px;      &#125;    &lt;/style&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;header&gt;header&lt;/header&gt;    &lt;div class=&quot;content&quot;&gt;      &lt;div class=&quot;main&quot;&gt;        &lt;div class=&quot;main-wrap&quot;&gt;main&lt;/div&gt;      &lt;/div&gt;      &lt;div class=&quot;left&quot;&gt;left&lt;/div&gt;      &lt;div class=&quot;right&quot;&gt;right&lt;/div&gt;    &lt;/div&gt;    &lt;footer&gt;footer&lt;/footer&gt;  &lt;/body&gt;&lt;/html&gt;\n\nåœ£æ¯å¸ƒå±€å’ŒåŒé£ç¿¼å¸ƒå±€çš„å¯¹æ¯”ï¼š\n\nåœ£æ¯å¸ƒå±€æ˜¯ç”¨è¿‡paddingæ¥ä¸ºå·¦å³ç•™ç™½ï¼›è€ŒåŒé£ç¿¼å¸ƒå±€æ˜¯ç”¨è¿‡marginæ¥ä¸ºå·¦å³ç•™ç™½ï¼›\nåœ£æ¯å¸ƒå±€ä¸­ï¼Œleftçš„å†…å®¹ä½¿ç”¨äº†position: reletive;å’Œright: 200px;ï¼ŒåŒé£ç¿¼å¸ƒå±€æ²¡æœ‰ç”¨åˆ°ç›¸å¯¹å®šä½ï¼Œå¤æ‚åº¦æ›´åŠ ä½ä¸€äº›ï¼›\nåœ£æ¯å¸ƒå±€ä¸­rightéƒ¨åˆ†ä½¿ç”¨çš„æ˜¯margin-rightï¼ŒåŒé£ç¿¼å¸ƒå±€ä¸­ä½¿ç”¨çš„æ˜¯margin-leftã€‚äºŒè€…ç›¸æ¯”ï¼Œmargin-leftè¦æ›´å®¹æ˜“ç†è§£ä¸€äº›ï¼›\næ€»çš„æ¥è¯´ï¼ŒåŒé£ç¿¼å¸ƒå±€å¤æ‚åº¦æ›´ä½ï¼Œç†è§£èµ·æ¥æ›´å®¹æ˜“ã€‚\nç®€å•æ¥è¯´ï¼ŒåŒé£ç¿¼å¸ƒå±€æ¯”åœ£æ¯å¸ƒå±€å¤šåˆ›å»ºäº†ä¸€ä¸ªdivï¼Œä½†æ˜¯ä¸ç”¨ç›¸å¯¹å®šä½äº†ã€‚\n\n\næ‰‹å†™clearfix\n\n\n/* æ‰‹å†™clear-fix */.clear-fix:after &#123;  content: &quot;&quot;;  display: table;  clear: both;&#125;\n\n\n\nflexç”»éª°å­\nå®ç°ä¸€ä¸ªä¸‰ç‚¹çš„éª°å­ï¼šä¸€ä¸ªéª°å­çš„ä¸€ä¸ªé¢ï¼Œå·¦ä¸Šè§’ã€ä¸­å¿ƒã€å³ä¸‹è§’å„æœ‰ä¸€ä¸ªç‚¹\n\nflexå¸¸ç”¨è¯­æ³•å›é¡¾ï¼š\n\nå®¹å™¨å¸¸ç”¨å±æ€§ï¼šflex-direction, justify-content, align-items, flex-wrap\n\né¡¹ç›®å¸¸ç”¨å±æ€§ï¼šalign-self\n\n\n\n\n\n&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot; /&gt;    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;    &lt;title&gt;flexç”»ä¸‰è‰²çš„éª°å­&lt;/title&gt;  &lt;/head&gt;  &lt;style&gt;    .box &#123;      width: 200px;      height: 200px;      border: 1px solid #000;      display: flex;      justify-content: space-between;    &#125;    .item &#123;      width: 50px;      height: 50px;      border-radius: 50%;      border: 1px solid #000;    &#125;    .item:nth-child(2) &#123;      align-self: center;    &#125;    .item:nth-child(3) &#123;      align-self: flex-end;    &#125;  &lt;/style&gt;  &lt;body&gt;    &lt;div class=&quot;box&quot;&gt;      &lt;div class=&quot;item&quot;&gt;&lt;/div&gt;      &lt;div class=&quot;item&quot;&gt;&lt;/div&gt;      &lt;div class=&quot;item&quot;&gt;&lt;/div&gt;    &lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;\n\nå®šä½\nabsoluteå’Œrelativeåˆ†åˆ«ä¾æ®ä»€ä¹ˆå®šä½ï¼Ÿ\nrelativeä¾æ®è‡ªèº«å®šä½ï¼›relativeä¾æ®æœ€è¿‘ä¸€å±‚çš„å®šä½å…ƒç´ å®šä½ï¼ˆçˆ¶å…ƒç´ ä¸€å±‚ä¸€å±‚å¾€ä¸Šæ‰¾ï¼‰ï¼Œå®šä½å…ƒç´ åŒ…æ‹¬ï¼špositionå±æ€§ä¸ºabsolute, relative, fixedçš„å…ƒç´ ä»¥åŠ&lt;body&gt;æ ‡ç­¾\n\nå±…ä¸­å¯¹é½æœ‰å“ªäº›å®ç°æ–¹å¼ï¼Ÿ\nå±…ä¸­å¯¹é½åˆ†ä¸ºæ°´å¹³å±…ä¸­å’Œå‚ç›´å±…ä¸­ã€‚\n\næ°´å¹³å±…ä¸­\ninlineå…ƒç´ ï¼š text-align: center;\nblockå…ƒç´ ï¼šmargin: auto;\nabsoluteå…ƒç´ ï¼šleft: 50%  + margin-leftè´Ÿå€¼\n\n\nå‚ç›´å±…ä¸­\ninlineå…ƒç´ ï¼šline-height: heightçš„å€¼\nabsoluteå…ƒç´ ï¼štop: 50% + margin-topè´Ÿå€¼\nabsoluteå…ƒç´ ï¼štop: 50% + transform: translate (-50%, -50%) ï¼ˆæ—§çš„æµè§ˆå™¨å…¼å®¹æ€§å¯èƒ½å­˜åœ¨é—®é¢˜ï¼Œä½†æ˜¯ä¸éœ€è¦çŸ¥é“å­å…ƒç´ çš„å®½é«˜å°±å¯ä»¥å®ç°ï¼‰\nabsoluteå…ƒç´ ï¼štop, left, bottom, right = 0 + margin: auto;ï¼ˆæµè§ˆå™¨å…¼å®¹æ€§ä¸å­˜åœ¨é—®é¢˜ï¼Œè€Œä¸”ä¸éœ€è¦çŸ¥é“å­å…ƒç´ çš„å°ºå¯¸ï¼‰\n\n\n\n\n\nå›¾æ–‡æ ·å¼\nline-heightçš„ç»§æ‰¿é—®é¢˜\n\nç­”æ¡ˆï¼š40pxã€‚\n\nå¦‚æœline-heightæ˜¯å…·ä½“æ•°å€¼ï¼Œå¦‚30pxï¼Œåˆ™ä¼šç»§æ‰¿è¯¥å€¼ï¼›\nå¦‚æœline-heightæ˜¯æ¯”ä¾‹ï¼Œå¦‚2æˆ–è€…1.5ï¼Œåˆ™ä¼šç»§æ‰¿è¯¥æ¯”ä¾‹ï¼›\nå¦‚æœline-heightæ˜¯ç™¾åˆ†æ¯”ï¼Œå¦‚200%ï¼Œåˆ™ç»§æ‰¿è®¡ç®—å‡ºæ¥çš„å€¼ã€‚ï¼ˆè€ƒç‚¹ï¼‰\n\n\n\nå“åº”å¼\nremæ˜¯ä»€ä¹ˆï¼Ÿ\nremæ˜¯ä¸€ä¸ªé•¿åº¦å•ä½ã€‚\n\npxï¼Œç»å¯¹é•¿åº¦å•ä½ï¼Œæœ€å¸¸ç”¨ï¼›\nemï¼Œç›¸å¯¹é•¿åº¦å•ä½ï¼Œç›¸å¯¹äºçˆ¶å…ƒç´ ï¼Œä¸å¸¸ç”¨ï¼›\nremï¼Œç›¸å¯¹é•¿åº¦å•ä½ï¼Œç›¸å¯¹äºæ ¹å…ƒç´ çš„font-sizeï¼ˆ&lt;html&gt;ï¼‰ï¼Œå¸¸ç”¨äºå“åº”å¼å¸ƒå±€ã€‚ä»»ä½•å¯ä»¥ä½¿ç”¨é•¿åº¦çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨remã€‚\n\n\nå¦‚ä½•å®ç°å“åº”å¼ï¼Ÿ\n\nmedia-queryï¼Œæ ¹æ®ä¸åŒå±å¹•çš„å®½åº¦è®¾ç½®æ ¹å…ƒç´ font-sizeï¼›\nremï¼ŒåŸºäºæ ¹å…ƒç´ çš„ç›¸å¯¹å•ä½ã€‚\n\n\nvw/vh\n\nèƒŒæ™¯ï¼šremå…·æœ‰å¼Šç«¯â€”â€”é˜¶æ¢¯æ€§\n\n\n\nç½‘é¡µè§†å£å°ºå¯¸\n\nwindow.screen.heightï¼šå±å¹•é«˜åº¦\nwindow.innerHeightï¼šç½‘é¡µè§†å£é«˜åº¦\ndocument.body.clientHeightï¼šbodyé«˜åº¦\n\n\n\nvhï¼šç½‘é¡µè§†å£é«˜åº¦çš„1%ï¼ˆ1/100ï¼‰\n\nvwï¼šç½‘é¡µè§†å£å®½åº¦çš„1%ï¼ˆ1/100ï¼‰\n\nvmaxï¼šå–vhå’Œvwä¸¤è€…æœ€å¤§å€¼ï¼›\n\nvminï¼šå–vhå’Œvwä¸¤è€…æœ€å°å€¼ï¼›\n\n\n\n\n","tags":["å‰ç«¯","é¢è¯•"]},{"title":"React-Reduxçš„ä½¿ç”¨","url":"/2021/04/09/12.React-Redux%E7%9A%84%E4%BD%BF%E7%94%A8/","content":"React-Reduxçš„ä½¿ç”¨React-Reduxæ˜¯ä¸€ä¸ªç¬¬ä¸‰æ–¹æ¨¡å—ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬åœ¨Reactä¸­æ›´åŠ æ–¹ä¾¿åœ°ä½¿ç”¨Reduxã€‚\næƒ³ä½¿ç”¨React-Reduxï¼Œé¦–å…ˆéœ€è¦å®‰è£…ã€‚\nnpm install --save react-redux\n\nç°åœ¨æˆ‘ä»¬ä»é›¶å¼€å§‹æ„å»ºä¸€ä¸ªTodoListã€‚\nåˆ›å»ºReacté¡¹ç›®ï¼Œindex.htmlå’Œindex.jsä¸å†èµ˜è¿°ã€‚é¡µé¢ä¸ŠæŒ‚è½½ä¸€ä¸ªTodoListç»„ä»¶ã€‚\n// src/TodoList.jsimport React, &#123; Component &#125; from &quot;react&quot;;class TodoList extends Component &#123;  render() &#123;    return (      &lt;div&gt;        &lt;input&gt;&lt;/input&gt;        &lt;button&gt;æ·»åŠ &lt;/button&gt;        &lt;ul&gt;          &lt;li&gt;123&lt;/li&gt;          &lt;li&gt;123&lt;/li&gt;        &lt;/ul&gt;      &lt;/div&gt;    );  &#125;&#125;export default TodoList;\n\né¡µé¢çš„åŸºæœ¬ç»“æ„é•¿è¿™ä¸ªæ ·å­ã€‚\n\nåœ¨é¡¹ç›®ä¸­ä½¿ç”¨Reduxï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºStoreã€‚\nåœ¨srcç›®å½•ä¸‹åˆ›å»ºstoreæ–‡ä»¶å¤¹ï¼Œstoreæ–‡ä»¶å¤¹ä¸­åˆ›å»ºindex.jsï¼Œè¯¥æ–‡ä»¶ä¸­ç¼–å†™storeã€‚\n// src/store/index.jsimport &#123; createStore &#125; from &quot;redux&quot;;import reducer from &quot;./reducer&quot;;const store = createStore(reducer);export default store;\n\nåˆ›å»ºå¥½storeä¹‹åï¼Œéœ€è¦ä¼ é€’ä¸€ä¸ªreducerç»™storeã€‚åœ¨storeç›®å½•ä¸‹åˆ›å»ºreducer.jsæ–‡ä»¶ã€‚\n// src/store/reducer.js// reduceræ˜¯ä¸€ä¸ªçº¯å‡½æ•°const defaultState = &#123;  inputValue: &quot;&quot;,  list: [],&#125;;const reducer = (state = defaultState, action) =&gt; &#123;  return state;&#125;;export default reducer;\n\nç°åœ¨å°±åˆ›å»ºå¥½äº†storeå’Œreducerã€‚\nå›åˆ°TodoList.jsä¸­ã€‚\nåœ¨æœªä½¿ç”¨React-Reduxçš„æ—¶å€™ï¼Œæˆ‘ä»¬æƒ³è·å–å€¼ï¼Œéœ€è¦åœ¨ç»„ä»¶ä¸­è°ƒç”¨store.getState()æ–¹æ³•æ¥è·å–stateã€‚ç°åœ¨æˆ‘ä»¬è¦ä½¿ç”¨React-Reduxï¼Œä¸éœ€è¦è¿™ä¹ˆåšäº†ã€‚\nåœ¨ä½¿ç”¨React-Reduxä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ›´æ–¹ä¾¿åœ°åœ¨ç»„ä»¶ä¸­ä½¿ç”¨Reduxã€‚\næ¥çœ‹React-Reduxçš„å†™æ³•ã€‚\nè¿™é‡Œè¦ç”¨åˆ°Providerã€‚\nProvideræ‰¾åˆ°srcä¸‹çš„index.jsã€‚æ”¹å†™æˆä¸‹é¢è¿™æ ·ğŸ‘‡\nimport React from &quot;react&quot;;import ReactDOM from &quot;react-dom&quot;;import &#123; Provider &#125; from &quot;react-redux&quot;;import TodoList from &quot;./TodoList&quot;;const App = (  &lt;Provider&gt;    &lt;TodoList /&gt;  &lt;/Provider&gt;);ReactDOM.render(App, document.getElementById(&quot;root&quot;));\n\nä¸Šé¢è¿™æ®µä»£ç ä¸­ï¼Œæˆ‘ä»¬é¦–å…ˆå¼•å…¥äº†Providerï¼Œå®ƒæ¥è‡ªreact-reduxï¼Œå®ƒå…¶å®å°±æ˜¯ä¸€ä¸ªç»„ä»¶ã€‚\nç„¶åæˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªAppç»„ä»¶ï¼Œå†…å®¹æ˜¯ä¸€æ®µJSXæ¨¡æ¿ã€‚åœ¨è¿™ä¸ªæ¨¡æ¿ä¸­ï¼Œæœ€å¤–å±‚ä½¿ç”¨&lt;Provider&gt;åŒ…è£¹ï¼Œå…¶ä¸­æ”¾å…¥æˆ‘ä»¬å®šä¹‰çš„&lt;TodoList&gt;ç»„ä»¶ã€‚\nç„¶ååœ¨æŒ‚è½½ç»„ä»¶çš„æ—¶å€™ï¼Œå°†&lt;App&gt;è¿™ä¸ªç»„ä»¶æŒ‚è½½åˆ°é¡µé¢ä¸Šã€‚\nç»§ç»­åœ¨src/index.jsä¸­å†™ä»£ç ã€‚\nimport React from &quot;react&quot;;import ReactDOM from &quot;react-dom&quot;;import &#123; Provider &#125; from &quot;react-redux&quot;;import store from &quot;./store&quot;;import TodoList from &quot;./TodoList&quot;;const App = (  &lt;Provider store=&#123;store&#125;&gt;    &lt;TodoList /&gt;  &lt;/Provider&gt;);ReactDOM.render(App, document.getElementById(&quot;root&quot;));\n\nä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬åœ¨src/index.jsä¸­å¼•å…¥äº†æˆ‘ä»¬å†™å¥½çš„storeï¼Œç„¶ååœ¨&lt;Provider&gt;ä¸Šæ·»åŠ ä¸€ä¸ªå±æ€§storeï¼Œè¿™ä¸ªå±æ€§çš„å€¼ç­‰äºæˆ‘ä»¬å¼•å…¥çš„storeå˜é‡ã€‚\nè¿™æ ·å†™çš„æ„æ€æ˜¯ï¼Œ&lt;Provider&gt;è¿æ¥äº†storeï¼Œé‚£ä¹ˆ&lt;Provider&gt;é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶éƒ½æœ‰èƒ½åŠ›è·å–åˆ°storeä¸­çš„å†…å®¹ã€‚\nç°åœ¨åœ¨TodoListè¿™ä¸ªç»„ä»¶ä¸­ï¼Œå°±ä¸å†éœ€è¦ä½¿ç”¨store.getState()æ¥è·å–Storeä¸­çš„æ•°æ®äº†ã€‚é‚£ä¹ˆè¦æ€ä¹ˆåšå‘¢ï¼Ÿ\nç­”ï¼šä½¿ç”¨connectã€‚\nconnectä¹‹å‰æåˆ°ï¼Œ&lt;Provider&gt;è¿æ¥äº†storeï¼Œé‚£ä¹ˆ&lt;Provider&gt;é‡Œé¢çš„æ‰€æœ‰ç»„ä»¶éƒ½æœ‰èƒ½åŠ›è·å–åˆ°storeä¸­çš„æ•°æ®ã€‚TodoListè¿™ä¸ªç»„ä»¶è·å–Storeä¸­çš„æ•°æ®ï¼Œå°±æ˜¯é€šè¿‡connectæ–¹æ³•ã€‚é¦–å…ˆéœ€è¦å¼•å…¥connect\næ³¨æ„çœ‹æœ€åä¸€è¡Œä»£ç ã€‚\n// src/Todolist.jsimport React, &#123; Component &#125; from &quot;react&quot;;import &#123; connect &#125; from &quot;react-redux&quot;;class TodoList extends Component &#123;  render() &#123;    return (      &lt;div&gt;        &lt;input&gt;&lt;/input&gt;        &lt;button&gt;æ·»åŠ &lt;/button&gt;        &lt;ul&gt;          &lt;li&gt;123&lt;/li&gt;          &lt;li&gt;123&lt;/li&gt;        &lt;/ul&gt;      &lt;/div&gt;    );  &#125;&#125;// å¯¼å‡ºçš„ä¸å†æ˜¯TodoListè¿™ä¸ªç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªconnectæ–¹æ³•export default connect(null, null)(TodoList);\n\næŒ‰ç…§ä¹‹å‰çš„å†™æ³•ï¼Œæˆ‘ä»¬åº”è¯¥å¯¼å‡ºçš„æ˜¯TodoListè¿™ä¸ªç»„ä»¶ã€‚ç°åœ¨æˆ‘ä»¬å¯¼å‡ºçš„ä¸å†æ˜¯TodoListè¿™ä¸ªç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªconnectæ–¹æ³•ï¼Œç„¶åæŠŠTodoListä¼ ç»™è¿™ä¸ªæ–¹æ³•ã€‚connectä¸­å¯ä»¥å†™ä¸¤ä¸ªå†…å®¹ï¼Œæˆ‘ä»¬æš‚ä¸”å†™ä¸ºnullã€‚\nè¿™ä¹ˆå†™çš„æ„æ€æ˜¯ï¼Œè®©TodoListç»„ä»¶å’ŒStoreè¿›è¡Œè¿æ¥ã€‚connectæ–¹æ³•å®Œæˆçš„å°±æ˜¯è¿™ä¸ªåŠŸèƒ½ã€‚å› ä¸ºTodoListç»„ä»¶æ˜¯åœ¨Providerè¿™ä¸ªç»„ä»¶ä¹‹ä¸­çš„ï¼Œè¿™ä¸ªç»„ä»¶ä¸­çš„æ‰€æœ‰ç»„ä»¶éƒ½æœ‰èƒ½åŠ›å»è¿æ¥Storeï¼Œé€šè¿‡connectæ–¹æ³•å°±å¯ä»¥è¿›è¡Œè¿æ¥ã€‚\nåœ¨ä¸Storeåšè¿æ¥çš„æ—¶å€™ï¼Œéœ€è¦æœ‰ä¸€å®šçš„è¿æ¥æ–¹å¼ã€‚ä»è€Œï¼Œè¡ç”Ÿå‡ºäº†ä¸¤ä¸ªå‚æ•°ã€‚\nconnectçš„ä¸¤ä¸ªå‚æ•°mapStateToPropsmapStateToPropså‚æ•°åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å›ºå®šæ¥æ”¶ä¸€ä¸ªstateï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚\nç„¶åæŠŠmapStateToPropsæ”¾åœ¨connectæ–¹æ³•çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸­ã€‚\nconst mapStateToProps = (state) =&gt; &#123;  return &#123;&#125;;&#125;;// å¯¼å‡ºçš„ä¸å†æ˜¯TodoListè¿™ä¸ªç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªconnectæ–¹æ³•export default connect(mapStateToProps, null)(TodoList);\n\nè¿™æ®µä»£ç çš„æ„æ€æ˜¯ï¼Œè®©ç»„ä»¶TodoListå’ŒStoreå»åšè¿æ¥ï¼Œè¿æ¥çš„æ—¶å€™è¦æœ‰ä¸€å®šçš„è§„åˆ™ï¼Œè§„åˆ™å°±åœ¨mapStateToPropsä¸­ã€‚\nmapStateToPropsè§æ˜çŸ¥ä¹‰ï¼šå°†Storeä¸­çš„stateæ˜ å°„ä¸ºå½“å‰ç»„ä»¶çš„propsã€‚è¿™ä¸ªå‡½æ•°ä¸­æ¥æ”¶çš„stateæŒ‡çš„å°±æ˜¯Storeä¸­çš„æ•°æ®ã€‚\nç°åœ¨æ¥å®Œå–„ä¸€ä¸‹mapStateToPropsè¿™ä¸ªâ€œè§„åˆ™â€ã€‚\n// src/Todolist.jsimport React, &#123; Component &#125; from &quot;react&quot;;import store from &quot;./store&quot;;import &#123; connect &#125; from &quot;react-redux&quot;;class TodoList extends Component &#123;  render() &#123;    return (      &lt;div&gt;        &lt;input value=&#123;this.props.inputValue&#125;&gt;&lt;/input&gt;        &lt;button&gt;æ·»åŠ &lt;/button&gt;        &lt;ul&gt;          &lt;li&gt;123&lt;/li&gt;          &lt;li&gt;123&lt;/li&gt;        &lt;/ul&gt;      &lt;/div&gt;    );  &#125;&#125;const mapStateToProps = (state) =&gt; &#123;  return &#123;    inputValue: state.inputValue,  &#125;;&#125;;// å¯¼å‡ºçš„ä¸å†æ˜¯TodoListè¿™ä¸ªç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªconnectæ–¹æ³•export default connect(mapStateToProps, null)(TodoList);\n\næˆ‘ä»¬è¯´ï¼Œä¼ å…¥çš„stateå°±æ˜¯å½“å‰Storeä¸­çš„æ•°æ®ï¼Œstate.inputValueå°±ä»£è¡¨å–å‡ºäº†Storeä¸­çš„inputValueçš„å€¼ã€‚\ninputValue: state.inputValueå°±æ˜¯å°†Storeä¸­çš„inputValueå€¼æ˜ å°„ä¸ºå½“å‰ç»„ä»¶çš„propsä¸­çš„inputValueçš„å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨æƒ³åœ¨å½“å‰ç»„ä»¶ä¸­ä½¿ç”¨inputValueï¼Œä½¿ç”¨this.props.inputValueå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå€¼äº†ã€‚\nç°åœ¨è¦å®ç°çš„åŠŸèƒ½æ˜¯ï¼Œåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥å†…å®¹ï¼ŒStoreä¸­å¯¹åº”çš„inputValueä¹Ÿåº”è¯¥èƒ½å¤ŸåŠ¨æ€çš„æ”¹å˜ï¼Œå¹¶ä¸”æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šã€‚è¿™å°±æ¶‰åŠåˆ°äº†å‘Storeä¼ å€¼ã€‚åœ¨React-Reduxä¸­è¯¥å¦‚ä½•å‘Storeä¼ å€¼ï¼Ÿè¿™æ—¶å€™ï¼Œç¬¬äºŒä¸ªå‚æ•°mapDispatchToPropså°±æ´¾ä¸Šäº†ç”¨åœºã€‚\nmapDispatchToPropsç¬¬äºŒä¸ªå‚æ•°æ˜¯mapDispatchToPropsï¼Œè¿™ä¸ªå‚æ•°åŒæ ·åº”è¯¥æ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°å›ºå®šæ¥æ”¶ä¸€ä¸ªdispatchæ–¹æ³•ï¼Œå¹¶ä¸”è¿”å›ä¸€ä¸ªå¯¹è±¡ã€‚\nç„¶åæŠŠmapDispatchToPropsæ”¾åœ¨connectæ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°ä¸­ã€‚\nconst mapDispatchToProps = (dispatch) =&gt; &#123;  return &#123;&#125;;&#125;;// å¯¼å‡ºçš„ä¸å†æ˜¯TodoListè¿™ä¸ªç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªconnectæ–¹æ³•export default connect(mapStateToProps, mapDispatchToProps)(TodoList);\n\nä¸Šé¢è¿™æ®µä»£ç çš„æ„æ€æ˜¯ï¼Œå°†TodoListè¿™ä¸ªç»„ä»¶å’ŒStoreè¿›è¡Œå…³è”ï¼ŒmapStateToPropså‚æ•°è§„å®šäº†Storeä¸­çš„æ•°æ®ä¼šæ˜ å°„åˆ°ç»„ä»¶çš„propsä¸Šé¢ï¼›åŒæ—¶ï¼Œå¦‚æœæƒ³å¯¹Storeä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹ï¼Œä¹Ÿå¯ä»¥é€šè¿‡Storeçš„propsè¿›è¡Œä¿®æ”¹ã€‚\nç°åœ¨æ¥ç†è§£mapDispatchToPropsã€‚dispatchæŒ‡çš„å°±æ˜¯store.dispatch()ï¼ŒpropsæŒ‡çš„ä¹Ÿå°±æ˜¯å­ç»„ä»¶æ¥æ”¶åˆ°çš„propsã€‚æˆ‘ä»¬ç°åœ¨ç›¸å½“äºæŠŠStoreçš„dispatchæ–¹æ³•æŒ‚è½½åˆ°äº†propsä¸Šã€‚\nç»“åˆä»£ç æ¥ç†è§£ã€‚\n// src/Todolist.jsimport React, &#123; Component &#125; from &quot;react&quot;;import &#123; connect &#125; from &quot;react-redux&quot;;class TodoList extends Component &#123;  render() &#123;    return (      &lt;div&gt;        &lt;input          value=&#123;this.props.inputValue&#125;          onChange=&#123;this.handleInputChange.bind(this)&#125;        &gt;&lt;/input&gt;        &lt;button&gt;æ·»åŠ &lt;/button&gt;        &lt;ul&gt;          &lt;li&gt;123&lt;/li&gt;          &lt;li&gt;123&lt;/li&gt;        &lt;/ul&gt;      &lt;/div&gt;    );  &#125;  handleInputChange(e) &#123;    console.log(e.target.value);  &#125;&#125;const mapStateToProps = (state) =&gt; &#123;  return &#123;    inputValue: state.inputValue,  &#125;;&#125;;const mapDispatchToProps = (dispatch) =&gt; &#123;  return &#123;&#125;;&#125;;// å¯¼å‡ºçš„ä¸å†æ˜¯TodoListè¿™ä¸ªç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªconnectæ–¹æ³•export default connect(mapStateToProps, mapDispatchToProps)(TodoList);\n\nç°åœ¨åœ¨inputæ¡†ä¸Šç»‘å®šäº†ä¸€ä¸ªonChangeæ–¹æ³•ï¼Œä¸€æ—¦è§¦å‘onChangeäº‹ä»¶ï¼Œå°±ä¼šè°ƒç”¨handleInputChangeæ–¹æ³•ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œç°åœ¨propsä¸­çš„æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œæˆ‘ä»¬æƒ³åŒæ­¥ä¿®æ”¹Storeä¸­çš„æ•°æ®ã€‚\næƒ³è¦æ”¹å˜Storeä¸­çš„å†…å®¹ï¼Œå°±éœ€è¦è°ƒç”¨store.dispatch()æ–¹æ³•ã€‚\nç°åœ¨store.dispatch()å·²ç»é€šè¿‡mapDispatchToPropsæ˜ å°„åˆ°äº†propsä¸Šï¼Œæ‰€ä»¥ï¼Œthis.propsä¸­åº”è¯¥æœ‰ä¸€ä¸ªä¸œè¥¿èƒ½å¤Ÿå…è®¸æˆ‘ä»¬å»è°ƒç”¨store.dispatch()ã€‚\né‚£ä¹ˆï¼Œæˆ‘ä»¬å°±åœ¨propsä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•changeInputValueï¼Œå°†å…¶ç»‘å®šåˆ°onChangeäº‹ä»¶ä¸Šã€‚\nå¯æ˜¯ç°åœ¨propsæœ¬èº«å¹¶æ²¡æœ‰è¿™ä¸ªæ–¹æ³•ã€‚ç°åœ¨å°±ç”¨åˆ°äº†mapDispatchToPropsã€‚è®©è¿™ä¸ªå‡½æ•°è¿”å›ä¸€ä¸ªchangeInputValueæ–¹æ³•å³å¯ã€‚\n// src/Todolist.jsimport React, &#123; Component &#125; from &quot;react&quot;;import &#123; connect &#125; from &quot;react-redux&quot;;class TodoList extends Component &#123;  render() &#123;    return (      &lt;div&gt;        &lt;input          value=&#123;this.props.inputValue&#125;          onChange=&#123;this.props.changeInputValue&#125;        &gt;&lt;/input&gt;        &lt;button&gt;æ·»åŠ &lt;/button&gt;        &lt;ul&gt;          &lt;li&gt;123&lt;/li&gt;          &lt;li&gt;123&lt;/li&gt;        &lt;/ul&gt;      &lt;/div&gt;    );  &#125;&#125;const mapStateToProps = (state) =&gt; &#123;  return &#123;    inputValue: state.inputValue,  &#125;;&#125;;const mapDispatchToProps = (dispatch) =&gt; &#123;  return &#123;    changeInputValue(e) &#123;      const action = &#123;        type: &quot;change_input_value&quot;,        value: e.target.value,      &#125;;      dispatch(action);    &#125;,  &#125;;&#125;;// å¯¼å‡ºçš„ä¸å†æ˜¯TodoListè¿™ä¸ªç»„ä»¶ï¼Œè€Œæ˜¯ä¸€ä¸ªconnectæ–¹æ³•export default connect(mapStateToProps, mapDispatchToProps)(TodoList);\n\nmapDispatchToPropsæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶dispatchæ–¹æ³•ï¼Œä½¿è¿™ä¸ªå‡½æ•°å¯ä»¥ç›´æ¥ä½¿ç”¨dispatchæ¥è½¬å‘actionã€‚\næ¥ä¸‹æ¥çš„é€»è¾‘å°±å¾ˆç®€å•äº†ï¼Œå®šä¹‰actionï¼Œè½¬å‘ç»™Storeï¼ŒStoreå†äº¤ç»™Reducerå»åšå¤„ç†ï¼Œå¤„ç†å®Œæˆåè¿”å›æ–°æ•°æ®ç»™Storeï¼ŒStoreå†æŠŠæ–°æ•°æ®ç»™åˆ°ç»„ä»¶å»æ¸²æŸ“ã€‚\n// src/store/reducer.js// src/store/reducer.js// reduceræ˜¯ä¸€ä¸ªçº¯å‡½æ•°const defaultState = &#123;  inputValue: &quot;hello world&quot;,  list: [],&#125;;const reducer = (state = defaultState, action) =&gt; &#123;  if (action.type === &quot;change_input_value&quot;) &#123;    const newState = JSON.parse(JSON.stringify(state));    newState.inputValue = action.value;    return newState;  &#125;  return state;&#125;;export default reducer;\n\n\n\nå°ç»“\nç°åœ¨æ¥è§¦äº†React-Reduxä¸­ä¸¤ä¸ªæ ¸å¿ƒçš„ä¸œè¥¿ã€‚ä¸€ä¸ªæ˜¯Providerç»„ä»¶ï¼Œå¦ä¸€ä¸ªæ˜¯connectæ–¹æ³•ã€‚\nProviderå¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠstoreæä¾›ç»™æ¯ä¸€ä¸ªå†…éƒ¨çš„ç»„ä»¶ã€‚\nä½†æ˜¯å…‰æä¾›storeå¹¶ä¸èƒ½èµ·ä»€ä¹ˆä½œç”¨ï¼Œè¿˜è¦é€šè¿‡connectæ–¹æ³•å°†ç»„ä»¶å’ŒStoreè¿›è¡Œè¿æ¥ã€‚\nconnectæ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œæœ€åä¸€ä¸ªå‚æ•°æ˜¯æŸä¸ªç»„ä»¶ï¼Œä»£è¡¨è¿™ä¸ªç»„ä»¶è¦å’ŒStoreè¿›è¡Œè¿æ¥ã€‚å‰ä¸¤ä¸ªå‚æ•°æŒ‡çš„æ˜¯è¿æ¥çš„è§„åˆ™ã€‚è¿™ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æ˜¯mapStateToPropså’ŒmapDispatchToPropsã€‚\nmapStateToPropsä¸­å®šä¹‰çš„æ˜¯Storeä¸­æ•°æ®å’Œç»„ä»¶Propsä¸­çš„æ•°æ®çš„å…³ç³»ã€‚\nmapDispatchToPropsä¸­å°†store.dispatch()æ˜ å°„åˆ°äº†propsä¸Šï¼Œèƒ½å¤Ÿå…è®¸ç»„ä»¶é€šè¿‡propså¯¹Storeä¸­çš„æ•°æ®è¿›è¡Œä¿®æ”¹ã€‚\n\n","tags":["å‰ç«¯","React","Redux"]},{"title":"å›´ç»•Reactè¡ç”Ÿå‡ºçš„æ€è€ƒ","url":"/2021/03/31/2.%E5%9B%B4%E7%BB%95React%E8%A1%8D%E7%94%9F%E5%87%BA%E7%9A%84%E6%80%9D%E8%80%83/","content":"å›´ç»•Reactè¡ç”Ÿå‡ºçš„æ€è€ƒå£°æ˜å¼å¼€å‘ç›´æ¥æ“ä½œDOMçš„ç¼–ç¨‹æ–¹å¼ç§°ä¸ºå‘½ä»¤å¼å¼€å‘ï¼Œè¿™ç§å¼€å‘æ–¹å¼æœ‰60%-70%çš„æ“ä½œéƒ½æ˜¯åœ¨å¯¹DOMè¿›è¡Œæ“ä½œã€‚\nReactæ˜¯å£°æ˜å¼å¼€å‘ã€‚Reactæ˜¯é¢å‘æ•°æ®ç¼–ç¨‹çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ•°æ®æ„å»ºå¥½ï¼ŒReactä¼šè‡ªåŠ¨æ ¹æ®æ•°æ®æ¥æ„å»ºç½‘ç«™ã€‚è¿™ç§å£°æ˜å¼çš„å¼€å‘å¯ä»¥å¸®åŠ©æˆ‘ä»¬èŠ‚çœæ‰å¤§é‡DOMæ“ä½œçš„ä»£ç ã€‚\nå¯ä»¥ä¸å…¶ä»–æ¡†æ¶å¹¶å­˜Reactç¼–ç¨‹è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥åŒæ—¶ä½¿ç”¨å…¶ä»–æ¡†æ¶ï¼ˆæ¯”å¦‚Vueã€jQueryç­‰ï¼‰ï¼Œå³å¯ä»¥ä¸å…¶ä»–æ¡†æ¶å¹¶å­˜ã€‚\nç»„ä»¶åŒ–å¼€å‘é€šè¿‡Reactç»§æ‰¿Componentæ¥å®ç°ä¸€ä¸ªç»„ä»¶ã€‚æ‰€æœ‰ç»„ä»¶é¦–å­—æ¯å‡å¤§å†™ã€‚\nç»„ä»¶åœ¨æ•´ä¸ªåº”ç”¨ä¹‹ä¸­æ˜¯ä¸€ä¸ªæ ‘çŠ¶çš„ç»“æ„ã€‚\nç»„ä»¶ä¹‹é—´çš„ä¼ å€¼ï¼Œæ˜¯ç”±çˆ¶ç»„ä»¶é€šè¿‡å±æ€§å‘å­ç»„ä»¶ä¼ å€¼ã€‚\nå­ç»„ä»¶æƒ³æ“ä½œçˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œéœ€è¦é€šè¿‡çˆ¶ç»„ä»¶å‘å­ç»„ä»¶ä¼ é€’ä¸€ä¸ªæ–¹æ³•ï¼Œå­ç»„ä»¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œé—´æ¥åœ°æ“ä½œçˆ¶ç»„ä»¶çš„æ•°æ®ï¼Œä»è€Œå®ç°å­ç»„ä»¶å’Œçˆ¶ç»„ä»¶çš„é€šä¿¡ã€‚\nå•å‘æ•°æ®æµçˆ¶ç»„ä»¶å¯ä»¥å‘å­ç»„ä»¶ä¼ é€’å†…å®¹ï¼Œä½†æ˜¯å­ç»„ä»¶åªèƒ½ä½¿ç”¨çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å€¼ï¼Œç»ä¸èƒ½æ”¹å˜è¿™ä¸ªå€¼ã€‚\nå¦‚æœå…è®¸å­ç»„ä»¶æ”¹å˜çˆ¶ç»„ä»¶çš„å€¼ï¼Œå‡è®¾é¡µé¢ä¸­æœ‰äº”ä¸ªå­ç»„ä»¶ä½¿ç”¨äº†çˆ¶ç»„ä»¶ä¸­çš„åŒä¸€ä¸ªå€¼ï¼Œä¸€æ—¦é¡µé¢å‡ºç°bugï¼Œé”™è¯¯å¾ˆéš¾è¢«å®šä½ï¼Œéœ€è¦åœ¨äº”ä¸ªå­ç»„ä»¶ä¸­é€ä¸ªæ’æŸ¥ã€‚\nè§†å›¾å±‚æ¡†æ¶Reactæ˜¯ä¸€ä¸ªè§†å›¾å±‚çš„æ¡†æ¶ã€‚\nåœ¨å°å‹é¡¹ç›®ä¸­ï¼Œå€ŸåŠ©Reactå†…éƒ¨çš„ä¼ å€¼æœºåˆ¶å°±å¯ä»¥å®Œæˆå¼€å‘ï¼Œä½†æ˜¯å¤§å‹é¡¹ç›®ä¸­å•å•ä½¿ç”¨Reactæ˜¯ç»å¯¹ä¸å¤Ÿçš„ã€‚ç»„ä»¶åœ¨æ•´ä¸ªé¡¹ç›®ä¹‹ä¸­æ˜¯ä¸€ä¸ªæ ‘çŠ¶çš„ç»“æ„ï¼Œå¦‚æœä¸€é¢—æ ‘ä¸­çš„å¶ç»“ç‚¹æƒ³å’Œæ ¹ç»“ç‚¹è¿›è¡Œé€šä¿¡ï¼Œéœ€è¦å±‚å±‚å‘ä¸‹ä¼ å€¼ï¼Œè¿™æ— ç–‘æ˜¯å¾ˆéº»çƒ¦çš„ã€‚\nåœ¨å¤§å‹é¡¹ç›®ä¸­ï¼Œéœ€è¦ä¸€äº›æ•°æ®å±‚çš„æ¡†æ¶å¸®åŠ©æˆ‘ä»¬è§£å†³å±‚å±‚ç»„ä»¶çš„ä¼ å€¼é—®é¢˜ã€‚Reactåªè´Ÿè´£æ•°æ®å’Œé¡µé¢çš„æ¸²æŸ“çš„ä¸€äº›ä¸œè¥¿ï¼Œè‡³äºç»„ä»¶ä¹‹é—´çš„ä¼ å€¼ï¼Œäº¤ç»™å…¶ä»–æ¡†æ¶æ¥åšã€‚æ¯”å¦‚Reduxã€‚\nå‡½æ•°å¼ç¼–ç¨‹å½“æˆ‘ä»¬ç¼–å†™Reactä»£ç çš„æ—¶å€™ï¼Œå…¶å®ç¼–å†™çš„éƒ½æ˜¯ä¸€ä¸ªä¸ªçš„å‡½æ•°ã€‚\nè¿™æ ·çš„æ–¹å¼æœ‰å‡ ä¸ªå¥½å¤„ã€‚\né¦–å…ˆï¼Œç»´æŠ¤èµ·æ¥æ¯”è¾ƒå®¹æ˜“ï¼Œå½“ä¸€ä¸ªå‡½æ•°æ¯”è¾ƒå¤§çš„æ—¶å€™å¯ä»¥è¿›è¡Œæ‹†åˆ†ï¼Œæ¯ä¸ªå‡½æ•°å¯ä»¥å„å¸å…¶èŒã€‚\nå…¶æ¬¡ï¼Œåšå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•çš„æ—¶å€™ï¼Œå¦‚æœé¡¹ç›®ä¸­éƒ½æ˜¯ç”±å‡½æ•°ç»„æˆçš„ï¼Œåšè‡ªåŠ¨åŒ–æµ‹è¯•å°±å¾ˆå®¹æ˜“äº†ï¼Œåªéœ€è¦ç»™å‡½æ•°ä¸€ä¸ªè¾“å…¥å€¼ï¼Œçœ‹å‡½æ•°æ˜¯å¦èƒ½ç»™å‡ºä¸€ä¸ªé¢„æœŸçš„è¾“å‡ºå³å¯ã€‚\n","tags":["å‰ç«¯","React"]},{"title":"Reactä¸­çš„è™šæ‹ŸDOM","url":"/2021/03/31/3.React%E4%B8%AD%E7%9A%84%E8%99%9A%E6%8B%9FDOM/","content":"Reactä¸­çš„è™šæ‹ŸDOMåˆè¯†è™šæ‹ŸDOMé¦–å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ã€‚\nåœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œå®šä¹‰äº†æ•°æ®stateå’Œrenderå‡½æ•°ä¸­çš„JSXæ¨¡æ¿ï¼Œrenderå‡½æ•°å¯ä»¥å°†å®šä¹‰å¥½çš„æ•°æ®æ”¾è¿›å¯¹åº”çš„æ¨¡æ¿ä¹‹ä¸­ï¼Œå¹¶ä¸”æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚stateä¸­çš„æ•°æ®æ”¹å˜ï¼Œé¡µé¢çš„æ˜¾ç¤ºä¹Ÿä¼šéšä¹‹æ”¹å˜ã€‚\nå‡è®¾ç°åœ¨æ²¡æœ‰Reactï¼Œè¦æƒ³å®ç°ä¸Šè¿°çš„åŠŸèƒ½ï¼Œè¯¥æ€ä¹ˆåŠï¼Ÿ\nå…ˆæå‡ºä¸€ç§æ€è·¯ï¼š\n\né¦–å…ˆè¦å®šä¹‰å¥½è¦æ˜¾ç¤ºçš„æ•°æ®stateï¼›\nè®¾å®šä¸€ä¸ªJSXæ¨¡æ¿ï¼Œæ¥å®¹çº³æˆ‘ä»¬è¦æ˜¾ç¤ºæ•°æ®ï¼›\nå°†æ•°æ®stateå’Œæ¨¡æ¿ç›¸ç»“åˆï¼Œç”ŸæˆçœŸå®çš„DOMï¼Œå°†DOMæŒ‚è½½åˆ°é¡µé¢ä¸Šæ¥æ˜¾ç¤ºï¼›\næ­¤æ—¶æ•°æ®stateå‘ç”Ÿæ”¹å˜ï¼›\nå°†æ–°çš„æ•°æ®stateå’Œæ¨¡æ¿ç›¸ç»“åˆï¼Œç”Ÿæˆæ–°çš„DOMï¼Œæ¥æ›¿æ¢åŸå§‹çš„DOMï¼Œå¹¶æŒ‚è½½åˆ°é¡µé¢ä¸Šã€‚\n\nä»¥ä¸Šå°±æ˜¯æœ€ç®€å•çš„å®ç°Reactåº•å±‚é€»è¾‘çš„ä¸€ä¸ªæ€è·¯ã€‚\nä½†æ˜¯è¿™æ ·åšçš„è¯ï¼Œä¼šæœ‰ä¸€ä¸ªè‡´å‘½çš„ç¼ºé™·ã€‚å¦‚æœæ•°æ®stateä¸­åªç¨å¾®æ”¹åŠ¨äº†ä¸€ç‚¹ï¼Œæ¯”å¦‚åªå»æ‰äº†ä¸€ä¸ªpæ ‡ç­¾ï¼Œæˆ–è€…ç”šè‡³åªæ˜¯æ”¹åŠ¨äº†ä¸€ä¸ªå­—ï¼Œå°±è¦é‡æ–°ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„DOMã€‚\nç¬¬ä¸€æ¬¡ç”Ÿæˆäº†ä¸€ä¸ªå®Œæ•´çš„DOMç‰‡æ®µï¼Œç¬¬äºŒæ¬¡ä¸ç®¡æ•°æ®æ”¹åŠ¨å¹…åº¦æœ‰å¤šå¤§ï¼Œéƒ½è¦å†ç”Ÿæˆä¸€ä¸ªå®Œæ•´çš„DOMç‰‡æ®µå¹¶ä¸”è¿›è¡Œæ›¿æ¢ï¼Œæ— è®ºæ˜¯ç”Ÿæˆå®Œæ•´çš„DOMè¿˜æ˜¯å¯¹æ•´ä¸ªDOMè¿›è¡Œæ›¿æ¢ï¼Œè¿™ä¸¤ç§æ“ä½œéƒ½ååˆ†æŸè€—æ€§èƒ½ã€‚\né‚£å°è¯•æ”¹è‰¯ä¸€ä¸‹ï¼Œä¸æ›¿æ¢æ•´ä¸ªDOMï¼Œè€Œæ˜¯å“ªé‡Œä¿®æ”¹æ›¿æ¢å“ªé‡Œã€‚\nç¬¬äºŒç§æ€è·¯ï¼Œå‰ä¸‰æ­¥å’Œä¹‹å‰ç›¸åŒï¼ŒåŒºåˆ«åœ¨äºæ•°æ®ä¿®æ”¹åå¦‚ä½•ä¿®æ”¹DOMï¼š\n\né¦–å…ˆè¦å®šä¹‰å¥½è¦æ˜¾ç¤ºçš„æ•°æ®stateï¼›\nè®¾å®šä¸€ä¸ªJSXæ¨¡æ¿ï¼Œæ¥å®¹çº³æˆ‘ä»¬è¦æ˜¾ç¤ºæ•°æ®ï¼›\nå°†æ•°æ®stateå’Œæ¨¡æ¿ç›¸ç»“åˆï¼Œç”ŸæˆçœŸå®çš„DOMï¼Œå°†DOMæŒ‚è½½åˆ°é¡µé¢ä¸Šæ¥æ˜¾ç¤ºï¼›\næ­¤æ—¶æ•°æ®stateå‘ç”Ÿæ”¹å˜ï¼›\nå°†æ–°çš„æ•°æ®stateå’Œæ¨¡æ¿ç›¸ç»“åˆï¼Œç”Ÿæˆæ–°çš„DOMï¼Œæ­¤æ—¶å¹¶ä¸ç›´æ¥æ›¿æ¢åŸæœ‰çš„DOMï¼›\nå°†æ–°çš„DOMä¸åŸå§‹çš„DOMè¿›è¡Œæ¯”å¯¹ï¼Œå¯»æ‰¾å·®å¼‚ï¼›\nç”¨æ–°çš„DOMä¸­ä¸åŸå§‹DOMä¸­ä¸åŒçš„å…ƒç´ æ›¿æ¢æ‰åŸæ¥çš„å…ƒç´ ï¼Œå…¶ä½™å…ƒç´ ä¿æŒä¸å˜ã€‚\n\nä¹ä¸€çœ‹å¥½åƒæ¯”ç¬¬ä¸€ç§æ€è·¯å¤šäº†å¾ˆå¤šæ­¥éª¤ï¼Œä½†æ˜¯ç¡®å®ä¼šä½¿æ€§èƒ½æå‡ä¸€äº›ã€‚å› ä¸ºæ›¿æ¢å±€éƒ¨çš„DOMå¿…å®šä¼šæ¯”æ›¿æ¢æ•´ä¸ªDOMçš„æ€§èƒ½é«˜ã€‚\nè™½ç„¶DOMæ›¿æ¢çš„æ€§èƒ½èŠ‚çº¦äº†ä¸€äº›ï¼Œä½†æ˜¯æ–°çš„DOMå’ŒåŸå§‹DOMè¿›è¡Œæ¯”å¯¹åˆä¼šæŸè€—æ€§èƒ½ã€‚\nè¿™æ ·æˆ‘ä»¬èŠ‚çº¦äº†ä¸€ç‚¹æ€§èƒ½ï¼Œä½†æ˜¯åˆæ¶ˆè€—äº†ä¸€ç‚¹æ€§èƒ½ï¼Œè¿™å°±å¯¼è‡´åœ¨æ€§èƒ½çš„æå‡ä¸Šå¹¶ä¸æ˜æ˜¾ã€‚\näºæ˜¯ï¼ŒReactæå‡ºäº†ä¸€ç§æ–¹æ¡ˆâ€”â€”è™šæ‹ŸDOMã€‚\nè™šæ‹ŸDOMçš„æ€è·¯å¦‚ä¸‹ï¼š\n\né¦–å…ˆè¦å®šä¹‰å¥½è¦æ˜¾ç¤ºçš„æ•°æ®stateï¼›\n\nè®¾å®šä¸€ä¸ªJSXæ¨¡æ¿ï¼Œæ¥å®¹çº³æˆ‘ä»¬è¦æ˜¾ç¤ºæ•°æ®ï¼›\n\nå°†æ•°æ®å’Œstateå’Œæ¨¡æ¿ç›¸ç»“åˆï¼Œç”Ÿæˆè™šæ‹ŸDOMï¼ˆè™šæ‹ŸDOMå°±æ˜¯ä¸€ä¸ªJSå¯¹è±¡ï¼Œç”¨å®ƒæ¥æè¿°çœŸå®DOMï¼‰ï¼›\nå‡è®¾æ­¤æ—¶çš„è™šæ‹ŸDOMä¸ºï¼š\n[&#x27;div&#x27;, &#123;id: &#x27;abc&#x27;&#125;, [&#x27;span&#x27;, &#123;&#125;, &#x27;hello world&#x27;]]\næ ¹æ®è™šæ‹ŸDOMçš„ç»“æ„ç”ŸæˆçœŸå®çš„DOMï¼Œå°†DOMæŒ‚è½½åˆ°é¡µé¢ä¸Šæ¥æ˜¾ç¤ºï¼›\næ­¤æ—¶å¯¹åº”çš„çœŸå®DOMåˆ™ä¸ºï¼š\n&lt;div id=&quot;abc&quot;&gt;    &lt;span&gt;hello world&lt;/span&gt;&lt;/div&gt;\næ­¤æ—¶æ•°æ®stateå‘ç”Ÿå˜åŒ–ï¼›\n\næ•°æ®stateå’Œæ¨¡æ¿ç›¸ç»“åˆï¼Œç”Ÿæˆæ–°çš„è™šæ‹ŸDOMï¼›\n[&#x27;div&#x27;, &#123;id: &#x27;abc&#x27;&#125;, [&#x27;span&#x27;, &#123;&#125;, &#x27;Byebye&#x27;]]\næ¯”è¾ƒåŸå§‹è™šæ‹ŸDOMå’Œæ–°çš„è™šæ‹ŸDOMçš„åŒºåˆ«ï¼Œæ‰¾åˆ°åŒºåˆ«çš„åœ°æ–¹ï¼ˆå¯¹åº”ä¾‹å­ä¸­spanæ ‡ç­¾é‡Œçš„å†…å®¹ï¼‰ï¼›\n\nç›´æ¥æ“ä½œDOMï¼Œæ”¹å˜ç›¸åº”çš„å†…å®¹ï¼ˆSpanæ ‡ç­¾ä¸­çš„å†…å®¹ï¼‰ã€‚\n\n\nç”Ÿæˆè™šæ‹ŸDOMæ˜¯ä¼šè€—è´¹ä¸€ç‚¹æ€§èƒ½ï¼Œä½†æ˜¯è™šæ‹ŸDOMæ˜¯ä¸€ä¸ªJSå¯¹è±¡ï¼Œç”¨JSç”Ÿæˆä¸€ä¸ªJSå¯¹è±¡çš„ä»£ä»·æä½ï¼Œåä¹‹ï¼Œç”¨JSç”Ÿæˆä¸€ä¸ªDOMå¯¹è±¡ä»£ä»·æ˜¯å¾ˆé«˜çš„ã€‚\næ‰€ä»¥ï¼Œä¿®æ”¹æ•°æ®åç”Ÿæˆè™šæ‹ŸDOMè€Œä¸æ˜¯çœŸå®DOMï¼Œæå¤§åœ°æå‡äº†æ€§èƒ½ï¼›\nåç»­ä½¿ç”¨æ–°çš„è™šæ‹Ÿçš„DOMå’ŒåŸå§‹è™šæ‹Ÿè¿›è¡Œå¯¹æ¯”ï¼Œæœ¬è´¨ä¸Šæ¯”è¾ƒçš„æ˜¯ä¸¤ä¸ªJSå¯¹è±¡ï¼Œä¸¤ä¸ªJSå¯¹è±¡è¿›è¡Œæ¯”å¯¹ï¼Œå¯¹æ€§èƒ½çš„æ¶ˆè€—ä¹Ÿæ˜¯æå°çš„ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥ä¹Ÿæå¤§åœ°æå‡äº†æ€§èƒ½ï¼›\næ‰¾åˆ°å·®å¼‚ä¹‹åç›´æ¥æ“ä½œå¯¹åº”çš„DOMè¿›è¡Œæ“ä½œï¼Œè¿™æ ·ä¸€æ•´å¥—æµç¨‹ä¸‹æ¥ï¼Œåœ¨æ€§èƒ½æå‡æ–¹é¢æœ‰äº†è´¨çš„é£è·ƒã€‚\nå°ç»“ï¼š\nè™šæ‹ŸDOMæœ¬è´¨ä¸Šå°±æ˜¯JSå¯¹è±¡ï¼Œä½¿ç”¨JSå¯¹è±¡çš„æ“ä½œæ¥ä»£æ›¿çœŸå®çš„DOMçš„æ“ä½œï¼Œæå¤§åœ°æå‡äº†æ€§èƒ½ã€‚\næ·±å…¥äº†è§£è™šæ‹ŸDOMæœ‰äº†ä¸Šè¿°çš„ç†è§£ä¹‹åï¼Œå›è¿‡å¤´æ¥çœ‹ä»£ç ã€‚\nä¹‹å‰çš„renderå‡½æ•°ä¸­ä¼šreturnä¸€ä¸ªJSXæ¨¡æ¿ï¼Œé‡Œé¢çš„æ ‡ç­¾é•¿å¾—å¾ˆåƒhtmlæ ‡ç­¾ï¼š\nrender() &#123;  return (    &lt;div&gt;&#123;this.state.inputValue&#125;&lt;/div&gt;  );&#125;\n\nä¹‹å‰æˆ‘ä»¬å¯èƒ½ä¼šè®¤ä¸ºreturnè¯­å¥ä¸­çš„divæ ‡ç­¾å°±æ˜¯ä¸€ä¸ªDOMç»“ç‚¹ï¼Œä½†å®é™…ä¸Šè¿™æ˜¯ä¸€ä¸ªJSXæ¨¡æ¿ã€‚Reactä¼šæŠŠæ¨¡æ¿å’Œæ•°æ®ç›¸ç»“åˆï¼Œç»“åˆå®Œæˆåï¼Œç”Ÿæˆçš„æ˜¯ä¸€ä¸ªè™šæ‹ŸDOMï¼Œæœ‰äº†è™šæ‹ŸDOMä¹‹åæ‰ä¼šå†ç”ŸæˆçœŸå®DOMã€‚\né‚£ä¹ˆJSXæ¨¡æ¿å’ŒçœŸå®DOMä¹‹é—´çš„å…³ç³»å°±æ˜¯ï¼šé¦–å…ˆï¼ŒJSXæ¨¡æ¿å…ˆä¼šå˜æˆè™šæ‹ŸDOMï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ªJSå¯¹è±¡ï¼‰ï¼Œç„¶åå†è¢«è½¬æ¢æˆçœŸå®çš„DOMã€‚\nReactä¸­å°†JSXè¯­æ³•è½¬åŒ–ä¸ºè™šæ‹ŸDOMï¼Œä½¿ç”¨äº†React.createElement()æ–¹æ³•ã€‚\nä¸¾ä¾‹ã€‚ä»¥ä¸‹ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ã€‚\nrender()&#123;  return &lt;div&gt;content&lt;/div&gt;;&#125;\n\nrender()&#123;  return React.createElement(&#x27;div&#x27;, &#123;&#125;, &#x27;content&#x27;);&#125;\n\nReact.createElement()æ–¹æ³•æ˜¯Reactä¸­æ›´åå‘åº•å±‚çš„ä¸€ä¸ªæ¥å£ã€‚åœ¨æ­¤ä¸åšè¯¦ç»†è¯´æ˜ã€‚\nè™šæ‹ŸDOMçš„ä¼˜ç‚¹\næ€§èƒ½æå‡äº†ã€‚DOMçš„æ¯”å¯¹å˜æˆäº†JSå¯¹è±¡çš„æ¯”å¯¹ã€‚\nå®ƒä½¿å¾—è·¨ç«¯åº”ç”¨å¾—ä»¥å®ç°ã€‚ï¼ˆReact Nativeï¼‰\n\n","tags":["å‰ç«¯","React"]},{"title":"Reactè™šæ‹ŸDOMä¸­çš„diffç®—æ³•","url":"/2021/04/01/4.React%E8%99%9A%E6%8B%9FDOM%E4%B8%AD%E7%9A%84diff%E7%AE%97%E6%B3%95/","content":"è™šæ‹ŸDOMä¸­çš„diffç®—æ³•ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æåˆ°äº†è™šæ‹ŸDOMçš„å®ç°æ€æƒ³ï¼Œå¯ä»¥åˆ†ä¸ºä»¥ä¸‹7æ­¥ï¼š\n\né¦–å…ˆè¦å®šä¹‰å¥½è¦æ˜¾ç¤ºçš„æ•°æ®stateï¼›\nè®¾å®šä¸€ä¸ªJSXæ¨¡æ¿ï¼Œæ¥å®¹çº³æˆ‘ä»¬è¦æ˜¾ç¤ºæ•°æ®ï¼›\nå°†æ•°æ®å’Œstateå’Œæ¨¡æ¿ç›¸ç»“åˆï¼Œç”Ÿæˆè™šæ‹ŸDOMï¼ˆè™šæ‹ŸDOMå°±æ˜¯ä¸€ä¸ªJSå¯¹è±¡ï¼Œç”¨å®ƒæ¥æè¿°çœŸå®DOMï¼‰ï¼›\næ ¹æ®è™šæ‹ŸDOMçš„ç»“æ„ç”ŸæˆçœŸå®çš„DOMï¼Œå°†DOMæŒ‚è½½åˆ°é¡µé¢ä¸Šæ¥æ˜¾ç¤ºï¼›\næ­¤æ—¶æ•°æ®stateå‘ç”Ÿå˜åŒ–ï¼›\næ•°æ®stateå’Œæ¨¡æ¿ç›¸ç»“åˆï¼Œç”Ÿæˆæ–°çš„è™šæ‹ŸDOMï¼›\næ¯”è¾ƒåŸå§‹è™šæ‹ŸDOMå’Œæ–°çš„è™šæ‹ŸDOMçš„åŒºåˆ«ï¼Œæ‰¾åˆ°æœ‰åŒºåˆ«çš„åœ°æ–¹ï¼›\nç›´æ¥æ“ä½œDOMï¼Œä¿®æ”¹æ•°æ®å˜åŠ¨çš„éƒ¨åˆ†ã€‚\n\nç°åœ¨é‡ç‚¹å…³æ³¨ä¸€ä¸‹ç¬¬7æ­¥ã€‚\nä¹‹å‰æåˆ°ï¼Œè™šæ‹ŸDOMæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªJSå¯¹è±¡ã€‚ç°åœ¨è¦åšçš„äº‹æƒ…æ˜¯ä¸¤ä¸ªè™šæ‹ŸDOMçš„æ¯”å¯¹ï¼Œä¹Ÿå°±æ˜¯ä¸¤ä¸ªJSå¯¹è±¡çš„æ¯”å¯¹ï¼Œè¿™æ—¶éœ€è¦æ€è€ƒä¸€ä¸‹ï¼Œä¸¤ä¸ªJSå¯¹è±¡åº”è¯¥å¦‚ä½•è¿›è¡Œæ¯”å¯¹æ¥å¯»æ‰¾äºŒè€…ä¹‹é—´çš„å·®å¼‚ï¼Ÿ\nåœ¨Reactä¸­ï¼Œä¸¤ä¸ªè™šæ‹ŸDOMè¿›è¡Œæ¯”å¯¹é‡‡ç”¨çš„æ–¹å¼ï¼Œå°±æ˜¯diffç®—æ³•ã€‚\ndiffç®—æ³•æ ¹æ®ä¸Šè¿°è™šæ‹ŸDOMçš„å®ç°æ€æƒ³å¯ä»¥çŸ¥é“ï¼Œå½“æ•°æ®å‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œè™šæ‹ŸDOMæ‰ä¼šå»åšæ–°çš„æ¯”å¯¹ã€‚é‚£ä¹ˆä»€ä¹ˆæ—¶å€™æ‰ç®—æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Ÿ\nå½“stateæˆ–è€…propsæ”¹å˜æ—¶ï¼Œæ•°æ®å°±å‘ç”Ÿäº†æ”¹å˜ã€‚propsçš„æ”¹å˜ä¹Ÿæ˜¯å› ä¸ºçˆ¶ç»„ä»¶çš„stateå‘ç”Ÿäº†æ”¹å˜ï¼Œå½’æ ¹ç»“åº•ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–éƒ½æ˜¯å› ä¸ºè°ƒç”¨äº†setState()æ–¹æ³•ã€‚\nä¹‹å‰çš„æ–‡ç« ä¸­æåˆ°è¿‡ï¼ŒsetState()æ˜¯å¼‚æ­¥æ‰§è¡Œçš„ã€‚ä¹‹æ‰€ä»¥å¼‚æ­¥ï¼Œæ˜¯ä¸ºäº†æå‡Reactåº•å±‚çš„æ€§èƒ½ã€‚\nå‡è®¾æˆ‘ä»¬åœ¨å¾ˆçŸ­çš„æ—¶é—´å†…è¿ç»­è°ƒç”¨ä¸‰æ¬¡setState()ï¼Œå³è¿ç»­ä¿®æ”¹ä¸‰æ¬¡æ•°æ®ï¼ŒReactå¹¶ä¸ä¼šè¿›è¡Œä¸‰æ¬¡è™šæ‹ŸDOMçš„æ¯”å¯¹ï¼Œè€Œæ˜¯å°†ä¸‰æ¬¡setState()åˆå¹¶ä¸ºä¸€ä¸ªsetState()ï¼Œåªåšä¸€æ¬¡è™šæ‹ŸDOMçš„æ¯”å¯¹ï¼Œç„¶åå»æ›´æ–°ä¸€æ¬¡DOMã€‚è¿™æ ·çš„è¯ï¼Œå°±å¯ä»¥çœå»ä¸¤æ¬¡è™šæ‹ŸDOMçš„æ¯”å¯¹å¸¦æ¥çš„æ€§èƒ½æŸè€—ã€‚è¿™å°±æ˜¯setState()è®¾ä¸ºå¼‚æ­¥çš„åˆè¡·ã€‚\n\ndiffç®—æ³•å¯ä»¥ç®€å•ç†è§£ä¸ºï¼Œåœ¨å¯¹ä¸¤ä¸ªè™šæ‹ŸDOMè¿›è¡Œæ¯”è¾ƒæ—¶æ‰¾ä¸åŒçš„ç®—æ³•ã€‚\ndiffç®—æ³•ä¸­æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼šåŒçº§æ¯”è¾ƒã€‚\n\nè¿™å¼ å›¾ä¸­å·¦è¾¹çš„æ ‘ä»£è¡¨åŸå§‹çš„è™šæ‹ŸDOMï¼Œå³ä¾§çš„æ ‘ä»£è¡¨æ–°ç”Ÿæˆçš„è™šæ‹ŸDOMã€‚æˆ‘ä»¬ç°åœ¨è¦ç”¨diffç®—æ³•æ¥æ¯”å¯¹è¿™ä¸¤æ£µæ ‘ï¼Œæ‰¾åˆ°å·®å¼‚ä¹‹åå»æ›´æ–°çœŸå®çš„DOMã€‚\ndiffç®—æ³•ä¼šæ€ä¹ˆè¿›è¡Œæ¯”å¯¹å‘¢ï¼ŸåŒå±‚æ¯”å¯¹ã€‚\né¦–å…ˆï¼Œä¼šæ¯”è¾ƒæœ€é¡¶å±‚çš„è™šæ‹ŸDOMç»“ç‚¹ï¼ˆå›¾ä¸­çº¢æ¡†éƒ¨åˆ†ï¼‰ï¼Œçœ‹è¿™ä¸¤ä¸ªç»“ç‚¹æ˜¯å¦ä¸€è‡´ã€‚å‡è®¾è¿™ä¸€å±‚çš„ä¸¤ä¸ªç»“ç‚¹ä¸€è‡´ï¼Œå†å»æ¯”è¾ƒä¸‹ä¸€å±‚ï¼Œä¹Ÿå°±æ˜¯ç¬¬äºŒå±‚ï¼ˆå›¾ä¸­ç´«æ¡†éƒ¨åˆ†ï¼‰ã€‚\nå¦‚æœé¡¶å±‚çš„ä¸¤ä¸ªç»“ç‚¹ä¸ä¸€è‡´ï¼Œé‚£ä¹ˆReactå°±ä¸ä¼šç»§ç»­å¾€ä¸‹å±‚æ¯”è¾ƒäº†ã€‚Reactåœ¨å‘ç°ç¬¬ä¸€å±‚DOMå­˜åœ¨å·®å¼‚ä¹‹åï¼Œä¼šæŠŠåŸå§‹é¡µé¢ä¸Šçš„è™šæ‹ŸDOMå¯¹åº”çš„æ‰€æœ‰ç»“ç‚¹çš„DOMå…¨éƒ¨åˆ é™¤ï¼Œé‡æ–°ç”Ÿæˆæ‰€æœ‰DOMï¼Œç„¶åç”¨é‡æ–°ç”Ÿæˆçš„DOMæ›¿æ¢åŸå§‹é¡µé¢ä¸Šçš„DOMã€‚\nè¿™æ ·ä¸€æ¥ï¼Œå¦‚æœåœ¨ç¬¬ä¸€å±‚å°±å‘ç°äº†å·®å¼‚ï¼Œé‚£ä¹ˆå°±ä¼šé‡æ–°æ¸²æŸ“æ•´ä¸ªDOMï¼Œè¿™çœ‹èµ·æ¥æ€§èƒ½æ¯”è¾ƒä½ã€‚\näº‹å®ä¸Šä¹Ÿç¡®å®å¦‚æ­¤ï¼Œä½†æ˜¯è¿™æ ·è¿›è¡ŒåŒå±‚æ¯”å¯¹ï¼Œå¸¦æ¥çš„å¥½å¤„å°±æ˜¯ï¼Œæ¯”å¯¹çš„ç®—æ³•éå¸¸ç®€å•ï¼Œåªéœ€è¦ä¸€å±‚ä¸€å±‚åšå¯¹æ¯”å³å¯ã€‚ç®—æ³•ç®€å•å°±ä¼šä½¿å¾—æ¯”å¯¹çš„é€Ÿåº¦å¾ˆå¿«ï¼Œæ‰€ä»¥ï¼Œè™½ç„¶å¯èƒ½ä¼šé€ æˆDOMä¸Šé‡æ–°æ¸²æŸ“çš„æ€§èƒ½æµªè´¹ï¼Œä½†æ˜¯ä¼šå¤§å¤§å‡å°‘ä¸¤ä¸ªè™šæ‹ŸDOMè¿›è¡Œæ¯”å¯¹çš„ç®—æ³•çš„æ€§èƒ½æ¶ˆè€—ã€‚\nkeyå€¼çš„å¼•å…¥\nå‡è®¾ç°åœ¨æœ‰ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„ä¸­åŒ…å«äº”ä¸ªæ•°æ®ã€‚åœ¨é¡µé¢ç¬¬ä¸€æ¬¡æ¸²æŸ“çš„æ—¶å€™ï¼Œä¼šæŠŠè¿™äº”ä¸ªæ•°æ®æ˜ å°„æˆäº”ä¸ªè™šæ‹ŸDOMç»“ç‚¹ï¼Œç”Ÿæˆä¸€ä¸ªå°çš„è™šæ‹ŸDOMæ ‘ã€‚\nç°åœ¨ï¼Œå¾€æ•°ç»„é‡Œå¢åŠ äº†ä¸€é¡¹å†…å®¹ï¼ˆå·¦å›¾è“è‰²ç»“ç‚¹ï¼‰ï¼Œäºæ˜¯ï¼Œæ•°æ®å‘ç”Ÿäº†å˜åŒ–ï¼Œç”Ÿæˆä¸€ä¸ªæ–°çš„è™šæ‹ŸDOMæ ‘ï¼Œç„¶åå°†ä¸¤ä¸ªè™šæ‹ŸDOMè¿›è¡Œæ¯”å¯¹ï¼ˆåˆ†åˆ«å¯¹åº”å·¦å›¾ä¸­ä¸Šä¸‹ä¸¤æ’ç»“ç‚¹ï¼‰ï¼Œå¦‚æœæ¯ä¸€ä¸ªè™šæ‹ŸDOMç»“ç‚¹æ²¡æœ‰ä¸€ä¸ªkeyå€¼çš„è¯ï¼Œæ¯ä¸ªç»“ç‚¹éƒ½æ²¡æœ‰è‡ªå·±çš„åå­—ã€‚å½“æˆ‘ä»¬è¿›è¡Œæ¯”å¯¹çš„æ—¶å€™ï¼Œç»“ç‚¹å’Œç»“ç‚¹ä¹‹é—´çš„å…³ç³»å°±å¾ˆéš¾è¢«ç¡®ç«‹ã€‚\nå‡å¦‚åœ¨è¿›è¡Œè™šæ‹ŸDOMçš„æ¯”å¯¹æ—¶ï¼Œå¯ä»¥ç»™æ¯ä¸€ä¸ªè™šæ‹ŸDOMç»“ç‚¹èµ·ä¸€ä¸ªåå­—ï¼Œé‚£ä¹ˆæ¯”è¾ƒèµ·æ¥å°±æ–¹ä¾¿å¤šäº†ï¼ˆå¦‚å³å›¾ï¼‰ã€‚è™šæ‹ŸDOMçš„æ¯”å¯¹å¯ä»¥æ ¹æ®keyå€¼åšå…³è”ï¼Œå¦‚æœåŸå…ˆDOMç»“ç‚¹å’Œæ–°çš„DOMç»“ç‚¹çš„keyå€¼ä¸€è‡´ï¼Œé‚£ä¹ˆè¿™ä¸ªç»“ç‚¹å°±å¯ä»¥å¤ç”¨ã€‚é‚£ä¹ˆï¼Œåªè¦æŠŠæ–°çš„è™šæ‹ŸDOMæ ‘ä¸­å’ŒåŸæ¥è™šæ‹ŸDOMæ ‘ä¸­keyå€¼ä¸ç›¸åŒçš„ç»“ç‚¹è¿›è¡Œç›¸åº”çš„ä¿®æ”¹å°±å¯ä»¥äº†ã€‚è¿™æ ·çš„è¯ï¼Œå°±æå¤§åœ°æé«˜äº†è™šæ‹ŸDOMæ¯”å¯¹çš„æ€§èƒ½ã€‚\nè¿™æ ·åšçš„è¯ï¼Œéœ€è¦ä¸€ä¸ªå‰æã€‚åŸæœ¬çš„è™šæ‹ŸDOMæ ‘ä¸­çš„ç»“ç‚¹ï¼Œåœ¨æ–°çš„è™šæ‹ŸDOMæ ‘ä¸­çš„keyå€¼ä¸èƒ½æ”¹å˜ã€‚æ‰€ä»¥éœ€è¦ä½¿ç”¨ä¸€ä¸ªç¨³å®šçš„å€¼ä½œä¸ºkeyå€¼ã€‚ä¸ç¨³å®šçš„å€¼ï¼Œæ¯”å¦‚æ•°ç»„ä¸­çš„indexï¼Œå¦‚æœæ•°ç»„ä¸­çš„æŸä¸€æ•°æ®è¢«åˆ é™¤ï¼Œæ•°æ®å¯¹åº”çš„ç´¢å¼•å€¼ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ï¼Œindexå°±æ˜¯ä¸ç¨³å®šçš„å€¼ã€‚\nå°ç»“ï¼š\nReactä¸­çš„setState()çš„æ€§èƒ½ä¼˜åŒ–ï¼šå¯ä»¥å°†å¤šæ¬¡setState()åˆå¹¶ä¸ºä¸€æ¬¡setState()ï¼Œç„¶åè¿›è¡Œè™šæ‹ŸDOMçš„æ¯”å¯¹ã€‚\ndiffç®—æ³•åœ¨æ¯”å¯¹ä¸¤ä¸ªè™šæ‹ŸDOMæ—¶é‡‡ç”¨é€å±‚æ¯”å¯¹çš„ç­–ç•¥ï¼Œä¸€æ—¦æœ‰å·®å¼‚ï¼Œä¸‹é¢çš„å±‚ä¾¿ä¸ä¼šå†è¿›è¡Œæ¯”å¯¹ï¼Œç›´æ¥åºŸå¼ƒæ‰ï¼Œç”¨æ–°çš„è™šæ‹ŸDOMæ›¿æ¢æ‰åŸå…ˆçš„è™šæ‹ŸDOMå³å¯ã€‚\nReactåœ¨è¿›è¡Œåˆ—è¡¨å¾ªç¯æ—¶å¼•å…¥keyå€¼ï¼Œæ˜¯ä¸ºäº†æé«˜è™šæ‹ŸDOMæ¯”å¯¹æ—¶çš„æ€§èƒ½ã€‚keyå€¼è¦ä¿æŒç¨³å®šã€‚ä¸è¦é‡‡ç”¨indexä½œä¸ºkeyå€¼ã€‚\n","tags":["å‰ç«¯","React"]},{"title":"Reactä¸­çš„PropTypesä¸DefaultProps","url":"/2021/03/31/5.React%E4%B8%AD%E7%9A%84PropTypes%E4%B8%8EDefaultProps/","content":"Reactä¸­çš„PropTypesä¸DefaultPropsPropTypesä½¿ç”¨propTypeså¯ä»¥å®ç°å­ç»„ä»¶å±æ€§æ¥æ”¶çš„å¼ºæ ¡éªŒã€‚å³å­ç»„ä»¶æ¥æ”¶çš„å±æ€§çš„ç±»å‹åº”è¯¥æ˜¯å›ºå®šçš„ï¼Œçˆ¶ç»„ä»¶ä¸èƒ½éšä¾¿ä¼ å€¼ã€‚\nå›åˆ°ä¹‹å‰çš„å­ç»„ä»¶TodoItemä¸­ã€‚\næƒ³è¦ä½¿ç”¨PropTypesï¼Œé¦–å…ˆè¦å¼•å…¥PropTypesã€‚\nimport PropTypes from &quot;prop-types&quot;;\n\nåœ¨TodoItemä¸­ä»¥å¯¹è±¡çš„å½¢å¼æ·»åŠ å±æ€§å¼ºæ ¡éªŒï¼Œæ·»åŠ åˆ°æ–‡ä»¶åº•éƒ¨ã€‚\n// å±æ€§å¼ºæ ¡éªŒTodoItem.propTypes = &#123;  // contentçš„ç±»å‹å¿…é¡»æ˜¯stringç±»å‹  content: PropTypes.string,  // indexçš„ç±»å‹å¿…é¡»æ˜¯number  index: PropTypes.number,  // delFunctionçš„ç±»å‹å¿…é¡»æ˜¯function  delFunction: PropTypes.func,&#125;;\n\nå¦‚æœä¼ å€¼ç±»å‹ä¸åŒ¹é…ï¼Œæ§åˆ¶å°ä¼šç»™å‡ºè­¦å‘Šï¼Œè­¦å‘Šä¸ä¼šé˜»æ­¢ç¨‹åºç»§ç»­æ‰§è¡Œï¼Œä½†æ˜¯ä¼šç»™å‡ºä¸€ä¸ªæ˜æ˜¾çš„æç¤ºã€‚å°†contentçš„ç±»å‹è®¾ä¸ºnumberï¼Œä¼šæŠ¥ä»¥ä¸‹è­¦å‘Šã€‚\n\nå»ºè®®åœ¨å¼€å‘è¿‡ç¨‹ä¸­å°†PropTypeså†™ä¸Šï¼Œè¿™æ ·ä¸€æ—¦åœ¨ä¼ å€¼è¿‡ç¨‹ä¸­ï¼Œæœ‰å€¼ä¼ é€’é”™è¯¯æ—¶ï¼Œä¼šç»™å‡ºä¸€äº›æ˜æ˜¾çš„æç¤ºã€‚\nå¦‚æœæŸä¸ªå±æ€§å€¼å¹¶æ²¡æœ‰ä¼ å€¼ï¼Œåˆ™ä¸ä¼šæ‰§è¡Œæ ¡éªŒï¼Œè®¾ç½®PropTypesä¸ä¼šç”Ÿæ•ˆã€‚\nå¦‚æœè¦æ±‚å¿…é¡»ç»™å±æ€§ä¼ å€¼å¹¶ä¸”æ ¡éªŒç±»å‹çš„è¯ï¼Œè¦ä½¿ç”¨isRequired\nç°åœ¨åœ¨å­ç»„ä»¶TodoItemä¸­æ·»åŠ ä¸€ä¸ªtestå±æ€§ï¼Œçˆ¶ç»„ä»¶ä¸­å¹¶æ²¡æœ‰è¿™ä¸ªå±æ€§ã€‚\nimport React, &#123; Component &#125; from &quot;react&quot;;import PropTypes from &quot;prop-types&quot;;class TodoItem extends Component &#123;  constructor(props) &#123;    super(props);    this.handleItemClick = this.handleItemClick.bind(this);  &#125;  handleItemClick() &#123;    const &#123; delFunction, index &#125; = this.props;    delFunction(index);  &#125;  render() &#123;    // è¿™é‡Œæ·»åŠ ä¸€ä¸ªtestå±æ€§ï¼Œçˆ¶ç»„ä»¶å¹¶æœªä¼ é€’è¿™ä¸ªå±æ€§    const &#123; content, test &#125; = this.props;    return (      &lt;li onClick=&#123;this.handleItemClick&#125; key=&#123;this.props.index&#125;&gt;        &#123;content&#125; - &#123;test&#125;      &lt;/li&gt;    );  &#125;&#125;// å±æ€§å¼ºæ ¡éªŒTodoItem.propTypes = &#123;  content: PropTypes.string,  index: PropTypes.number,  delFunction: PropTypes.func,  // æ·»åŠ isRequiredï¼Œè¦æ±‚è¿™ä¸ªå±æ€§å€¼å¿…é¡»ä¼ é€’å¹¶ä¸”è¿›è¡Œæ ¡éªŒ  test: PropTypes.string.isRequired,&#125;;export default TodoItem;\n\nå› ä¸ºçˆ¶ç»„ä»¶å¹¶æ²¡æœ‰ä¼ é€’testè¿™ä¸ªå±æ€§ï¼Œæ‰€ä»¥æ§åˆ¶å°ä¼šæŠ¥ä¸€ä¸ªè­¦å‘Šã€‚\n\nPropTypesé™¤äº†å•ä¸€çš„ç±»å‹ï¼Œè¿˜å¯ä»¥æœ‰å…¶ä»–çš„å†™æ³•ã€‚æ¯”å¦‚\nTodoItem.propTypes = &#123;  // contentçš„ç±»å‹å¿…é¡»æ˜¯æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å€¼åº”è¯¥ä¸ºstringæˆ–numberç±»å‹  content: PropTypes.arrayOf(PropTypes.string, PropTypes.number),&#125;;\n\nå…¶ä»–å†™æ³•å¯ä»¥è¯¦è§å®˜ç½‘æ–‡æ¡£\nDefaultPropsæœ‰æ—¶å€™çˆ¶ç»„ä»¶ç¡®å®æ— æ³•ç»™æŸä¸ªå±æ€§ä¼ å€¼ï¼Œä½†æ˜¯å­ç»„ä»¶ä¸­åˆè¦æ±‚è¿™ä¸ªå±æ€§å¿…é¡»æœ‰å€¼ï¼Œè¿™æ—¶å€™å°±éœ€è¦ç”¨åˆ°DefaultPropsã€‚\nåŒæ ·è¦åœ¨å­ç»„ä»¶ä¸­ä»¥å¯¹è±¡çš„å½¢å¼è¿›è¡Œå®šä¹‰ã€‚\n// å±æ€§å¼ºæ ¡éªŒTodoItem.propTypes = &#123;  content: PropTypes.string,  index: PropTypes.number,  delFunction: PropTypes.func,  // æ·»åŠ isRequiredï¼Œè¦æ±‚è¿™ä¸ªå±æ€§å€¼å¿…é¡»ä¼ é€’å¹¶ä¸”è¿›è¡Œæ ¡éªŒ  test: PropTypes.string.isRequired,&#125;;// é»˜è®¤å€¼TodoItem.defaultProps = &#123;  test: &quot;hello world&quot;,&#125;;\n\nä»¥ä¸Šä»£ç è¡¨ç¤ºï¼Œçˆ¶ç»„ä»¶éœ€è¦ç»™å­ç»„ä»¶ä¼ é€’ä¸€ä¸ªtestï¼Œç±»å‹ä¸ºstringï¼Œè€Œä¸”æ˜¯å¿…å¡«çš„ã€‚å¦‚æœçˆ¶ç»„ä»¶æ²¡æœ‰ä¼ è¿™ä¸ªtestï¼Œåˆ™ä¼šç»™testä¸€ä¸ªé»˜è®¤å€¼ï¼Œè¿™ä¸ªé»˜è®¤å€¼ä¸ºhello worldã€‚è¿™æ—¶ï¼Œå³ä½¿çˆ¶ç»„ä»¶æ²¡æœ‰å‘å­ç»„ä»¶ä¼ é€’testä¹Ÿæ²¡æœ‰å…³ç³»ï¼Œå› ä¸ºæˆ‘ä»¬å®šä¹‰äº†é»˜è®¤å€¼ã€‚\n\n","tags":["å‰ç«¯","React"]},{"title":"ä½¿ç”¨react-transition-groupå®ç°åŠ¨ç”»","url":"/2021/04/06/8.%E4%BD%BF%E7%94%A8react-transition-group%E5%AE%9E%E7%8E%B0%E5%8A%A8%E7%94%BB/","content":"ä½¿ç”¨react-transition-groupå®ç°åŠ¨ç”»é¦–å…ˆå®‰è£…react-transition-groupã€‚\nnpm install react-transition-group --save\n\nç„¶ååœ¨ç»„ä»¶ä¸­å¼•å…¥å®ƒã€‚\nimport &#123; CSSTransition &#125; from &quot;react-transition-group&quot;;\n\nå•ä¸ªå…ƒç´ çš„åŠ¨ç”»CSSTransitionæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªç»„ä»¶ã€‚åœ¨renderå‡½æ•°ä¸­ä½¿ç”¨CSSTransitionåŒ…è£¹æƒ³è¦æ·»åŠ CSSçš„JSXæ ‡ç­¾ï¼ŒCSSTransitionä¼šå¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨æ·»åŠ /åˆ é™¤CSSçš„classã€‚\nè¿™ä¸ªç»„ä»¶è¦è®¾ç½®ä¸€äº›å±æ€§ã€‚\n\ninçš„å±æ€§ï¼šä»£è¡¨åŠ¨ç”»çš„çŠ¶æ€ï¼Œä½¿ç”¨trueå’Œfalseæ¥æ§åˆ¶æ˜¯å…¥åœºåŠ¨ç”»è¿˜æ˜¯å‡ºåœºåŠ¨ç”»ã€‚\ntimeoutå±æ€§ï¼šä»£è¡¨åŠ¨ç”»æŒç»­æ—¶é—´\nclassNameså±æ€§ï¼ˆæ³¨æ„æœ‰ä¸ªsï¼‰ï¼šä»£è¡¨classçš„å‰ç¼€\nunmountOnExitå±æ€§ï¼šåŠ¨ç”»æ‰§è¡Œå®Œæ¯•ä¹‹åï¼Œç§»é™¤å¯¹åº”çš„DOM\nappearå±æ€§ï¼šå¸ƒå°”å€¼ï¼Œtrueä»£è¡¨ç¬¬ä¸€æ¬¡å±•ç¤ºåœ¨é¡µé¢ä¸Šæ—¶ä¹Ÿæ‰§è¡ŒåŠ¨ç”»\n\nindex.js:\n// ä½¿ç”¨JSXè¯­æ³•å°±è¦å¼•å…¥Reactimport React from &quot;react&quot;;import ReactDOM from &quot;react-dom&quot;;import App from &quot;./App&quot;;ReactDOM.render(  &lt;React.StrictMode&gt;    &lt;App /&gt;  &lt;/React.StrictMode&gt;,  document.getElementById(&quot;root&quot;));\n\nApp.js:\nimport React, &#123; Component, Fragment &#125; from &quot;react&quot;;import &quot;./style.css&quot;;import &#123; CSSTransition &#125; from &quot;react-transition-group&quot;;class App extends Component &#123;  constructor(props) &#123;    super(props);    this.state = &#123;      show: true,    &#125;;    this.handleToggle = this.handleToggle.bind(this);  &#125;  render() &#123;    return (      &lt;Fragment&gt;        &lt;CSSTransition          in=&#123;this.state.show&#125;          timeout=&#123;1000&#125;          classNames=&quot;fade&quot;          unmountOnExit          appear=&#123;true&#125;        &gt;          &lt;div&gt;app&lt;/div&gt;        &lt;/CSSTransition&gt;        &lt;button onClick=&#123;this.handleToggle&#125;&gt;toggle&lt;/button&gt;      &lt;/Fragment&gt;    );  &#125;  handleToggle() &#123;    this.setState(() =&gt; &#123;      return &#123;        show: this.state.show ? false : true,      &#125;;    &#125;);  &#125;&#125;export default App;\n\nstyle.css:\n/* å…¥åœºåŠ¨ç”»æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªæ—¶åˆ» */.fade-enter,.fade-appear &#123;  opacity: 0;&#125;/* å…¥åœºåŠ¨ç”»æ‰§è¡Œçš„è¿‡ç¨‹ */.fade-enter-active,.fade-appear-active &#123;  opacity: 1;  transition: opacity 1s ease-in;&#125;/* å…¥åœºåŠ¨ç”»æ‰§è¡Œå®Œæ¯• */.fade-enter-done &#123;  opacity: 1;&#125;/* å‡ºåœºåŠ¨ç”»æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªæ—¶åˆ» */.fade-exit &#123;  opacity: 1;&#125;/* å‡ºåœºåŠ¨ç”»æ‰§è¡Œçš„è¿‡ç¨‹ */.fade-exit-active &#123;  opacity: 0;  transition: opacity 1s ease-in;&#125;/* å‡ºåœºåŠ¨ç”»æ‰§è¡Œå®Œæ¯• */.fade-exit-done &#123;  opacity: 0;&#125;\n\nCSSä¸­çš„classåç§°å«ä¹‰ï¼š\n\n\n\nåç§°\nå«ä¹‰\n\n\n\n.xxx-enter\nå…¥åœºåŠ¨ç”»æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªæ—¶åˆ»\n\n\n.xxx-enter-active\nå…¥åœºååˆ°å…¥åœºåŠ¨ç”»ç»“æŸçš„è¿‡ç¨‹ï¼Œåœ¨å…¶ä¸­å®šä¹‰transition\n\n\n.xxx-enter-done\nå…¥åœºåŠ¨ç”»æ‰§è¡Œå®Œæ¯•å\n\n\n.xxx-exit\nå‡ºåœºåŠ¨ç”»æ‰§è¡Œçš„ç¬¬ä¸€ä¸ªæ—¶åˆ»\n\n\n.xxx-exit-active\nå‡ºåœºååˆ°å‡ºåœºåŠ¨ç”»ç»“æŸçš„è¿‡ç¨‹ï¼Œåœ¨å…¶ä¸­å®šä¹‰transition\n\n\n.xxx-exit-done\nå‡ºåœºåŠ¨ç”»æ‰§è¡Œå®Œæ¯•å\n\n\n.xxx-appear\nå½“è®¾ç½®appear={true}æ—¶ç”Ÿæ•ˆï¼Œç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶ä¹Ÿæ‰§è¡Œå…¥åœºåŠ¨ç”»ï¼Œå’Œ.xxx-enterä¸€èµ·å†™\n\n\n.xxx-appear-active\nå½“è®¾ç½®appear={true}æ—¶ç”Ÿæ•ˆï¼Œç¬¬ä¸€æ¬¡æ¸²æŸ“æ—¶æ‰§è¡Œçš„å…¥åœºåŠ¨ç”»ï¼Œå’Œ.xxx-enter-activeä¸€èµ·å†™\n\n\nå¤šä¸ªå…ƒç´ çš„åŠ¨ç”»æƒ³è¦å¤šä¸ªå…ƒç´ å®ç°ç›¸åŒçš„åŠ¨ç”»ï¼Œéœ€è¦ä½¿ç”¨TransitionGroupï¼ŒåŒæ ·éœ€è¦æå‰å¼•å…¥\nimport &#123; CSSTransition, TransitionGroup &#125; from &quot;react-transition-group&quot;;\n\nTransitionGroupæ ‡ç­¾è¦å†™åœ¨æ‰€æœ‰ç»„ä»¶çš„å¤–éƒ¨ï¼Œæ¯ä¸€ä¸ªå…·ä½“çš„DOMæ ‡ç­¾å¤–ä»ç„¶éœ€è¦CSSTransitionæ ‡ç­¾ã€‚\næ”¹å†™åçš„App.js:\nimport React, &#123; Component, Fragment &#125; from &quot;react&quot;;import &quot;./style.css&quot;;import &#123; CSSTransition, TransitionGroup &#125; from &quot;react-transition-group&quot;;class App extends Component &#123;  constructor(props) &#123;    super(props);    this.state = &#123;      list: [],    &#125;;    this.handleAddItem = this.handleAddItem.bind(this);  &#125;  render() &#123;    return (      &lt;Fragment&gt;        &lt;button onClick=&#123;this.handleAddItem&#125;&gt;toggle&lt;/button&gt;        &lt;TransitionGroup&gt;          &#123;this.state.list.map((item, index) =&gt; &#123;            return (              &lt;CSSTransition                timeout=&#123;1000&#125;                classNames=&quot;fade&quot;                unmountOnExit                appear=&#123;true&#125;                key=&#123;index&#125;              &gt;                &lt;div&gt;&#123;item&#125;&lt;/div&gt;              &lt;/CSSTransition&gt;            );          &#125;)&#125;        &lt;/TransitionGroup&gt;      &lt;/Fragment&gt;    );  &#125;  handleAddItem() &#123;    this.setState((prevState) =&gt; &#123;      return &#123;        list: [...prevState.list, &quot;item&quot;],      &#125;;    &#125;);  &#125;&#125;export default App;\n\n","tags":["å‰ç«¯","React"]},{"title":"Reactçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°","url":"/2021/04/06/7.React%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E5%87%BD%E6%95%B0/","content":"Reactçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç”Ÿå‘½å‘¨æœŸå‡½æ•°æŒ‡çš„æ˜¯åœ¨æŸä¸€æ—¶åˆ»ç»„ä»¶ä¼šè‡ªåŠ¨è°ƒç”¨æ‰§è¡Œçš„å‡½æ•°ã€‚\n\nå„ç§ç”Ÿå‘½å‘¨æœŸå‡½æ•°Initializationé˜¶æ®µè¿›è¡Œæ•°æ®çš„è®¾ç½®ï¼ˆstate, propsï¼‰ï¼Œæ²¡æœ‰ç”¨åˆ°ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚\nMountingé˜¶æ®µ\ncomponentWillMount: åœ¨ç»„ä»¶å³å°†è¢«æŒ‚è½½åˆ°é¡µé¢çš„æ—¶åˆ»è‡ªåŠ¨æ‰§è¡Œã€‚\nrender: åšé¡µé¢çš„æŒ‚è½½ã€‚\ncomponentDidMount: åœ¨ç»„ä»¶è¢«æŒ‚è½½åˆ°é¡µé¢ä¹‹åè‡ªåŠ¨æ‰§è¡Œã€‚\n\nUpdationé˜¶æ®µåªåœ¨æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶è¿›å…¥è¿™ä¸ªé˜¶æ®µã€‚åœ¨ç»„ä»¶æ›´æ–°çš„è¿‡ç¨‹ä¸­(propsæˆ–stateå‘ç”Ÿå˜åŒ–)ï¼Œä¼šæ¶‰åŠä¸€äº›æ–°çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚\npropså’Œstateå‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰§è¡Œçš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ç•¥æœ‰ä¸åŒï¼ˆpropså¤šäº†ä¸€ä¸ªcomponentWillReceivePropsï¼‰ã€‚\nå…ˆæ¥çœ‹ç›¸åŒçš„éƒ¨åˆ†ï¼š\n\nshouldComponentUpdate: ç»„ä»¶æ›´æ–°ä¹‹å‰ä¼šè¢«è‡ªåŠ¨æ‰§è¡Œã€‚è¯¥å‡½æ•°è¦æ±‚è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚trueä»£è¡¨éœ€è¦æ›´æ–°ï¼Œfalseä»£è¡¨ä¸æ›´æ–°ã€‚\ncomponentWillUpdate: ç»„ä»¶è¢«æ›´æ–°ä¹‹å‰è‡ªåŠ¨æ‰§è¡Œï¼Œåœ¨shouldComponentUpdateä¹‹åè¢«æ‰§è¡Œã€‚å¦‚æœshouldComponentUpdateè¿”å›trueæ‰ä¼šæ‰§è¡Œï¼›å¦‚æœè¿”å›falseåˆ™ä¸ä¼šæ‰§è¡Œã€‚\nrender\ncomponentDidUpdate: ç»„ä»¶æ›´æ–°å®Œæˆä¹‹åä¼šè¢«æ‰§è¡Œã€‚\n\næ¥ä¸‹æ¥æ˜¯propsæ”¹å˜æ—¶ç‹¬æœ‰çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°componentWillReceivePropsã€‚\nå¦‚æœä¸€ä¸ªç»„ä»¶æ²¡æœ‰æ¥æ”¶propså‚æ•°ï¼ˆæ¯”å¦‚é¡¶å±‚ç»„ä»¶ï¼‰ï¼ŒcomponentWillReceivePropsè¿™ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯ä¸ä¼šè¢«æ‰§è¡Œçš„ã€‚\ncomponentWillReceiveProps: å½“ä¸€ä¸ªç»„ä»¶ä»çˆ¶ç»„ä»¶æ¥æ”¶å‚æ•°ï¼Œå¦‚æœè¿™ä¸ªç»„ä»¶ç¬¬ä¸€æ¬¡å­˜åœ¨äºçˆ¶ç»„ä»¶ä¸­ï¼Œä¸ä¼šè¢«æ‰§è¡Œï¼›å¦‚æœè¿™ä¸ªç»„ä»¶ä¹‹å‰å·²ç»å­˜åœ¨äºçˆ¶ç»„ä»¶ä¸­ï¼Œæ‰ä¼šæ‰§è¡Œã€‚\nUnmountingé˜¶æ®µcomponentWillUnmount: å½“å‰ç»„ä»¶å³å°†è¢«ä»é¡µé¢ä¸­å‰”é™¤çš„æ—¶å€™ä¼šè¢«æ‰§è¡Œã€‚\nç”Ÿå‘½å‘¨æœŸå‡½æ•°ä½¿ç”¨åœºæ™¯æ€§èƒ½ä¼˜åŒ–å½“çˆ¶ç»„ä»¶ä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œrenderå‡½æ•°å°±ä¼šæ‰§è¡Œã€‚çˆ¶ç»„ä»¶çš„renderå‡½æ•°æ‰§è¡Œï¼Œå­ç»„ä»¶çš„renderå‡½æ•°ä¹Ÿä¼šæ‰§è¡Œã€‚å¦‚æœçˆ¶ç»„ä»¶çš„æ•°æ®æ”¹å˜äº†ï¼Œä½†æ˜¯å¹¶ä¸æƒ³è®©å­ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå°±å¯ä»¥ä½¿ç”¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°æ¥è¿›è¡Œæ€§èƒ½ä¸Šçš„ä¼˜åŒ–ã€‚\nåˆ©ç”¨shouldComponentUpdate\nshouldComponentUpdate(nextProps, nextState) &#123;  // nextProps: ç»„ä»¶æ›´æ–°æ—¶ï¼Œæ¥ä¸‹æ¥propsä¼šå˜åŒ–ä¸ºä»€ä¹ˆæ ·  // nextState: ç»„ä»¶æ›´æ–°æ—¶ï¼Œæ¥ä¸‹æ¥stateä¼šå˜åŒ–ä¸ºä»€ä¹ˆæ ·  // contentæ˜¯è‡ªå®šä¹‰çš„å±æ€§å  if (nextProps.content !== this.props.content) &#123;    return true;  &#125; else &#123;    return false;  &#125;&#125;\n\nå‘é€Ajaxè¯·æ±‚åœ¨componentDidMountä¸­å‘é€Ajaxè¯·æ±‚ã€‚\nå¦‚æœå°†Ajaxè¯·æ±‚æ”¾åˆ°renderä¸­ï¼Œrenderå‡½æ•°ä¼šåœ¨æ•°æ®æ”¹å˜æ—¶æ‰§è¡Œï¼Œè¿™æ ·ä¼šå¤šæ¬¡å‘é€Ajaxè¯·æ±‚ã€‚åº”è¯¥å¯»æ‰¾åªä¼šæ‰§è¡Œä¸€æ¬¡çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œåœ¨å…¶ä¸­å‘é€ä¸€æ¬¡Ajaxè¯·æ±‚å³å¯ã€‚\ncomponentDidMount() &#123;  axios    .get(&quot;/api/todolist&quot;)    .then(() =&gt; &#123;      alert(&quot;success&quot;);    &#125;)    .catch(() =&gt; &#123;      alert(&quot;error&quot;);    &#125;);&#125;\n\nåœ¨Reactä¸­ä½¿ç”¨Ajaxéœ€è¦å®‰è£…axiosã€‚\nnpm install axios\n\nç„¶ååœ¨ç»„ä»¶ä¸­å¼•å…¥axios\nimport axios from &quot;axios&quot;;\n\næ¥ç€ä¾¿å¯ä»¥å‘é€Ajaxè¯·æ±‚æ¥è·å–æ•°æ®äº†\nä¸€ä¸ªç¤ºä¾‹ï¼š\ncomponentDidMount() &#123;  axios    .get(      &quot;https://www.fastmock.site/mock/0775a4a75216a7011e70b328b9dce604/todolist/todolist&quot;    )    .then((res) =&gt; &#123;      this.setState(() =&gt; (&#123; list: [...res.data] &#125;));    &#125;)    .catch(() =&gt; &#123;      alert(&quot;error&quot;);    &#125;);&#125;\n\n","tags":["å‰ç«¯","React"]},{"title":"åˆ›å»ºReduxä¸­çš„Store","url":"/2021/04/07/9.%E5%88%9B%E5%BB%BARedux%E4%B8%AD%E7%9A%84Store/","content":"åˆ›å»ºReduxä¸­çš„Store ä»¥å®ç°ä¸€ä¸ªTodo Listä¸ºä¾‹ã€‚ä¸‹é¢æ˜¯æ•ˆæœå›¾ã€‚\n\nstoreçš„åˆ›å»ºä¸æ•°æ®è·å–é¦–å…ˆè¦å®‰è£…Redux\nnpm install redux\n\nåœ¨srcç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªfolderï¼Œfolderçš„åå­—å°±å«åšstoreã€‚\nåœ¨storeæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºindex.jsï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åˆ›å»ºstoreã€‚\nåˆ›å»ºstoreçš„åŒæ—¶ä¹Ÿè¦åˆ›å»ºreducerã€‚æ‰€ä»¥åœ¨storeç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªreducer.jsï¼Œåœ¨è¿™ä¸ªæ–‡ä»¶ä¸­åªéœ€è¦è¿”å›ä¸€ä¸ªå‡½æ•°\n/src/store/index.js:\nimport &#123; createStore &#125; from &quot;redux&quot;;// åˆ›å»ºæ•°æ®å…¬å…±å­˜å‚¨ä»“åº“// è°ƒç”¨createStoreå³å¯åˆ›å»ºä¸€ä¸ªstoreconst store = createStore();export default store;\n\nä½†æ˜¯è¿™æ ·å¹¶ä¸å¤Ÿã€‚\nå›é¡¾ä¸€ä¸‹Reduxçš„å·¥ä½œæµç¨‹ã€‚\n\nå‡è®¾è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä½ å»ä¸€ä¸ªå›¾ä¹¦é¦†å€Ÿä¹¦ï¼Œä½ å¯¹å›¾ä¹¦ç®¡ç†å‘˜è¯´ï¼šâ€œè¯·é—®æœ‰ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹è¿™æœ¬ä¹¦å—ï¼Ÿâ€ã€‚å›¾ä¹¦ç®¡ç†å‘˜è¦å»ç”µè„‘ä¸Šçš„èµ„æ–™åº“ä¸­æ£€ç´¢ï¼Œæ‰¾åˆ°è¿™æœ¬ä¹¦çš„ä½ç½®åœ¨å“ªï¼Œç„¶åå–åˆ°è¿™æœ¬ä¹¦ï¼Œäº¤ç»™ä½ ã€‚\nå›¾ä¸­çš„React Componentså°±å¯¹åº”ä¸Šè¿°åœºæ™¯çš„â€œä½ â€ï¼ŒAction Creatorså¯¹åº”â€œè¯·é—®æœ‰ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ã€‹è¿™æœ¬ä¹¦å—ï¼Ÿâ€è¿™å¥è¯ï¼ŒStoreå¯¹åº”å›¾ä¹¦ç®¡ç†å‘˜ï¼ŒReducerså¯¹åº”ç”µè„‘ä¸Šçš„èµ„æ–™åº“ã€‚\né‚£ä¹ˆç°åœ¨å†æ¥æ¢³ç†ä¸€ä¸‹ã€‚\nReact Componentsï¼ˆReactä¸­çš„ç»„ä»¶ï¼‰æƒ³è¦è·å–æ•°æ®ï¼Œå°±å‘å‡ºäº†ä¸€ä¸ªè¯·æ±‚Action Creatorsï¼ˆæš‚æ—¶ç†è§£ä¸ºè¯·æ±‚ï¼Œå¹¶ä¸å‡†ç¡®ï¼‰ï¼ŒStoreæ„ŸçŸ¥åˆ°äº†è¿™ä¸ªè¯·æ±‚ï¼Œå°±å»Reducersä¸­æœç´¢å¯¹åº”çš„æ•°æ®ï¼Œæ‹¿åˆ°ä¹‹åå°†æ•°æ®è¿”å›ç»™ç»„ä»¶ã€‚\næ‰€ä»¥ç°åœ¨åˆ›å»ºStoreçš„æ—¶å€™ï¼Œéœ€è¦åŒæ—¶åˆ›å»ºReducersï¼Œç„¶åç»™åˆ°Storeã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œéœ€è¦ç»™å›¾ä¹¦ç®¡ç†å‘˜ä¸€ä¸ªä¹¦ç±çš„ç›®å½•ï¼Œè¿™æ ·å›¾ä¹¦ç®¡ç†å‘˜æ‰çŸ¥é“æœ‰å“ªäº›ä¹¦ï¼Œå¯¹åº”çš„ä¹¦åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Œå¦åˆ™è¿™ä¸ªå›¾ä¹¦ç®¡ç†å‘˜ä»€ä¹ˆä¹Ÿä¸çŸ¥é“ã€‚\nåœ¨storeç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªreducer.js\nåœ¨Reduxä¸­ï¼Œreducerçš„ä»£ç éœ€è¦è¿”å›ä¸€ä¸ªå‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°éœ€è¦æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼šstateå’Œactionã€‚stateå¯¹åº”æ•´ä¸ªä»“åº“ä¸­å­˜å‚¨çš„æ•°æ®ï¼Œå¯ä»¥ç»™stateä¸€ä¸ªé»˜è®¤å€¼æ¥å­˜å‚¨é»˜è®¤æ•°æ®ã€‚å‡½æ•°é»˜è®¤è¿”å›stateå³å¯ã€‚\nsrc/store/reducer.js\n// å¯¹äºtodolistæ¥è®²ï¼Œéœ€è¦ä¸¤ç±»æ•°æ®ï¼Œä¸€ä¸ªæ˜¯è¾“å…¥æ¡†ä¸­çš„æ•°æ®ï¼Œå¦ä¸€ä¸ªæ˜¯éœ€è¦å±•ç¤ºçš„åˆ—è¡¨æ•°æ®const defaultState = &#123;  inputValue: &quot;&quot;,  list: [],&#125;;export default (state = defaultState, action) =&gt; &#123;  return state;&#125;;\n\nåˆ›å»ºå¥½reducerä¹‹åï¼Œè¦æŠŠreducerä¼ ç»™storeã€‚\nsrc/store/store.js\n// åˆ›å»ºstoreimport &#123; createStore &#125; from &quot;redux&quot;;import reducer from &quot;./reducer&quot;;// åˆ›å»ºæ•°æ®å…¬å…±å­˜å‚¨ä»“åº“// è°ƒç”¨createStoreå³å¯åˆ›å»ºä¸€ä¸ªstoreconst store = createStore(reducer);export default store;\n\nè¿™æ ·ï¼Œstoreå°±å¯ä»¥é€šè¿‡reduceræ¥æŸ¥çœ‹ä»“åº“ä¸­çš„æ•°æ®ã€‚\nç°åœ¨æƒ³åœ¨ç»„ä»¶ä¸­ä½¿ç”¨storeä¸­çš„æ•°æ®ï¼Œè¯¥æ€ä¹ˆåšï¼Ÿ\né¦–å…ˆéœ€è¦åœ¨ç»„ä»¶ä¸­å¼•å…¥store\nimport store from &quot;./store/index&quot;;\n\nstoreæä¾›äº†ä¸€ä¸ªgetState()æ–¹æ³•ï¼Œä½¿ç”¨è¿™ä¸ªæ–¹æ³•å°±å¯ä»¥è·å–storeä¸­çš„æ•°æ®ã€‚å°†è·å–åˆ°çš„æ•°æ®æ”¾åˆ°å½“å‰ç»„ä»¶çš„this.stateä¸­ï¼Œå°±å¯ä»¥å½“ä½œç»„ä»¶æœ¬èº«çš„æ•°æ®æ¥ä½¿ç”¨äº†ã€‚\nimport React, &#123; Component &#125; from &quot;react&quot;;import &quot;antd/dist/antd.css&quot;;// è¿™é‡Œä½¿ç”¨äº†Ant Designimport &#123; Input &#125; from &quot;antd&quot;;import &#123; Button &#125; from &quot;antd&quot;;import &#123; List, Divider &#125; from &quot;antd&quot;;import store from &quot;./store/index&quot;;class TodoList extends Component &#123;  constructor(props) &#123;    super(props);    // è¿™é‡Œè·å–åˆ°äº†storeä¸­çš„æ•°æ®    this.state = store.getState();    console.log(this.state);  &#125;  render() &#123;    return (      &lt;div style=&#123;&#123; margin: &quot;20px auto&quot;, width: &quot;500px&quot; &#125;&#125;&gt;        &lt;Input          value=&#123;this.state.inputValue&#125;          placeholder=&quot;todo info&quot;          style=&#123;&#123; width: &quot;430px&quot; &#125;&#125;        /&gt;        &lt;Button type=&quot;primary&quot;&gt;æäº¤&lt;/Button&gt;        &lt;Divider orientation=&quot;left&quot;&gt;Todo List&lt;/Divider&gt;        &lt;List          size=&quot;large&quot;          bordered          dataSource=&#123;this.state.list&#125;          renderItem=&#123;(item) =&gt; &lt;List.Item&gt;&#123;item&#125;&lt;/List.Item&gt;&#125;        /&gt;      &lt;/div&gt;    );  &#125;&#125;export default TodoList;\n\nChromeä¸­çš„æ’ä»¶redux devtools\nå®‰è£…å®Œæˆåï¼Œåœ¨åˆ›å»ºstoreçš„createStoreå‡½æ•°ä¸­ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__()\n// åˆ›å»ºstoreimport &#123; createStore &#125; from &quot;redux&quot;;import reducer from &quot;./reducer&quot;;const store = createStore(  reducer,  window.__REDUX_DEVTOOLS_EXTENSION__ &amp;&amp; window.__REDUX_DEVTOOLS_EXTENSION__());export default store;\n\nç„¶åå°±å¯ä»¥åœ¨chromeçš„æ§åˆ¶å°ä¸­æ–¹ä¾¿åœ°è¿›è¡Œreduxçš„è°ƒè¯•ã€‚\n\n","tags":["å‰ç«¯","React","Redux"]},{"title":"ES6ï¼ˆä¸€ï¼‰let & const","url":"/2021/03/18/ES6%EF%BC%88%E4%B8%80%EF%BC%89let%20&%20const/","content":"ES6 let&amp;constå‘½ä»¤letå’Œconstæ˜¯ES6ä¸­æ–°å¢çš„ä¸¤ä¸ªå£°æ˜å˜é‡çš„å‘½ä»¤ã€‚\nåŸºæœ¬ç”¨æ³•å’Œvarç›¸åŒï¼ŒåŒºåˆ«åœ¨äºletå’Œconstå£°æ˜çš„å˜é‡åªåœ¨å£°æ˜çš„ä»£ç å—å†…æœ‰æ•ˆã€‚\nif (true) &#123;    let myName = &quot;Orla&quot;;&#125;console.log(myName);\t\t// Uncaught ReferenceError: myName is not defined\n\nletä»£æ›¿varæ¥å£°æ˜å˜é‡ï¼Œconstä»£æ›¿varæ¥å£°æ˜å¸¸é‡ã€‚\nvarå’Œletå£°æ˜çš„æ˜¯å˜é‡ï¼Œå˜é‡åˆå§‹åŒ–åè¿˜å¯ä»¥é‡æ–°èµ‹å€¼ï¼›constå£°æ˜çš„å¸¸é‡ä¸€æ—¦åˆå§‹åŒ–ï¼Œå°±ä¸èƒ½é‡æ–°èµ‹å€¼ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚ï¼ˆå®é™…ä¸Šä¸æ˜¯å¸¸é‡çš„å€¼ä¸å¯ä»¥æ”¹å˜ï¼Œè€Œæ˜¯æŒ‡å‘çš„å†…å­˜åœ°å€ä¸å¯ä»¥æ”¹å˜ï¼Œæ­¤å¤„é’ˆå¯¹å¼•ç”¨æ•°æ®ç±»å‹ï¼‰\nconst person = &#123;    name: &quot;Orla&quot;,    age: 20,&#125;;person.name = &quot;Zhangsan&quot;;console.log(person);\n\n\n\n\nlet&amp;constä¸varçš„åŒºåˆ«ä¸å­˜åœ¨å˜é‡æå‡varå‘½ä»¤å­˜åœ¨å˜é‡æå‡ç°è±¡ï¼Œå³å˜é‡å¯ä»¥åœ¨å£°æ˜ä¹‹å‰ä½¿ç”¨ï¼Œå…¶å€¼ä¸ºundefinedã€‚ä½†è¿™å¹¶ä¸ç¬¦åˆé€»è¾‘ã€‚let&amp;constæ¶ˆé™¤äº†è¿™ç§ç°è±¡ï¼Œå˜é‡å¿…é¡»åœ¨å£°æ˜ä¹‹åæ‰èƒ½ä½¿ç”¨ã€‚\nconsole.log(a); // undefinedvar a = 10;console.log(b); // æŠ¥é”™ Uncaught ReferenceError: Cannot access &#x27;b&#x27; before initializationlet b = 20;\n\n\n\né‡å¤å£°æ˜let/constä¸å…è®¸åœ¨ç›¸åŒä½œç”¨åŸŸå†…é‡å¤å£°æ˜åŒä¸€ä¸ªå˜é‡ã€‚\næš‚æ—¶æ€§æ­»åŒº(TDZ)åªè¦ä½œç”¨åŸŸä¸­å­˜åœ¨let/constï¼Œå®ƒä»¬æ‰€å£°æ˜çš„å˜é‡/å¸¸é‡å°±è‡ªåŠ¨â€œç»‘å®šâ€è¿™ä¸ªåŒºåŸŸï¼Œä¸å†å—åˆ°å¤–éƒ¨ä½œç”¨åŸŸçš„å½±å“ã€‚åªè¦åœ¨å£°æ˜è¯­å¥ä¹‹å‰ä½¿ç”¨let/constå£°æ˜çš„å˜é‡ï¼Œå°±ä¼šæŠ¥é”™ã€‚ç®€è¨€ä¹‹ï¼Œä½¿ç”¨let/constå‘½ä»¤å£°æ˜å˜é‡ä¹‹å‰ï¼Œè¯¥å˜é‡éƒ½æ˜¯ä¸å¯ç”¨çš„ï¼Œè¿™å°±è¢«ç§°ä½œæš‚æ—¶æ€§æ­»åŒºã€‚\nlet a = 20;function func() &#123;    // letä¸å­˜åœ¨å˜é‡æå‡ï¼Œletå£°æ˜çš„aä¸è¯¥åŒºåŸŸç»‘å®šï¼Œä¸å—å¤–éƒ¨å½±å“    console.log(a); // Uncaught ReferenceError: Cannot access &#x27;a&#x27; before initialization    let a = 10;&#125;func();\n\næš‚æ—¶æ€§æ­»åŒºä¹Ÿæ„å‘³ç€typeofä¸å†æ˜¯ä¸€ä¸ªç™¾åˆ†ç™¾å®‰å…¨çš„æ“ä½œã€‚\n&#123;\ttypeof a; // Uncaught ReferenceError: Cannot access &#x27;a&#x27; before initialization    let a = [];&#125;\n\n\n\nwindowå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•å…¨å±€ä½œç”¨åŸŸä¸­ï¼Œvarå£°æ˜çš„å˜é‡ä»¥åŠé€šè¿‡functionå£°æ˜çš„å‡½æ•°ï¼Œä¼šè‡ªåŠ¨å˜æˆwindowå¯¹è±¡çš„å±æ€§å’Œæ–¹æ³•ã€‚letã€constä¸ä¼šã€‚\nvar a = 10;let b = 20;const c = 30;function add() &#123;&#125;console.log(window.a); // 10console.log(window.b); // undefinedconsole.log(window.c); // undefinedconsole.log(window.add === add); // true\n\n\n\nå—çº§ä½œç”¨åŸŸä»¥forå¾ªç¯ä¸ºä¾‹ã€‚å¦‚æœä½¿ç”¨letï¼Œiåªåœ¨forå¾ªç¯ä½“å†…æœ‰æ•ˆï¼Œåœ¨å¾ªç¯ä½“å¤–å¼•ç”¨å°±ä¼šæŠ¥é”™ã€‚\nfor (let i = 0; i &lt; 10; i++) &#123;  // ...&#125;console.log(i);// ReferenceError: i is not defined\n\nå¦‚æœä½¿ç”¨varï¼Œåˆ™ä¼šè¾“å‡º10ï¼ˆå› ä¸ºES5ä¸­æ²¡æœ‰å—çº§ä½œç”¨åŸŸï¼‰ã€‚\n// å˜é‡iæ˜¯varå‘½ä»¤å£°æ˜çš„ï¼Œåœ¨å…¨å±€èŒƒå›´å†…éƒ½æœ‰æ•ˆï¼Œæ‰€ä»¥å…¨å±€åªæœ‰ä¸€ä¸ªå˜é‡i// æ¯ä¸€æ¬¡å¾ªç¯ï¼Œå˜é‡içš„å€¼éƒ½ä¼šå‘ç”Ÿæ”¹å˜ï¼Œè€Œå¾ªç¯å†…è¢«èµ‹ç»™æ•°ç»„açš„å‡½æ•°å†…éƒ¨çš„console.log(i)ï¼Œé‡Œé¢çš„iæŒ‡å‘çš„å°±æ˜¯å…¨å±€çš„i// ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰æ•°ç»„açš„æˆå‘˜é‡Œé¢çš„iï¼ŒæŒ‡å‘çš„éƒ½æ˜¯åŒä¸€ä¸ªiï¼Œå¯¼è‡´è¿è¡Œæ—¶è¾“å‡ºçš„æ˜¯æœ€åä¸€è½®çš„içš„å€¼ï¼Œä¹Ÿå°±æ˜¯ 10ã€‚var a = [];for (var i = 0; i &lt; 10; i++) &#123;  a[i] = function () &#123;    console.log(i);  &#125;;&#125;a[8](); // 10\n\n\n\nå¦‚æœä½¿ç”¨letï¼Œå£°æ˜çš„å˜é‡ä»…åœ¨å—çº§ä½œç”¨åŸŸå†…æœ‰æ•ˆã€‚\n// å˜é‡iæ˜¯letå£°æ˜çš„ï¼Œå½“å‰çš„iåªåœ¨æœ¬è½®å¾ªç¯æœ‰æ•ˆ// æ¯ä¸€æ¬¡å¾ªç¯çš„iå…¶å®éƒ½æ˜¯ä¸€ä¸ªæ–°çš„å˜é‡// forå¾ªç¯çš„è®¡æ•°å™¨å°±å¾ˆé€‚åˆç”¨letï¼Œä¸ä¼šå‡ºç°å…¨å±€å˜é‡æ”¹å˜çš„æƒ…å†µvar a = [];for (let i = 0; i &lt; 10; i++) &#123;  a[i] = function () &#123;    console.log(i);  &#125;;&#125;a[8](); // 8\n\n\n\nforå¾ªç¯æœ‰ä¸€ä¸ªç‰¹åˆ«ä¹‹å¤„:å¾ªç¯å˜é‡çš„é‚£éƒ¨åˆ†æ˜¯ä¸€ä¸ªçˆ¶ä½œç”¨åŸŸï¼Œè€Œå¾ªç¯ä½“å†…éƒ¨æ˜¯ä¸€ä¸ªå•ç‹¬çš„å­ä½œç”¨åŸŸã€‚\nfor (let i = 0; i &lt; 3; i++) &#123;  let i = &#x27;abc&#x27;;  console.log(i);&#125;// abc// abc// abc\n\n","tags":["ES6"]},{"title":"å•è¡Œ/å¤šè¡Œæ–‡å­—æº¢å‡ºçœç•¥","url":"/2021/03/23/%E5%8D%95%E8%A1%8C%E5%A4%9A%E8%A1%8C%E6%96%87%E5%AD%97%E6%BA%A2%E5%87%BA%E7%9C%81%E7%95%A5/","content":"å‰ç«¯â€”â€”å•è¡Œ/å¤šè¡Œæ–‡å­—æº¢å‡ºçœç•¥å•è¡Œæ–‡å­—çœç•¥æ ·å¼ä»£ç ï¼Œæ·»åŠ å¯¹åº”çš„classå³å¯.text-ellipsis&#123;    overflow: hidden;    text-overflow: ellipsis;    white-space: nowrap;&#125;\n\nç¤ºä¾‹ï¼š\n&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot; /&gt;    &lt;title&gt;å•è¡Œæ–‡å­—æº¢å‡ºçœç•¥&lt;/title&gt;    &lt;style&gt;      * &#123;        margin: 0;        padding: 0;      &#125;      .container &#123;        margin: 20px auto;        width: 300px;        border: 1px solid #eee;      &#125;      li &#123;        display: block;        list-style: none;        color: rgb(158, 152, 152);        border-bottom: 1px dashed rgb(158, 152, 152);        margin: 10px;      &#125;      .text-ellipsis &#123;        overflow: hidden;        text-overflow: ellipsis;        white-space: nowrap;      &#125;    &lt;/style&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;div class=&quot;container&quot;&gt;      &lt;ul&gt;        &lt;li class=&quot;text-ellipsis&quot;&gt;          æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—        &lt;/li&gt;        &lt;li class=&quot;text-ellipsis&quot;&gt;          æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—        &lt;/li&gt;        &lt;li class=&quot;text-ellipsis&quot;&gt;          æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—        &lt;/li&gt;        &lt;li class=&quot;text-ellipsis&quot;&gt;          æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—        &lt;/li&gt;        &lt;li class=&quot;text-ellipsis&quot;&gt;          æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—æ–‡å­—        &lt;/li&gt;      &lt;/ul&gt;    &lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;\n\næ•ˆæœï¼š\nå¤šè¡Œæ–‡å­—çœç•¥æ ·å¼ä»£ç ï¼Œæ·»åŠ å¯¹åº”çš„classå³å¯.multiline-ellipsis&#123;    overflow: hidden;    text-overflow: ellipsis;    display: -webkit-box;    /* è®¾ç½®æ–‡å­—æ˜¾ç¤ºè¡Œæ•° */    -webkit-line-clamp: 2;    -webkit-box-orient: vertical;    white-space: normal !important;    word-wrap: break-word;&#125;\n\nç¤ºä¾‹ï¼š\n&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;UTF-8&quot; /&gt;    &lt;title&gt;å¤šè¡Œæ–‡å­—æº¢å‡ºçœç•¥&lt;/title&gt;    &lt;style&gt;      .container &#123;        width: 300px;        margin: 20px auto;        border: 1px solid rgb(155, 147, 147);      &#125;      .multiline-ellipsis &#123;        overflow: hidden;        text-overflow: ellipsis;        display: -webkit-box;        /* è®¾ç½®æ–‡å­—æ˜¾ç¤ºè¡Œæ•° */        -webkit-line-clamp: 2;        -webkit-box-orient: vertical;        white-space: normal !important;        word-wrap: break-word;      &#125;    &lt;/style&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;div class=&quot;container&quot;&gt;      &lt;h3&gt;å²³é˜³æ¥¼è®°&lt;/h3&gt;      &lt;p class=&quot;multiline-ellipsis&quot;&gt;        åº†å†å››å¹´æ˜¥ï¼Œæ»•å­äº¬è°ªå®ˆå·´é™µéƒ¡ã€‚è¶Šæ˜å¹´ï¼Œæ”¿é€šäººå’Œï¼Œç™¾åºŸå…·å…´ï¼Œä¹ƒé‡ä¿®å²³é˜³æ¥¼ï¼Œå¢å…¶æ—§åˆ¶ï¼Œåˆ»å”è´¤ä»Šäººè¯—èµ‹äºå…¶ä¸Šï¼Œå±äºˆä½œæ–‡ä»¥è®°ä¹‹ã€‚&lt;br /&gt;        äºˆè§‚å¤«å·´é™µèƒœçŠ¶ï¼Œåœ¨æ´åº­ä¸€æ¹–ã€‚è¡”è¿œå±±ï¼Œåé•¿æ±Ÿï¼Œæµ©æµ©æ±¤æ±¤ï¼Œæ¨ªæ— é™…æ¶¯ï¼Œæœæ™–å¤•é˜´ï¼Œæ°”è±¡ä¸‡åƒï¼Œæ­¤åˆ™å²³é˜³æ¥¼ä¹‹å¤§è§‚ä¹Ÿï¼Œå‰äººä¹‹è¿°å¤‡çŸ£ã€‚ç„¶åˆ™åŒ—é€šå·«å³¡ï¼Œå—ææ½‡æ¹˜ï¼Œè¿å®¢éªšäººï¼Œå¤šä¼šäºæ­¤ï¼Œè§ˆç‰©ä¹‹æƒ…ï¼Œå¾—æ— å¼‚ä¹ï¼Ÿ&lt;br /&gt;        è‹¥å¤«æ·«é›¨éœéœï¼Œè¿æœˆä¸å¼€ï¼Œé˜´é£æ€’å·ï¼ŒæµŠæµªæ’ç©ºï¼Œæ—¥æ˜Ÿéšæ›œï¼Œå±±å²³æ½œå½¢ï¼Œå•†æ—…ä¸è¡Œï¼Œæ¨¯å€¾æ¥«æ‘§ï¼Œè–„æš®å†¥å†¥ï¼Œè™å•¸çŒ¿å•¼ã€‚ç™»æ–¯æ¥¼ä¹Ÿï¼Œåˆ™æœ‰å»å›½æ€€ä¹¡ï¼Œå¿§è°—ç•è®¥ï¼Œæ»¡ç›®è§ç„¶ï¼Œæ„Ÿæè€Œæ‚²è€…çŸ£ã€‚&lt;br /&gt;        è‡³è‹¥æ˜¥å’Œæ™¯æ˜ï¼Œæ³¢æ¾œä¸æƒŠï¼Œä¸Šä¸‹å¤©å…‰ï¼Œä¸€ç¢§ä¸‡é¡·ï¼Œæ²™é¸¥ç¿”é›†ï¼Œé”¦é³æ¸¸æ³³ï¼Œå²¸èŠ·æ±€å…°ï¼Œéƒéƒé’é’ã€‚è€Œæˆ–é•¿çƒŸä¸€ç©ºï¼Œçš“æœˆåƒé‡Œï¼Œæµ®å…‰è·ƒé‡‘ï¼Œé™å½±æ²‰ç’§ï¼Œæ¸”æ­Œäº’ç­”ï¼Œæ­¤ä¹ä½•æï¼ç™»æ–¯æ¥¼ä¹Ÿï¼Œåˆ™æœ‰å¿ƒæ—·ç¥æ€¡ï¼Œå® è¾±å•å¿˜ï¼ŒæŠŠé…’ä¸´é£ï¼Œå…¶å–œæ´‹æ´‹è€…çŸ£ã€‚&lt;br /&gt;        å—Ÿå¤«ï¼äºˆå°æ±‚å¤ä»äººä¹‹å¿ƒï¼Œæˆ–å¼‚äºŒè€…ä¹‹ä¸ºï¼Œä½•å“‰ï¼Ÿä¸ä»¥ç‰©å–œï¼Œä¸ä»¥å·±æ‚²ï¼Œå±…åº™å ‚ä¹‹é«˜åˆ™å¿§å…¶æ°‘ï¼Œå¤„æ±Ÿæ¹–ä¹‹è¿œåˆ™å¿§å…¶å›ã€‚æ˜¯è¿›äº¦å¿§ï¼Œé€€äº¦å¿§ã€‚ç„¶åˆ™ä½•æ—¶è€Œä¹è€¶ï¼Ÿå…¶å¿…æ›°â€œå…ˆå¤©ä¸‹ä¹‹å¿§è€Œå¿§ï¼Œåå¤©ä¸‹ä¹‹ä¹è€Œä¹â€ä¹ï¼å™«ï¼å¾®æ–¯äººï¼Œå¾è°ä¸å½’ï¼Ÿ&lt;br /&gt;        æ—¶å…­å¹´ä¹æœˆåäº”æ—¥ã€‚      &lt;/p&gt;    &lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;\n\næ•ˆæœï¼š\n","tags":["å‰ç«¯","css"]},{"title":"ç§»åŠ¨ç«¯äº‹ä»¶","url":"/2021/03/19/%E7%A7%BB%E5%8A%A8%E7%AB%AF%E4%BA%8B%E4%BB%B6/","content":"ç§»åŠ¨ç«¯äº‹ä»¶ç§»åŠ¨ç«¯äº‹ä»¶ä¸€å…±æœ‰ä¸‰ç±»ï¼šè§¦æ‘¸äº‹ä»¶ã€æ‰‹åŠ¿(gesture)äº‹ä»¶ä»¥åŠä¼ æ„Ÿå™¨(sensor)äº‹ä»¶ã€‚å…¶ä¸­ï¼Œè§¦æ‘¸äº‹ä»¶åˆå¯åˆ†ä¸ºtouchäº‹ä»¶å’Œpointeräº‹ä»¶ã€‚\nè§¦æ‘¸äº‹ä»¶touchäº‹ä»¶touchåˆ†ç±»touchäº‹ä»¶å¯åˆ†ä¸ºtouchstart, touchmove, touchendå’Œtouchcancelå››ç§ã€‚\ntouchstartï¼šæ‰‹æŒ‡è§¦æ‘¸åˆ°å±å¹•æ—¶ä¼šè§¦å‘\ntouchmoveï¼šæ‰‹æŒ‡æŒ‰åœ¨å±å¹•ä¸Šå¹¶ç§»åŠ¨æ—¶è§¦å‘\ntouchendï¼šæ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶è§¦å‘\ntouchcancelï¼šé€šå¸¸æ˜¯ç³»ç»Ÿçº§çš„äº‹ä»¶è§¦å‘ã€‚æ¯”å¦‚æ­£åœ¨æ»‘åŠ¨å±å¹•æ—¶æœ‰ç”µè¯æ‰“è¿›æ¥ï¼Œé¡µé¢åˆ‡æ¢åˆ°äº†é€šè¯ç•Œé¢ï¼Œæ­¤æ—¶å°±ä¼šè§¦å‘touchcanceläº‹ä»¶ã€‚\nä¸¾ä¸ªæ —å­ï¼š\n&lt;!-- é¡µé¢ä¸Šå­˜åœ¨ä¸€ä¸ªdiv --&gt;&lt;div id=&quot;box&quot;&gt;&lt;/div&gt;\n\n/* ä¸ºå…¶è®¾ç½®æ ·å¼ */#box &#123;  width: 150px;  height: 150px;  background-color: rgb(236, 148, 148);  margin: 20px auto;  color: #fff;  font-weight: bold;  text-align: center;  line-height: 150px;&#125;\n\nconst box = document.getElementById(&quot;box&quot;);// ç»‘å®šä¸‰ä¸ªtouchäº‹ä»¶box.addEventListener(&quot;touchstart&quot;, handleStart, false);box.addEventListener(&quot;touchmove&quot;, handleMove, false);box.addEventListener(&quot;touchend&quot;, handleEnd, false);function handleStart() &#123;  box.innerText = &quot;æˆ‘è¢«ç‚¹äº†&quot;;  console.log(&quot;touchStart&quot;);&#125;function handleMove() &#123;  box.innerText = &quot;æ­£åœ¨ç§»åŠ¨...&quot;;  console.log(&quot;touchMove&quot;);&#125;function handleEnd() &#123;  box.innerText = &quot;æ¾å¼€äº†ï¼&quot;;  console.log(&quot;touchEnd&quot;);&#125;\n\nå½“æ‰‹æŒ‡åœ¨ç›’å­å†…éƒ¨ç‚¹å‡»ç›’å­ã€ç§»åŠ¨æ‰‹æŒ‡ã€æ¾å¼€æ‰‹æŒ‡æ—¶ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š\n\nå½“æ‰‹æŒ‡åœ¨ç›’å­å¤–éƒ¨ç‚¹å‡»ã€ç§»åŠ¨ã€æ¾å¼€æ—¶ï¼Œä¸ä¼šè§¦å‘äº‹ä»¶ï¼Œå³ä½¿æ‰‹æŒ‡åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ç§»åŠ¨åˆ°äº†ç›’å­ä¸Šï¼š\n\nå½“æ‰‹æŒ‡åœ¨ç›’å­å†…éƒ¨ç‚¹å‡»ï¼Œå¹¶æ»‘å‡ºç›’å­èŒƒå›´åï¼Œäº‹ä»¶ä¾ç„¶ä¼šè§¦å‘ï¼š\n\ntouchäº‹ä»¶çš„eventå¯¹è±¡æ¯ä¸ªtouchäº‹ä»¶éƒ½ä¼šæœ‰eventå¯¹è±¡ï¼Œæ¯æ¬¡touchçš„ä¿¡æ¯éƒ½ä¼šåŒ…å«åœ¨eventå¯¹è±¡ä¸­ã€‚\nå°†ä¸Šé¢çš„ä»£ç ä¸­çš„eventæ‰“å°å‡ºæ¥ã€‚\nfunction handleStart(ev) &#123;        box.innerText = &quot;æˆ‘è¢«ç‚¹äº†&quot;;        console.log(&quot;touchStart&quot;, ev);      &#125;      function handleMove(ev) &#123;        box.innerText = &quot;æ­£åœ¨ç§»åŠ¨...&quot;;        console.log(&quot;touchMove&quot;, ev);      &#125;      function handleEnd(ev) &#123;        box.innerText = &quot;æ¾å¼€äº†ï¼&quot;;        console.log(&quot;touchEnd&quot;, ev);      &#125;\n\nä»¥touchstartä¸­çš„eventä¸ºä¾‹ï¼š\n\næˆ‘ä»¬è¿™é‡Œé‡ç‚¹å…³æ³¨ä¸‰ä¸ªå±æ€§ï¼šchangedTouches, targetToucheså’Œtouchesã€‚\nè¿™ä¸‰ä¸ªå±æ€§å‡ ä¹åŒ…å«äº†æˆ‘ä»¬æ‰‹æŒ‡ç‚¹å‡»å±å¹•æ—¶æ‰€æœ‰ä¿¡æ¯ã€‚è¿™ä¸‰ä¸ªå±æ€§å…¶å®éƒ½æ˜¯ç±»æ•°ç»„å¯¹è±¡ï¼Œå…·æœ‰ä¸‹æ ‡å’Œlengthï¼Œä½†æ˜¯æ²¡æœ‰æ•°ç»„çš„æ–¹æ³•ã€‚\ntouchesçš„lengthä»£è¡¨è§¦æ‘¸å±å¹•çš„æ‰‹æŒ‡æ•°ï¼Œæœ‰å¤šå°‘æ ¹æ‰‹æŒ‡è§¦æ‘¸å±å¹•ï¼Œlengthå°±æ˜¯å¤šå°‘ã€‚\ntargetTouchesçš„lengthä»£è¡¨è§¦æ‘¸äº‹ä»¶ç»‘å®šå…ƒç´ çš„æ‰‹æŒ‡æ•°ï¼Œå¦‚æœæ‰‹æŒ‡è½åœ¨è¯¥ç»‘å®šå…ƒç´ çš„èŒƒå›´å¤–ï¼Œåˆ™ä¸è®¡å…¥lengthã€‚\nchangedTouchesçš„lengthä»£è¡¨è§¦æ‘¸äº‹ä»¶ç»‘å®šå…ƒç´ å¹¶ç§»åŠ¨çš„æ‰‹æŒ‡æ•°ã€‚æ³¨æ„ï¼šå‡è®¾åªæœ‰ä¸€æ ¹æ‰‹æŒ‡ç‚¹å‡»å±å¹•ã€‚å½“è§¦å‘touchendæ—¶ï¼Œä»£è¡¨æ‰‹æŒ‡ç¦»å¼€å±å¹•æ—¶çš„äº‹ä»¶è¢«è§¦å‘ï¼Œæ­¤æ—¶æ²¡æœ‰æ‰‹æŒ‡è§¦æ‘¸å±å¹•ï¼Œæ‰€ä»¥æ­¤æ—¶çš„toucheså’ŒtargetTouchesçš„lengthå‡ä¸º0ã€‚ä½†æ˜¯å¯ä»¥æ£€æµ‹åˆ°æ‰‹æŒ‡ç¦»å¼€äº†å±å¹•ï¼ŒchangedTouchesçš„lengthä¸º1ã€‚\næ‰€ä»¥æ¨èä½¿ç”¨changedTouchesæ¥è·å–æ‰‹æŒ‡è§¦æ‘¸æ—¶çš„ä¿¡æ¯ã€‚é˜²æ­¢å…¶ä»–å±æ€§è·å–ä¸åˆ°touchendäº‹ä»¶çš„ç›¸å…³ä¿¡æ¯ã€‚\nfunction handleEnd(ev) &#123;        box.innerText = &quot;æ¾å¼€äº†ï¼&quot;;        console.log(&quot;touchEnd&quot;, ev);        console.log(ev.changedTouches);      &#125;\n\næ­¤æ—¶è¾“å‡ºçš„å°±æ˜¯æˆ‘ä»¬è§¦æ‘¸å±å¹•æ—¶çš„ä¸€äº›ä¿¡æ¯ï¼ŒåŒ…å«è§¦æ‘¸ç‚¹çš„åæ ‡ç­‰ã€‚è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥æ–¹ä¾¿åœ°è·å–åˆ°è¿™äº›ä¿¡æ¯ã€‚\n\nä¸€ä¸ªå°æ¡ˆä¾‹ï¼šå›¾æ ‡æ‹–æ‹½   const backtop = document.getElementById(&quot;backtop&quot;);   // å­˜æ”¾æ¯æ¬¡å¼€å§‹ç§»åŠ¨æ—¶çš„æ‰‹æŒ‡åæ ‡   const startPoint = &#123;&#125;;   // å®ç°æ‹–åŠ¨çš„å‡½æ•°drag()   // elementæ˜¯ç»‘å®šçš„å…ƒç´    // optionsæ˜¯ç”¨æˆ·ä¼ å…¥çš„å‚æ•°ï¼Œ&#123;x: true/false, y: true/false&#125;ï¼Œä»£è¡¨xå’Œyæ–¹å‘ä¸Šæ˜¯å¦å…è®¸ç§»åŠ¨   function drag(element, options) &#123;     options.x = typeof options.x === undefined ? false : options.x;     options.y = typeof options.y === undefined ? false : options.y;     // x, yæ–¹å‘å‡ä¸å…è®¸ç§»åŠ¨     if (!options.x &amp;&amp; !options.y) return;     const curPoint = &#123;       x: 0,       y: 0,     &#125;;     // æ·»åŠ touchäº‹ä»¶ç›‘å¬     element.addEventListener(&quot;touchstart&quot;, handleStart, false);     element.addEventListener(&quot;touchmove&quot;, handleMove, false);     element.addEventListener(&quot;touchend&quot;, handleEnd, false);     function handleStart(ev) &#123;       const touch = ev.changedTouches[0];       // è®°å½•æ¯æ¬¡æŒ‰ä¸‹å±å¹•çš„åæ ‡       startPoint.x = touch.pageX;       startPoint.y = touch.pageY;       // console.log(startPoint.x);     &#125;     function handleMove(ev) &#123;       const touch = ev.changedTouches[0];       const diffPoint = &#123;&#125;;       // ä¿å­˜ç§»åŠ¨åçš„åæ ‡ç‚¹       const movePoint = &#123; x: 0, y: 0 &#125;;       // è®¡ç®—ä»æŒ‰ä¸‹å±å¹•åˆ°æ‹–åŠ¨ç»“æŸç§»åŠ¨çš„è·ç¦»       // startPointæ˜¯æ¯æ¬¡æŒ‰ä¸‹å±å¹•çš„åæ ‡       // diffPointä»£è¡¨æ¯æ¬¡ç§»åŠ¨çš„è·ç¦»       diffPoint.x = touch.pageX - startPoint.x;       diffPoint.y = touch.pageY - startPoint.y;       // curPointä»£è¡¨ä¸Šä¸€æ¬¡æ‹–æ‹½å®Œæˆåçš„åæ ‡ï¼Œåˆå§‹ä¸º&#123;x: 0, y: 0&#125;       if (options.x) &#123;         movePoint.x = curPoint.x + diffPoint.x;       &#125;       if (options.y) &#123;         movePoint.y = curPoint.y + diffPoint.y;       &#125;\t       // ä½¿ç”¨translat3dæ¥æ”¹å˜ä½ç½®(è€ƒè™‘æ€§èƒ½ä¼˜åŒ–ï¼Œåœ¨ç§»åŠ¨ç«¯è¿™æ¡å±æ€§ä¼šå¼€å¯GPUåŠ é€Ÿ)       this.style.transform = `translate3d($&#123;movePoint.x&#125;px, $&#123;movePoint.y&#125;px, 0)`;     &#125;     function handleEnd(ev) &#123;       const touch = ev.changedTouches[0];       // æ‰‹æŒ‡ç¦»å¼€å±å¹•ï¼Œå®Œæˆäº†ä¸€æ¬¡æ‹–æ‹½ï¼Œæ›´æ–°å½“å‰åæ ‡ä½ç½®       // startPointæ˜¯æ¯æ¬¡æŒ‰ä¸‹å±å¹•çš„åæ ‡       // touch.pageX - startPoint.xä»£è¡¨ç§»åŠ¨çš„è·ç¦»       // curPointä»£è¡¨ä¸Šä¸€æ¬¡æ‹–æ‹½å®Œæˆåçš„åæ ‡       // æ–°çš„ç§»åŠ¨åçš„åæ ‡ = ç§»åŠ¨è·ç¦» + åˆå§‹çš„åæ ‡       curPoint.x += touch.pageX - startPoint.x;       curPoint.y += touch.pageY - startPoint.y;     &#125;   &#125;// è°ƒç”¨å‡½æ•°ï¼Œx, y æ–¹å‘å‡å…è®¸æ‹–æ‹½   drag(backtop, &#123; x: true, y: true &#125;);\n\n\n\nå®ç°æ•ˆæœï¼š\n\nå…¶ä»–è§¦æ‘¸äº‹ä»¶åœ¨ç°å®ä¸­ï¼Œæˆ‘ä»¬ç”¨åˆ°çš„å¾€å¾€ä¸æ˜¯ç®€å•çš„touchï¼Œè€Œæ˜¯ä¸€äº›æ¯”è¾ƒå¤æ‚çš„äº‹ä»¶ï¼Œæ¯”å¦‚åŒå‡»ã€é•¿æŒ‰å±å¹•ã€å·¦å³æ»‘åŠ¨ã€ç¼©æ”¾é¡µé¢ç­‰æ“ä½œã€‚\n\næƒ³è¦å®ç°è¿™äº›å¤æ‚çš„äº‹ä»¶ï¼Œéœ€è¦ä½¿ç”¨touchè¿›è¡Œå°è£…ã€‚\nhammer.min.jså·²ç»å°†è¿™äº›å¤æ‚çš„æ“ä½œå°è£…å¥½äº†ï¼Œç›´æ¥ä¸‹è½½å¼•ç”¨å³å¯ã€‚\nä¸€ä¸ªä¾‹å­ï¼šä¸ºä¸€ä¸ªidä¸ºboxçš„divä½¿ç”¨hammer.min.jsæ·»åŠ äº‹ä»¶ç›‘å¬ï¼š\né¦–å…ˆéœ€è¦å¼•å…¥hammer.min.jsæ–‡ä»¶ã€‚\n&lt;div id=&quot;box&quot;&gt;&lt;/div&gt;&lt;script src=&quot;js/hammer.min.js&quot;&gt;&lt;/script&gt;\n\nç„¶åä½¿ç”¨Hammer()å‡½æ•°åˆ›å»ºhammerå¯¹è±¡ï¼Œå…¶ä¸­ä¼ å…¥è¦ç»‘å®šçš„å…ƒç´ ã€‚ç„¶åä½¿ç”¨hammer.on()ç›‘å¬éœ€è¦ç›‘å¬çš„äº‹ä»¶å³å¯ã€‚\nconst box = document.getElementById(&quot;box&quot;);let hammer = new Hammer(box);// swipe: å¿«é€Ÿæ»‘åŠ¨// pan: æ‹–åŠ¨// tap: è½»ç‚¹,ç±»ä¼¼click,æœ€å¤§ç‚¹å‡»æ—¶é—´ä¸º250ms,è¶…è¿‡åˆ™æŒ‰pressäº‹ä»¶å¤„ç†// doubletap: åŒå‡»// press: å¯ä»¥ç†è§£ä¸ºé•¿æŒ‰// pinch: ä¸¤ä¸ªæ‰‹æŒ‡ï¼ˆé»˜è®¤ä¸ºä¸¤ä¸ªæ‰‹æŒ‡ï¼Œå¤šæŒ‡è§¦æ§éœ€è¦å•ç‹¬è®¾ç½®ï¼‰//        æˆ–å¤šä¸ªæ‰‹æŒ‡ç›¸å¯¹ï¼ˆè¶Šæ¥è¶Šè¿‘ï¼‰ç§»åŠ¨æˆ–ç›¸å‘ï¼ˆè¶Šæ¥è¶Šè¿œï¼‰ç§»åŠ¨æ—¶äº‹ä»¶// rotate: å½“ä¸¤ä¸ªæ‰‹æŒ‡æˆ–æ›´å¤šæ‰‹æŒ‡å‘ˆåœ†å‹æ—‹è½¬æ—¶è§¦å‘hammer.on(&quot;swipe pan tap doubletap press pinch rotate&quot;, function (ev) &#123;  // è¾“å‡ºè§¦å‘äº‹ä»¶å¯¹åº”çš„åç§°  console.log(ev.type);&#125;);\n\n","tags":["å‰ç«¯","ç§»åŠ¨ç«¯"]},{"title":"ReactåŸºç¡€","url":"/2021/03/25/1.React%E5%9F%BA%E7%A1%80/","content":"ReactåŸºç¡€ä»€ä¹ˆæ˜¯ç»„ä»¶ç®€å•æ¥è¯´ï¼Œç»„ä»¶å°±æ˜¯é¡µé¢ä¸Šçš„ä¸€éƒ¨åˆ†ã€‚ä¸€ä¸ªé¡µé¢ç”±å¤šä¸ªç»„ä»¶æ„æˆã€‚å¤šä¸ªç»„ä»¶å…±åŒæ¸²æŸ“å‡ºä¸€ä¸ªé¡µé¢ã€‚\n\næƒ³è®©ä¸€ä¸ªç»„ä»¶å¾€é¡µé¢ä¸Šæ¸²æŸ“å†…å®¹ï¼Œéœ€è¦åœ¨è¿™ä¸ªç»„ä»¶ä¸­å†™ä¸€ä¸ªrender()å‡½æ•°\nreactæ¸²æŸ“é¡µé¢çš„æµç¨‹ï¼š\nindex.html â€“&gt; æ‰§è¡Œindex.js â€“&gt; index.jsä¸­å¼•å…¥ç»„ä»¶ â€“&gt; ç»„ä»¶é€šè¿‡render()å‡½æ•°æ¥å®šä¹‰éœ€è¦æ¸²æŸ“çš„å†…å®¹ â€“&gt; ç»„ä»¶åœ¨index.jsä¸­è¢«å¼•å…¥ï¼Œä½¿ç”¨ReactDom.render()æŒ‚è½½åˆ°index.htmlä¸­\n&lt;!-- index.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;utf-8&quot; /&gt;    &lt;link rel=&quot;icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot; /&gt;    &lt;title&gt;Orla React&lt;/title&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;\n\n// index.jsimport React from &quot;react&quot;;import ReactDOM from &quot;react-dom&quot;;// å¼•å…¥ç»„ä»¶import App from &quot;./App&quot;;import Test from &quot;./Test&quot;;// ReactDom.renderåœ¨æ¸²æŸ“çš„æ—¶å€™åªèƒ½æ¸²æŸ“å•æ ‡ç­¾ReactDOM.render(  // JSXè¯­æ³•  // æƒ³è¦æ¸²æŸ“å¤šä¸ªæ ‡ç­¾ï¼Œä½¿ç”¨JSXè¯­æ³•ï¼Œå°†å¤šä¸ªæ ‡ç­¾æ”¾å…¥ä¸€ä¸ªdivä¸­å³å¯  &lt;div&gt;    &lt;App /&gt;    &lt;Test /&gt;  &lt;/div&gt;,  // å°†Appç»„ä»¶çš„å†…å®¹æŒ‚è½½åˆ°index.htmlé¡µé¢idä¸ºrootçš„èŠ‚ç‚¹ä¸Š  document.getElementById(&quot;root&quot;));\n\n// App.js å®šä¹‰Appç»„ä»¶import React, &#123; Component &#125; from &quot;react&quot;;// ä½¿ç”¨classå®šä¹‰äº†ä¸€ä¸ªç»„ä»¶// è¦å¾€é¡µé¢ä¸Šæ¸²æŸ“çš„å†…å®¹éœ€è¦å†™åœ¨render()å‡½æ•°ä¸­class App extends Component &#123;  render() &#123;    return &lt;div&gt;Hello World&lt;/div&gt;;  &#125;&#125;// function App() &#123;//   return &lt;div&gt;hello world&lt;/div&gt;;// &#125;export default App;\n\n// Test.js å®šä¹‰Testç»„ä»¶import React, &#123; Component &#125; from &quot;react&quot;;// ä½¿ç”¨classå®šä¹‰äº†ä¸€ä¸ªç»„ä»¶// è¦å¾€é¡µé¢ä¸Šæ¸²æŸ“çš„å†…å®¹éœ€è¦å†™åœ¨render()å‡½æ•°ä¸­class Test extends Component &#123;  render() &#123;    return &lt;div&gt;Testç»„ä»¶&lt;/div&gt;;  &#125;&#125;export default Test;\n\né¡µé¢æ•ˆæœï¼š\n\nJSXè¯­æ³•React ä½¿ç”¨ JSX æ¥æ›¿ä»£å¸¸è§„çš„ JavaScriptã€‚JSX æ˜¯ä¸€ä¸ªçœ‹èµ·æ¥å¾ˆåƒ XML çš„ JavaScript è¯­æ³•æ‰©å±•ã€‚\nJSXè¯­æ³•ä¸­ï¼Œæœ‰ä¸¤ç§ç±»å‹çš„æ ‡ç­¾ï¼š\n\næ™®é€šçš„htmlæ ‡ç­¾ï¼ˆdivâ€¦ï¼‰\nç»„ä»¶æ ‡ç­¾ï¼ˆæ¯”å¦‚ä¸Šé¢çš„&lt;App /&gt;ï¼‰ï¼Œé¦–å­—æ¯ä¸€å®šè¦å¤§å†™\n\nä½¿ç”¨Reactç¼–å†™ToDoListä¸‹é¢çš„ä»£ç éƒ½æ˜¯åŸºäºTodoListè¿›è¡Œç¼–å†™çš„ã€‚ä½¿ç”¨ä»£ç éœ€è¦é¢„å…ˆåˆ›å»ºReacté¡¹ç›®ã€‚å¯ä»¥ä½¿ç”¨Reactå®˜æ–¹æä¾›çš„è„šæ‰‹æ¶å·¥å…·create-react-appå¿«é€Ÿåˆ›å»ºä¸€ä¸ªReacté¡¹ç›®ï¼ˆéœ€è¦nodejsç¯å¢ƒï¼‰ã€‚å‘½ä»¤å¦‚ä¸‹ï¼š\n$ npx create-react-app my-app$ cd my-app$ npm start$ npm install\n\nå¦‚ä¸Šå‘½ä»¤åˆ›å»ºäº†ä¸€ä¸ªåä¸ºmy-appçš„é¡¹ç›®ã€‚ä½¿ç”¨è¯¥é¡¹ç›®çš„ç›®å½•ç»“æ„å³å¯ã€‚\nTodoListçš„åŠŸèƒ½ï¼š\n\nè¾“å…¥æ–‡å­—ï¼ŒæŒ‰ä¸‹å›è½¦ï¼Œæ·»åŠ å¯¹åº”å†…å®¹è‡³åˆ—è¡¨ä¸­\n\nç‚¹å‡»åˆ—è¡¨é¡¹èƒ½å¤Ÿåˆ é™¤è¯¥é¡¹\nå®ç°æ•ˆæœå¦‚ä¸‹ï¼š\n\n\n\né¡µé¢ç»“æ„é¦–å…ˆåœ¨é¡µé¢ä¸­å®ç°ä¸€ä¸ªé™æ€çš„inputæ¡†å’Œulåˆ—è¡¨ã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œrenderä¸€æ¬¡åªèƒ½æ¸²æŸ“ä¸€ä¸ªå¤–éƒ¨æ ‡ç­¾ï¼Œ æƒ³è¦æ¸²æŸ“å¤šä¸ªæ ‡ç­¾ï¼ŒåŒæ—¶ä¸æƒ³ç”¨divåŒ…è£¹èµ·æ¥å¯¼è‡´domä¼šæ–°å¢æ— ç”¨çš„divæ ‡ç­¾ï¼Œå¯ä»¥ä½¿ç”¨Reactä¸­æä¾›çš„Fragmentæ ‡ç­¾ã€‚\n// index.jsimport React from &quot;react&quot;;import ReactDom from &quot;react-dom&quot;;// å¼•å…¥ç»„ä»¶import TodoList from &quot;./TodoList&quot;;ReactDom.render(&lt;TodoList&gt;&lt;/TodoList&gt;, document.getElementById(&quot;root&quot;));              \n\n// TodoList.js, TodoListç»„ä»¶ï¼Œç»„ä»¶å¼€å¤´å­—æ¯å¤§å†™// å¼•å…¥Fragmentç»„ä»¶import React, &#123; Component, Fragment &#125; from &quot;react&quot;;class TodoList extends Component &#123;  render() &#123;    // renderä¸€æ¬¡åªèƒ½æ¸²æŸ“ä¸€ä¸ªå¤–éƒ¨æ ‡ç­¾ï¼Œæƒ³æ¸²æŸ“å¤šä¸ªï¼Œéœ€è¦å°†æ ‡ç­¾æ”¾åœ¨ä¸€ä¸ªdivä¸­ã€‚    // ä½†æ˜¯è¿™æ ·çš„åšæ³•ä¼šå¯¼è‡´domä¸­å¤šå‡ºæ¥ä¸€ä¸ªdiv    // React16ä¸­æä¾›äº†å ä½ç¬¦ç»„ä»¶Fragment    // å°†æ‰€æœ‰ç»„ä»¶æ”¾åœ¨Fragmentä¸­ï¼Œä¸ä¼šåœ¨domä¸­æ·»åŠ å…¶ä»–çš„å…ƒç´     return (      &lt;Fragment&gt;        &lt;input /&gt;        &lt;ul&gt;          &lt;li&gt;Learn React&lt;/li&gt;          &lt;li&gt;Learn Component&lt;/li&gt;        &lt;/ul&gt;      &lt;/Fragment&gt;    );  &#125;&#125;export default TodoList;\n\nReactä¸­æ•°æ®é©±åŠ¨çš„è®¾è®¡æ€æƒ³å’Œäº‹ä»¶ç»‘å®šâ˜…Reactæ˜¯ä¸€ä¸ªæ•°æ®é©±åŠ¨çš„æ¡†æ¶ï¼Œæ‰€æœ‰åŠŸèƒ½éƒ½ä¸ç›´æ¥æ“ä½œDOMï¼Œè€Œæ˜¯ç›´æ¥æ“ä½œæ•°æ®ã€‚\nTodoListä¸­çš„æ•°æ®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šinputä¸­çš„æ•°æ®å’Œulåˆ—è¡¨ä¸­çš„æ•°æ®ã€‚éœ€è¦åœ¨ä»£ç ä¸­æŠŠè¿™ä¸¤ç§æ•°æ®å®šä¹‰å‡ºæ¥ã€‚\nåœ¨ç»„ä»¶ä¸­å®šä¹‰æ•°æ®ï¼Œè¦åœ¨render()å‡½æ•°ä¸Šé¢å†™constructor()å‡½æ•°ã€‚constructorä¸­æ¥æ”¶å‚æ•°propsï¼Œå¹¶ä¸”è¦è°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œå°†propsä¼ é€’ç»™çˆ¶ç±»çš„æ„é€ å‡½æ•°ã€‚æ‰€ä»¥è¦å›ºå®šå†™superå‡½æ•°ã€‚\n// å®šä¹‰ç»„ä»¶ä¸­çš„æ•°æ®constructor(props) &#123;  // æ¥æ”¶å‚æ•°propsï¼Œä¼ é€’ç»™åŸºç±»(Component)çš„æ„é€ å‡½æ•°  super(props);&#125;\n\nå‰é¢æåˆ°ï¼ŒTodoListä¸­çš„æ•°æ®åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šinputä¸­çš„æ•°æ®å’Œulåˆ—è¡¨ä¸­çš„æ•°æ®ã€‚æˆ‘ä»¬è¦åœ¨constructorå‡½æ•°ä¸­ï¼ŒæŠŠè¿™ä¸¤ç§æ•°æ®å®šä¹‰å‡ºæ¥ã€‚\nReactä¸­ï¼Œå®šä¹‰ç»„ä»¶çš„æ•°æ®è¦æ”¾åœ¨this.stateä¸­ï¼Œä»¥å¯¹è±¡çš„å½¢å¼è¿›è¡Œå®šä¹‰ã€‚\nconstructor(props) &#123;    // æ¥æ”¶å‚æ•°propsï¼Œä¼ é€’ç»™åŸºç±»(Component)çš„æ„é€ å‡½æ•°    super(props);    // Reactä¸­ï¼Œå®šä¹‰ç»„ä»¶çš„æ•°æ®è¦æ”¾åœ¨this.stateä¸­    // inputValueå®šä¹‰inputè¾“å…¥æ¡†ä¸­çš„æ•°æ®    // listå®šä¹‰ulåˆ—è¡¨ä¸­çš„æ•°æ®    this.state = &#123;      inputValue: &quot;hello World&quot;,      list: [],    &#125;;  &#125;\n\nå®šä¹‰å¥½æ•°æ®åï¼Œå°†æ•°æ®æ”¾åˆ°è¦æ¸²æŸ“çš„æ ‡ç­¾ä¸­å³å¯ã€‚ä½¿ç”¨èŠ±æ‹¬å·å°†å…¶åŒ…è£¹èµ·æ¥ã€‚\nrender() &#123;  return (    &lt;Fragment&gt;      &#123;/* ä½¿ç”¨èŠ±æ‹¬å·å°†æ•°æ®åŒ…è£¹èµ·æ¥ */&#125;      &lt;input value=&#123;this.state.inputValue&#125; /&gt;      &lt;ul&gt;        &lt;li&gt;Learn React&lt;/li&gt;        &lt;li&gt;Learn Component&lt;/li&gt;      &lt;/ul&gt;    &lt;/Fragment&gt;  );&#125;\n\né¡µé¢æ˜¾ç¤ºæ•ˆæœå¦‚ä¸‹ï¼š\n\nä½†æ˜¯è¿™æ ·åšä¼šå¯¼è‡´ä¸€ä¸ªé—®é¢˜ã€‚inputæ¡†ä¸­çš„valueæ˜¯å›ºå®šçš„ï¼Œåœ¨é¡µé¢ä¸­ä¸èƒ½ä¿®æ”¹è¾“å…¥æ¡†ä¸­çš„å†…å®¹ã€‚æƒ³è¦èƒ½å¤ŸåŠ¨æ€ä¿®æ”¹æ¡†ä¸­çš„å†…å®¹ï¼Œéœ€è¦åœ¨inputä¸Šç»‘å®šä¸€ä¸ªonChangeå‡½æ•°ï¼ˆæ³¨æ„å’ŒåŸç”Ÿjsä¸­onchangeä¸åŒï¼Œæ­¤å¤„Cè¦å¤§å†™ï¼‰\n// æ­¤å¤„è¿™æ ·ç›´æ¥ç»‘å®šhandleInputChangeä¼šå¯¼è‡´é—®é¢˜ï¼Œåç»­ä¼šä»‹ç»render() &#123;  return (    &lt;Fragment&gt;      &lt;input        value=&#123;this.state.inputValue&#125;        onChange=&#123;this.handleInputChange&#125;      /&gt;      &lt;ul&gt;        &lt;li&gt;Learn React&lt;/li&gt;        &lt;li&gt;Learn Component&lt;/li&gt;      &lt;/ul&gt;    &lt;/Fragment&gt;  );&#125;\n\nåœ¨ç»„ä»¶å¯¹åº”çš„ç±»ä¸­æ·»åŠ handleInputChangeå‡½æ•°\nhandleInputChange(e) &#123;    console.log(e.target.value);  &#125;\n\nè¿™é‡Œçš„e.targetæŒ‡çš„æ˜¯è¿™ä¸ªäº‹ä»¶ç»‘å®šçš„inputå…ƒç´ ï¼Œe.target.valueæŒ‡çš„å°±æ˜¯inputè¾“å…¥æ¡†ä¸­çš„å†…å®¹\nåˆ°è¿™é‡Œï¼Œçœ‹èµ·æ¥å¥½åƒç›´æ¥ä¿®æ”¹this.stateä¸­inputValueçš„å€¼å°±å¯ä»¥äº†ï¼š\nhandleInputChange(e) &#123;  this.state.inputValue = e.target.value;&#125;\n\nä¸å¹¸çš„æ˜¯ï¼Œè¾“å…¥æ¡†ä¸­çš„å†…å®¹ä¾ç„¶ä¸èƒ½ä¿®æ”¹â€¦â€¦\nReactä¸­å¦‚æœæƒ³è¦ä¿®æ”¹ç»„ä»¶ä¸­å®šä¹‰çš„æ•°æ®ï¼Œéœ€è¦ä½¿ç”¨setState()æ–¹æ³•\nhandleInputChange(e) &#123;  // æ•°æ®ä¸èƒ½ç›´æ¥æ”¹å˜  // this.state.inputValue = e.target.value;  // è¦ä½¿ç”¨setStateæ–¹æ³•æ¥æ”¹å˜ç»„ä»¶ä¸­çš„æ•°æ®  this.setState(&#123;    inputValue: e.target.value,  &#125;);&#125;\n\nç°åœ¨setState()ä¹Ÿç”¨äº†ï¼Œæ€»è¯¥æ²¡é—®é¢˜äº†å§ã€‚ä¿å­˜ï¼åˆ·æ–°é¡µé¢ï¼ä¿®æ”¹è¾“å…¥æ¡†ä¸­çš„å†…å®¹ï¼\nåˆæŠ¥é”™äº†^_^\n\nå‘€ï¼Ÿä»–è¯´ä¸èƒ½è·å–undefinedçš„setStateâ€¦â€¦æˆ‘è¿™ä¸ªsetStateå¯æ˜¯ç»‘å®šåœ¨thisä¸Šçš„â€¦â€¦é‚£æˆ‘çœ‹çœ‹è¿™ä¸ªthisåˆ°åº•æ˜¯ä»€ä¹ˆä¸œè¥¿ã€‚æ‰“å°ä¸€ä¸‹ï¼\nhandleInputChange(e) &#123;  console.log(this);\t// undefined  this.setState(&#123;    inputValue: e.target.value,  &#125;);&#125;\n\nè¿™ä¸ªthiså±…ç„¶æ˜¯undefinedâ€¦â€¦\nçœ‹ä¸€ä¸‹æˆ‘ä»¬æ˜¯å¦‚ä½•ç»‘å®šthisçš„\nrender() &#123;  return (    &lt;Fragment&gt;      &lt;input        value=&#123;this.state.inputValue&#125;        onChange=&#123;this.handleInputChange&#125;      /&gt;      &lt;ul&gt;        &lt;li&gt;Learn React&lt;/li&gt;        &lt;li&gt;Learn Component&lt;/li&gt;      &lt;/ul&gt;    &lt;/Fragment&gt;  );&#125;\n\nonChange=&#123;this.handleInputChange&#125;ä¸­çš„thisæ˜¯renderå‡½æ•°è‡ªèº«çš„thisï¼ŒæŒ‡å‘ç»„ä»¶å®ä¾‹ã€‚\næ­¤æ—¶this.handleInputChangeåªæ˜¯å¯¹äºhandleInputChangeçš„ä¸€ä¸ªå¼•ç”¨ï¼Œæ²¡æœ‰åŠ ()è¿›è¡Œè°ƒç”¨ï¼Œæ‰€ä»¥åœ¨onChangeäº‹ä»¶è§¦å‘æ—¶æ‰ä¼šè°ƒç”¨handleInputChange()æ–¹æ³•ã€‚\næ­¤æ—¶è°ƒç”¨è¿™ä¸ªæ–¹æ³•çš„åº”è¯¥æ˜¯å…¨å±€çš„windowå¯¹è±¡ï¼Œthisåº”è¯¥æŒ‡å‘windowï¼Œä½†æ˜¯ES6ä¸­çš„classæ˜¯ä¸¥æ ¼æ¨¡å¼ï¼Œæ‰€ä»¥è¿™æ—¶çš„thisæŒ‡å‘çš„å°±æ˜¯undefinedã€‚\næƒ³è¦å°†thisç»‘å®šåˆ°å½“å‰çš„ç»„ä»¶å®ä¾‹ä¸Šï¼Œéœ€è¦ä½¿ç”¨bindæ¥æ”¹å˜thisçš„æŒ‡å‘ã€‚äºæ˜¯ä¿®æ”¹ä»£ç å¦‚ä¸‹ï¼š\n  render() &#123;    return (      &lt;Fragment&gt;        &#123;/* ä½¿ç”¨èŠ±æ‹¬å·å°†æ•°æ®åŒ…è£¹èµ·æ¥ */&#125;        &lt;input          value=&#123;this.state.inputValue&#125;          onChange=&#123;this.handleInputChange.bind(this)&#125;        /&gt;        &lt;ul&gt;          &lt;li&gt;Learn React&lt;/li&gt;          &lt;li&gt;Learn Component&lt;/li&gt;        &lt;/ul&gt;      &lt;/Fragment&gt;    );  &#125;&#125;\n\nonChange=&#123;this.handleInputChange.bind(this)&#125;ä½¿thisæŒ‡å‘äº†å½“å‰çš„ç»„ä»¶å®ä¾‹ï¼Œå†ä¿®æ”¹å½“å‰ç»„ä»¶ä¸­çš„æ•°æ®å°±å¯ä»¥äº†ã€‚\næ­¤æ—¶æˆ‘ä»¬å°±å¯ä»¥éšæ„ä¿®æ”¹è¾“å…¥æ¡†ä¸­çš„æ•°æ®äº†~\n\nå®ç°TodoListæ–°å¢åˆ é™¤åŠŸèƒ½å¤„ç†å®Œäº†è¾“å…¥æ¡†çš„è¾“å…¥é—®é¢˜ï¼Œç°åœ¨æ¥è§£å†³åˆ—è¡¨æ–°å¢åˆ é™¤çš„é—®é¢˜ã€‚\næ–°å¢ä¹‹å‰æˆ‘ä»¬åœ¨ç»„ä»¶çš„stateä¸­å®šä¹‰äº†ä¸¤ç§æ•°æ®ï¼šinputè¾“å…¥æ¡†çš„è¾“å…¥æ•°æ®å’Œ&lt;ul&gt;åˆ—è¡¨çš„æ•°æ®ã€‚ç°åœ¨é»˜è®¤è¾“å…¥æ¡†å†…å®¹ä¸ºç©ºï¼Œlistä¸­å­˜æ”¾åŸæœ¬å†™åœ¨&lt;li&gt;æ ‡ç­¾ä¸­çš„æ•°æ®ã€‚é¡µé¢ä¸Šå±•ç¤ºçš„åˆ—è¡¨åº”è¯¥ç”±listä¸­çš„å†…å®¹æ¥å†³å®šã€‚\nconstructor(props) &#123;    super(props);    this.state = &#123;      inputValue: &quot;&quot;,      list: [&quot;Learn React&quot;, &quot;Learn Component&quot;],    &#125;;  &#125;\n\nç°åœ¨æˆ‘ä»¬å¸Œæœ›æ ¹æ®listä¸­çš„å†…å®¹å¾ªç¯æ˜¾ç¤ºå‡º&lt;li&gt;æ ‡ç­¾ï¼ŒæŠŠå®ƒä»¬æ¸²æŸ“åˆ°é¡µé¢ä¸Šã€‚\nä½¿ç”¨ES6ä¸­çš„map()æ–¹æ³•å¯¹æ•°ç»„è¿›è¡Œå¾ªç¯ã€‚map()æ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‡½æ•°ä½œä¸ºå‚æ•°ï¼Œè¿™ä¸ªå‡½æ•°å¯ä»¥æ¥æ”¶å‡ ä¸ªå€¼ï¼švalueï¼ˆæ•°ç»„æ¯ä¸€é¡¹çš„å€¼ï¼‰ï¼Œindexï¼ˆæ¯ä¸€é¡¹çš„ç´¢å¼•å€¼ï¼‰ã€‚ä½¿ç”¨mapè¿›è¡Œå¾ªç¯ï¼Œæ¯ä¸€æ¬¡å¾ªç¯éƒ½éœ€è¦returnå‡ºä¸€ä¸ªç»“æœã€‚\nå¯¹äºå¾ªç¯çš„æ¯ä¸€ä¸ªå­é¡¹éƒ½åº”è¯¥æœ‰ä¸€ä¸ªkeyå€¼ï¼Œè¿™ä¸ªkeyå€¼å¯¹äºæ¯ä¸€ä¸ªå¾ªç¯éƒ½åº”è¯¥æ˜¯å”¯ä¸€çš„ã€‚æ·»åŠ keyå€¼ä¼šä½¿reactçš„æ€§èƒ½æ›´é«˜ã€‚\n  render() &#123;    return (      &lt;Fragment&gt;        &#123;/* ä½¿ç”¨èŠ±æ‹¬å·å°†æ•°æ®åŒ…è£¹èµ·æ¥ */&#125;        &lt;input          value=&#123;this.state.inputValue&#125;          onChange=&#123;this.handleInputChange.bind(this)&#125;        /&gt;        &lt;ul&gt;          &#123;this.state.list.map((value, index) =&gt; &#123;            return &lt;li key=&#123;index&#125;&gt;&#123;value&#125;&lt;/li&gt;;          &#125;)&#125;        &lt;/ul&gt;      &lt;/Fragment&gt;    );  &#125;&#125;\n\næ­¤æ—¶listæ•°ç»„ä¸­çš„å†…å®¹ä¾¿èƒ½å¾ªç¯æ¸²æŸ“åˆ°é¡µé¢ä¸Šäº†ã€‚\næˆ‘ä»¬ç°åœ¨å¸Œæœ›èƒ½å¤ŸåŠ¨æ€åœ°æ·»åŠ åˆ—è¡¨é¡¹ã€‚å½“æˆ‘ä»¬åœ¨è¾“å…¥æ¡†ä¸­æŒ‰ä¸‹å›è½¦æ—¶ï¼Œå°†è¾“å…¥æ¡†ä¸­çš„å†…å®¹æ·»åŠ åˆ°åˆ—è¡¨é¡¹ä¸­ã€‚ä¸ºinputæ ‡ç­¾æ·»åŠ onKeyUpäº‹ä»¶ï¼Œå½“æŒ‰ä¸‹enteré”®æ—¶ï¼Œä¿®æ”¹listæ•°ç»„ä¸­çš„æ•°æ®å³å¯ã€‚\nhandleKeyUp(e) &#123;  // å›è½¦é”®çš„é”®ç›˜ç æ˜¯13ï¼ŒæŒ‰ä¸‹å›è½¦ä»£è¡¨è¾“å…¥å®Œæ¯•ï¼Œæ·»åŠ åˆ—è¡¨é¡¹  // ç”±äºå‡½æ•°handleInputChange,this.state.inputValueçš„å€¼ä¼šéšç€è¾“å…¥æ¡†ä¸­å†…å®¹çš„æ”¹å˜åŠ¨æ€æ”¹å˜  // è·å–this.state.inputValueå°±æ˜¯è·å–è¾“å…¥æ¡†å½“å‰å†…å®¹  // æ·»åŠ åè‡ªåŠ¨æ¸…ç©ºè¾“å…¥æ¡†  if (e.keyCode === 13) &#123;    const list = [...this.state.list, this.state.inputValue];    this.setState(&#123;      list: list,      inputValue: &quot;&quot;,    &#125;);  &#125;&#125;\n\nå®Œæˆï¼æ•ˆæœå¦‚ä¸‹ï¼š\n\nåˆ é™¤ç°åœ¨æˆ‘ä»¬å¸Œæœ›ç‚¹å‡»æŸä¸€åˆ—è¡¨é¡¹ï¼Œèƒ½å¤Ÿåˆ é™¤è¯¥é¡¹ã€‚æ€è·¯å¾ˆç®€å•ï¼Œç»™liæ ‡ç­¾æ·»åŠ onClickäº‹ä»¶ï¼Œç»‘å®šåˆ é™¤çš„å‡½æ•°å³å¯ã€‚\nåœ¨åˆ é™¤çš„æ—¶å€™ï¼Œå¦‚ä½•èƒ½å¤ŸçŸ¥é“è¦åˆ é™¤çš„æ˜¯å“ªä¸€é¡¹ï¼Ÿæˆ‘ä»¬ä¹‹å‰éå†æ•°ç»„çš„æ—¶å€™ä½¿ç”¨äº†map()ï¼Œmap()æ–¹æ³•ä¸­ï¼Œå¯¹äºæ•°ç»„æ¯ä¸€é¡¹éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ç´¢å¼•indexï¼Œæ ¹æ®indexå€¼æ‰¾åˆ°è¦åˆ é™¤çš„é‚£ä¸€é¡¹ï¼Œç„¶åä½¿ç”¨splice()æ–¹æ³•å³å¯~\nrender() &#123;  return (    &lt;Fragment&gt;      &lt;input        value=&#123;this.state.inputValue&#125;        onChange=&#123;this.handleInputChange.bind(this)&#125;        onKeyUp=&#123;this.handleKeyUp.bind(this)&#125;      /&gt;      &lt;ul&gt;        &#123;this.state.list.map((value, index) =&gt; &#123;          return (            &lt;li key=&#123;index&#125; onClick=&#123;this.handleItemClick.bind(this, index)&#125;&gt;              &#123;value&#125;            &lt;/li&gt;          );        &#125;)&#125;      &lt;/ul&gt;    &lt;/Fragment&gt;  );&#125;\n\nhandleItemClick(index) &#123;  const list = [...this.state.list];  list.splice(index, 1);  this.setState(&#123;    list,  &#125;);&#125;\n\næ›´å¤šJSXçš„è¯­æ³•ç»†èŠ‚bind(this)çš„ä¼˜åŒ–åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæ¯æ¬¡ç›‘å¬äº‹ä»¶éƒ½è¦è°ƒç”¨bind(this)ï¼Œè¿™æ ·å¯¼è‡´é¡µé¢ä¸­åˆ°å¤„éƒ½æ˜¯bind()ã€‚è€Œä¸”æ¯æ¬¡ä½¿ç”¨bind(this)ï¼Œéƒ½ä¼šé‡æ–°ç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ¯æ¬¡è§¦å‘äº‹ä»¶ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªæ–°çš„å‡½æ•°ï¼Œè¿™æ ·ä¼šå¯¼è‡´æ€§èƒ½é™ä½ã€‚\nè§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†thisçš„ç»‘å®šæ”¾åœ¨constructorä¸­\nconstructor(props) &#123;    super(props);    this.handleInputChange = this.handleInputChange.bind(this);    this.handleKeyUp = this.handleKeyUp.bind(this);        this.state = &#123;      inputValue: &quot;&quot;,      list: [&quot;Learn React&quot;, &quot;Learn Component&quot;],    &#125;;  &#125;\n\nè¿™æ ·ï¼Œç›‘å¬äº‹ä»¶çš„æ—¶å€™å°±ä¸éœ€è¦å†è°ƒç”¨bind(this)äº†ã€‚\nrender() &#123;  return (    &lt;Fragment&gt;      &lt;input        value=&#123;this.state.inputValue&#125;        onChange=&#123;this.handleInputChange&#125;        onKeyUp=&#123;this.handleKeyUp&#125;      /&gt;      &lt;ul&gt;        &#123;this.state.list.map((value, index) =&gt; &#123;          return (            &lt;li key=&#123;index&#125; onClick=&#123;this.handleItemClick.bind(this, index)&#125;&gt;              &#123;value&#125;            &lt;/li&gt;          );        &#125;)&#125;      &lt;/ul&gt;    &lt;/Fragment&gt;  );&#125;\n\nä¸Šé¢å¯¹onChangeå’ŒonKeyUpè¿›è¡Œäº†ä¼˜åŒ–ã€‚å¯¹äºonClickï¼Œå› ä¸ºæ¯æ¬¡éœ€è¦ä¼ ä¸€ä¸ªå‚æ•°indexè¿›å»ï¼Œæ‰€ä»¥æ²¡æœ‰åŠæ³•è¿›è¡Œæ”¹å†™ã€‚\nJSXçš„ç®€åŒ–ä¹‹å‰æˆ‘ä»¬ç›´æ¥åœ¨JSXä¸­å¯¹æ•°ç»„è¿›è¡Œå¾ªç¯ï¼Œè¿™æ ·æ˜¾å¾—æœ‰äº›è‡ƒè‚¿ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠè¿™éƒ¨åˆ†æå–å‡ºæ¥ï¼Œå°è£…åˆ°ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œç„¶åç›´æ¥åœ¨JSXä¸­è°ƒç”¨è¿™ä¸ªå‡½æ•°å³å¯ã€‚\n// å°è£…ä¸ºå‡½æ•°getListItems() &#123;  return this.state.list.map((value, index) =&gt; &#123;    return (      &lt;li key=&#123;index&#125; onClick=&#123;this.handleItemClick.bind(this, index)&#125;&gt;        &#123;value&#125;      &lt;/li&gt;    );  &#125;);&#125;\n\nå®Œæ•´TodoListä»£ç æ³¨æ„ï¼šä½¿ç”¨ä»£ç éœ€è¦æå‰åˆ›å»ºReacté¡¹ç›®ã€‚è¯·å‚è€ƒ1.3èŠ‚ã€‚\npublic/index.html:\n&lt;!-- index.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;utf-8&quot; /&gt;    &lt;link rel=&quot;icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot; /&gt;    &lt;title&gt;Todo List&lt;/title&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;\n\nsrc/index.js:\n// index.jsimport React from &quot;react&quot;;import ReactDom from &quot;react-dom&quot;;// å¼•å…¥ç»„ä»¶import TodoList from &quot;./TodoList&quot;;ReactDom.render(&lt;TodoList&gt;&lt;/TodoList&gt;, document.getElementById(&quot;root&quot;));\n\nsrc/TodoList.js:\n// TodoListç»„ä»¶ï¼Œç»„ä»¶å¼€å¤´å­—æ¯å¤§å†™// å¼•å…¥Fragmentç»„ä»¶import React, &#123; Component, Fragment &#125; from &quot;react&quot;;class TodoList extends Component &#123;  // å®šä¹‰ç»„ä»¶ä¸­çš„æ•°æ®  constructor(props) &#123;    // æ¥æ”¶å‚æ•°propsï¼Œä¼ é€’ç»™åŸºç±»(Component)çš„æ„é€ å‡½æ•°    super(props);    this.handleInputChange = this.handleInputChange.bind(this);    this.handleKeyUp = this.handleKeyUp.bind(this);    // Reactä¸­ï¼Œå®šä¹‰ç»„ä»¶çš„æ•°æ®è¦æ”¾åœ¨this.stateä¸­    // inputValueå®šä¹‰inputè¾“å…¥æ¡†ä¸­çš„æ•°æ®    // listå®šä¹‰ulåˆ—è¡¨ä¸­çš„æ•°æ®    this.state = &#123;      inputValue: &quot;&quot;,      list: [],    &#125;;  &#125;  handleInputChange(e) &#123;    // è¿™ä¸ªå‡½æ•°çš„thisé»˜è®¤æ˜¯undefined    // æƒ³è¦è®©thisæŒ‡å‘è¿™ä¸ªç»„ä»¶ï¼Œéœ€è¦åœ¨renderå‡½æ•°ä¸­è°ƒç”¨æ­¤æ–¹æ³•æ—¶ä½¿ç”¨bind(this)    // console.log(e.target.value);    // æ•°æ®ä¸èƒ½ç›´æ¥æ”¹å˜    // this.state.inputValue = e.target.value;    // è¦ä½¿ç”¨setStateæ–¹æ³•æ¥æ”¹å˜ç»„ä»¶ä¸­çš„æ•°æ®    // console.log(this);    this.setState(&#123;      inputValue: e.target.value,    &#125;);  &#125;  handleKeyUp(e) &#123;    // å›è½¦é”®çš„é”®ç›˜ç æ˜¯13ï¼ŒæŒ‰ä¸‹å›è½¦ä»£è¡¨è¾“å…¥å®Œæ¯•ï¼Œæ·»åŠ åˆ—è¡¨é¡¹    // ç”±äºå‡½æ•°handleInputChange,this.state.inputValueçš„å€¼ä¼šéšç€è¾“å…¥æ¡†ä¸­å†…å®¹çš„æ”¹å˜åŠ¨æ€æ”¹å˜    // è·å–this.state.inputValueå°±æ˜¯è·å–è¾“å…¥æ¡†å½“å‰å†…å®¹    // æ·»åŠ åè‡ªåŠ¨æ¸…ç©ºè¾“å…¥æ¡†    if (e.keyCode === 13 &amp;&amp; e.target.value.trim() !== &quot;&quot;) &#123;      const list = [...this.state.list, this.state.inputValue.trim()];      this.setState(&#123;        list: list,        inputValue: &quot;&quot;,      &#125;);    &#125;  &#125;  handleItemClick(index) &#123;    const list = [...this.state.list];    list.splice(index, 1);    this.setState(&#123;      list,    &#125;);  &#125;  getListItems() &#123;    return this.state.list.map((value, index) =&gt; &#123;      return (        &lt;li key=&#123;index&#125; onClick=&#123;this.handleItemClick.bind(this, index)&#125;&gt;          &#123;value&#125;        &lt;/li&gt;      );    &#125;);  &#125;  render() &#123;    // renderä¸€æ¬¡åªèƒ½æ¸²æŸ“ä¸€ä¸ªå¤–éƒ¨æ ‡ç­¾ï¼Œæƒ³æ¸²æŸ“å¤šä¸ªï¼Œéœ€è¦å°†æ ‡ç­¾æ”¾åœ¨ä¸€ä¸ªdivä¸­ã€‚    // ä½†æ˜¯è¿™æ ·çš„åšæ³•ä¼šå¯¼è‡´domä¸­å¤šå‡ºæ¥ä¸€ä¸ªdiv    // React16ä¸­æä¾›äº†å ä½ç¬¦ç»„ä»¶Fragment    // å°†æ‰€æœ‰ç»„ä»¶æ”¾åœ¨Fragmentä¸­ï¼Œä¸ä¼šåœ¨domä¸­æ·»åŠ å…¶ä»–çš„å…ƒç´     return (      &lt;Fragment&gt;        &#123;/* ä½¿ç”¨èŠ±æ‹¬å·å°†æ•°æ®åŒ…è£¹èµ·æ¥ */&#125;        &lt;input          value=&#123;this.state.inputValue&#125;          onChange=&#123;this.handleInputChange&#125;          onKeyUp=&#123;this.handleKeyUp&#125;        /&gt;        &lt;ul&gt;&#123;this.getListItems()&#125;&lt;/ul&gt;      &lt;/Fragment&gt;    );  &#125;&#125;export default TodoList;\n\n","tags":["å‰ç«¯","React"]},{"title":"Reactç»„ä»¶ä¸ç”Ÿå‘½å‘¨æœŸ","url":"/2021/03/26/6.React%E7%BB%84%E4%BB%B6%E4%B8%8E%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/","content":"Reactç»„ä»¶ä¸å£°æ˜å‘¨æœŸæœ¬èŠ‚ä»£ç åœ¨å‰ç«¯â€”â€”ReactåŸºç¡€åŸºç¡€ä¸Šè¿›è¡Œä¿®æ”¹\nç»„ä»¶æ‹†åˆ†ä¸ç»„ä»¶ä¹‹é—´çš„ä¼ å€¼Â·ä¸ºä»€ä¹ˆè¦æ‹†åˆ†ç»„ä»¶ï¼šæé«˜å¯ç»´æŠ¤æ€§\nå®è·µï¼šå°†listä¸­çš„itemæ‹†åˆ†å‡ºå»ï¼Œå˜æˆæ›´å°çš„ç»„ä»¶\nå½“å‰getListItems()æ–¹æ³•è¿”å›çš„æ˜¯&lt;li&gt;æ ‡ç­¾ï¼Œæˆ‘ä»¬ç°åœ¨è¦åšçš„æ˜¯æŠŠè¿”å›çš„å†…å®¹æ‹†åˆ†ä¸ºä¸€ä¸ªæ›´å°çš„ç»„ä»¶ã€‚\nåªéœ€è¦å°†å…¶ä¸­çš„ä»£ç é‡æ–°å†™åˆ°TodoItem.jsä¸­ï¼Œç„¶ååœ¨TodoList.jsä¸­å¼•å…¥è¿™ä¸ªç»„ä»¶ï¼Œä»¥æ ‡ç­¾çš„å½¢å¼ä½¿ç”¨è¿™ä¸ªç»„ä»¶å³å¯ã€‚\n// TodoItemç»„ä»¶ TodoItem.jsimport React, &#123; Component &#125; from &quot;react&quot;;class TodoItem extends Component &#123;  render() &#123;    return &lt;li&gt;this is an item&lt;/li&gt;;  &#125;&#125;export default TodoItem;\n\nä½†æ˜¯æˆ‘ä»¬éœ€è¦è®©TodoItemè¿™ä¸ªç»„ä»¶è·å–åˆ°æˆ‘ä»¬è¦æ¸²æŸ“çš„æ•°æ®ã€‚æ­¤æ—¶æˆ‘ä»¬éœ€è¦æ‰¾åˆ°TodoItemçš„çˆ¶çº§ç»„ä»¶ï¼Œè®©è¿™ä¸ªçˆ¶çº§ç»„ä»¶å‘Šè¯‰TodoItemï¼Œéœ€è¦æ¸²æŸ“çš„æ˜¯ä»€ä¹ˆå†…å®¹ã€‚\næ­¤æ—¶ï¼Œéœ€è¦ä½¿ç”¨å±æ€§çš„å½¢å¼ï¼Œæ¥å‘Šè¯‰å­ç»„ä»¶éœ€è¦å±•ç¤ºä»€ä¹ˆå†…å®¹ã€‚\nåœ¨çˆ¶ç»„ä»¶å¼•ç”¨çš„å­ç»„ä»¶æ ‡ç­¾ä¸­ï¼Œå¯ä»¥ä»»æ„å‘½åä¸€ä¸ªå±æ€§ï¼Œé€šè¿‡è¿™ä¸ªå±æ€§çš„å€¼æ¥ç»™å­ç»„ä»¶ä¼ é€’ä¸€äº›å†…å®¹ã€‚\nå­ç»„ä»¶éœ€è¦ä½¿ç”¨this.props.å±æ€§åæ¥æ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å€¼ã€‚\ngetListItems() &#123;  return this.state.list.map((value, index) =&gt; &#123;    // æ­¤å¤„å±æ€§åä¸ºcontentï¼Œå‘å­ç»„ä»¶TodoItemä¼ é€’valueè¿™ä¸ªå€¼    return &lt;TodoItem content=&#123;value&#125;&gt;&lt;/TodoItem&gt;;  &#125;);&#125;\n\n// TodoItemç»„ä»¶ TodoItem.jsimport React, &#123; Component &#125; from &quot;react&quot;;class TodoItem extends Component &#123;  render() &#123;    // ä½¿ç”¨this.propsæ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å†…å®¹ï¼Œå±æ€§åä¸ºcontent    return &lt;li&gt;&#123;this.props.content&#125;&lt;/li&gt;;  &#125;&#125;export default TodoItem;\n\nå°ç»“ï¼š\nçˆ¶å­ç»„ä»¶çš„æ¦‚å¿µï¼šåœ¨ä¸€ä¸ªç»„ä»¶ä¸­å¼•ç”¨äº†å¦ä¸€ä¸ªç»„ä»¶ï¼Œè¿™ä¸¤ä¸ªç»„ä»¶å°±æ„æˆäº†çˆ¶å­å…³ç³»ã€‚\nçˆ¶ç»„ä»¶é€šè¿‡å±æ€§çš„å½¢å¼å‘å­ç»„ä»¶ä¼ å€¼ã€‚\nå­ç»„ä»¶é€šè¿‡this.propsçš„å±æ€§ï¼Œä»çˆ¶ç»„ä»¶æ¥æ”¶ä¼ é€’è¿‡æ¥çš„å€¼ã€‚\nç°åœ¨ç»§ç»­æ¥æ‹†åˆ†ã€‚\næ‹†åˆ†å‡ºä¸Šé¢çš„TodoItemç»„ä»¶åï¼Œäº§ç”Ÿäº†ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬ç°åœ¨ç‚¹å‡»åˆ—è¡¨é¡¹æ— æ³•åˆ é™¤è¿™ä¸ªåˆ—è¡¨é¡¹äº†ã€‚å› ä¸ºæ­¤æ—¶ç»„ä»¶å†…çš„&lt;li&gt;æ ‡ç­¾ä¸Šå¹¶æ²¡æœ‰ç»‘å®šonClickäº‹ä»¶ã€‚\næ­¤æ—¶è¦æ³¨æ„ï¼Œæˆ‘ä»¬ä¸èƒ½å¾€å­ç»„ä»¶æ ‡ç­¾ä¸Šç»‘å®šonClickäº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½å¾€&lt;TodoItem&gt;æ ‡ç­¾ä¸Šç»‘å®šäº‹ä»¶ã€‚æˆ‘ä»¬éœ€è¦åšçš„æ˜¯è¿›å…¥åˆ°å­ç»„ä»¶é‡Œé¢ï¼Œå¯¹é‡Œé¢çš„&lt;li&gt;æ ‡ç­¾è¿›è¡Œäº‹ä»¶ç»‘å®šã€‚\nreturn &lt;li onClick=&#123;this.handleItemClick.bind(this)&#125;&gt;&#123;this.props.content&#125;&lt;/li&gt;;\n\næ–°çš„é—®é¢˜åˆæ¥äº†ã€‚æˆ‘ä»¬è¦è°ƒç”¨çš„handleItemClick()æ–¹æ³•ï¼Œéœ€è¦ä¿®æ”¹çš„æ˜¯çˆ¶ç»„ä»¶ä¸­çš„this.state.listçš„æ•°æ®ã€‚\nReactä¸­çˆ¶ç»„ä»¶é™¤äº†å¯ä»¥ä»¥å±æ€§çš„å½¢å¼å‘å­ç»„ä»¶ä¼ é€’æ•°æ®ï¼Œè¿˜å¯ä»¥ä»¥å±æ€§çš„å½¢å¼å‘å­ç»„ä»¶ä¼ é€’æ–¹æ³•ã€‚\næ­¤æ—¶æˆ‘ä»¬æŠŠçˆ¶ç»„ä»¶ä¸­çš„handleItemClick()æ–¹æ³•ä¼ é€’ç»™å­ç»„ä»¶ã€‚delFunction=&#123;this.handleItemClick&#125;ä»£è¡¨åœ¨åˆ›å»ºTodoItemå­ç»„ä»¶æ—¶ï¼Œå°†handleItemClickæ–¹æ³•ä¸€åŒä¼ é€’ç»™å­ç»„ä»¶ã€‚å­ç»„ä»¶è¦åšçš„å°±æ˜¯è°ƒç”¨è¿™ä¸ªä¼ é€’è¿‡æ¥çš„delFunctionæ–¹æ³•ã€‚\nå­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ–¹æ³•ï¼ŒåŒæ ·ä½¿ç”¨this.propsè¿›è¡Œè°ƒç”¨ã€‚ä½¿ç”¨this.props.delFunction()å³å¯ã€‚\n// TodoList.js// ä¸ºå­ç»„ä»¶æ·»åŠ ä¼ é€’çš„æ–¹æ³•delFunction  getListItems() &#123;    return this.state.list.map((value, index) =&gt; &#123;      return (        &lt;TodoItem          content=&#123;value&#125;          key=&#123;index&#125;          delFunction=&#123;this.handleItemClick&#125;        &gt;&lt;/TodoItem&gt;      );    &#125;);  &#125;\n\n// TodoItemç»„ä»¶ TodoItem.jsimport React, &#123; Component &#125; from &quot;react&quot;;class TodoItem extends Component &#123;  constructor(props) &#123;    super(props);    this.handleItemClick = this.handleItemClick.bind(this);  &#125;  handleItemClick(e) &#123;    // æ”¹å˜çˆ¶ç»„ä»¶ä¸­çš„listæ•°æ®    this.props.delFunction();  &#125;  render() &#123;    return &lt;li onClick=&#123;this.handleItemClick&#125;&gt;&#123;this.props.content&#125;&lt;/li&gt;;  &#125;&#125;export default TodoItem;\n\nå¦‚æœåªæ˜¯è¿™æ ·å†™ï¼Œä¼šæŠ¥é”™ã€‚å› ä¸ºæ­¤æ—¶è°ƒç”¨çš„delFunctionä¸­ï¼Œéœ€è¦ä¿®æ”¹çš„æ˜¯this.state.listçš„æ•°æ®ï¼Œè€Œåœ¨å­ç»„ä»¶ä¸­æ‰§è¡Œï¼ŒthisæŒ‡å‘çš„æ˜¯å½“å‰ç±»çš„å®ä¾‹ï¼Œåœ¨å½“å‰ç»„ä»¶ä¸­å¹¶ä¸å­˜åœ¨state.listï¼Œæ‰€ä»¥ä¼šæŠ¥é”™ã€‚\nä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦åœ¨çˆ¶ç»„ä»¶ä¸­ç»‘å®šthisä¸ºçˆ¶ç»„ä»¶å®ä¾‹ï¼Œæ·»åŠ this.handleItemClick = this.handleItemClick.bind(this);\n// TodoListçš„æ„é€ å‡½æ•°constructor(props) &#123;  super(props);  this.handleInputChange = this.handleInputChange.bind(this);  this.handleKeyUp = this.handleKeyUp.bind(this);  this.handleItemClick = this.handleItemClick.bind(this);    this.state = &#123;    inputValue: &quot;&quot;,    list: [],  &#125;;&#125;\n\n\n\nä½†æ˜¯ï¼Œåˆ é™¤æŸä¸€åˆ—è¡¨é¡¹éœ€è¦è·å–åˆ°è¯¥é¡¹çš„indexå€¼ï¼Œæˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„handleItemClick()æ–¹æ³•ä¸­ä¹Ÿç¡®å®ä¼ å…¥äº†ä¸€ä¸ªindexå‚æ•°ã€‚\n// ä¹‹å‰å®šä¹‰çš„handleItemClick  handleItemClick(index) &#123;    const list = [...this.state.list];    list.splice(index, 1);    this.setState(&#123;      list,    &#125;);  &#125;\n\næ‰€ä»¥åœ¨å­ç»„ä»¶ä¸­ï¼Œéœ€è¦è·å–åˆ°æ¯é¡¹çš„indexå€¼ã€‚æˆ‘ä»¬åœ¨çˆ¶ç»„ä»¶ä¸­éå†æ•°ç»„å¹¶ä¸”åˆ›å»ºTodoItemç»„ä»¶çš„æ—¶å€™ï¼Œå°±å¯ä»¥é€šè¿‡å±æ€§çš„æ–¹å¼æŠŠindexä¼ é€’ç»™å­ç»„ä»¶ã€‚ï¼ˆindex=&#123;index&#125;ï¼‰\n// TodoList.js  getListItems() &#123;  return this.state.list.map((value, index) =&gt; &#123;    //   return (    //     &lt;li key=&#123;index&#125; onClick=&#123;this.handleItemClick.bind(this, index)&#125;&gt;    //       &#123;value&#125;    //     &lt;/li&gt;    //   );    // æ­¤å¤„å±æ€§åä¸ºcontentï¼Œå‘å­ç»„ä»¶TodoItemä¼ é€’valueè¿™ä¸ªå€¼    return (      &lt;TodoItem        content=&#123;value&#125;        key=&#123;index&#125;        index=&#123;index&#125;        delFunction=&#123;this.handleItemClick&#125;      &gt;&lt;/TodoItem&gt;    );  &#125;);&#125;\n\nå­ç»„ä»¶é€šè¿‡this.props.indexå°±å¯ä»¥è·å–åˆ°indexå±æ€§å€¼äº†~\n// TodoItemç»„ä»¶ TodoItem.jsimport React, &#123; Component &#125; from &quot;react&quot;;class TodoItem extends Component &#123;  constructor(props) &#123;    super(props);    this.handleItemClick = this.handleItemClick.bind(this);  &#125;  handleItemClick(e) &#123;    // æ”¹å˜çˆ¶ç»„ä»¶ä¸­çš„listæ•°æ®ï¼Œè·å–åˆ°çˆ¶ç»„ä»¶ä¼ é€’çš„indexå€¼    this.props.delFunction(this.props.index);  &#125;  render() &#123;    return &lt;li onClick=&#123;this.handleItemClick&#125;&gt;&#123;this.props.content&#125;&lt;/li&gt;;  &#125;&#125;export default TodoItem;\n\nâ˜…â˜…â˜…å°ç»“ï¼š\nçˆ¶ç»„ä»¶é€šè¿‡å±æ€§å½¢å¼å’Œå­ç»„ä»¶è¿›è¡Œé€šä¿¡ï¼Œå¯ä»¥ä¼ é€’å€¼/æ–¹æ³•ï¼›\nå­ç»„ä»¶å’Œçˆ¶ç»„ä»¶è¿›è¡Œé€šä¿¡ï¼Œéœ€è¦è°ƒç”¨çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„æ–¹æ³•ã€‚ï¼›\nå­ç»„ä»¶è°ƒç”¨çˆ¶ç»„ä»¶çš„æ–¹æ³•æ—¶ï¼Œè¦åœ¨çˆ¶ç»„ä»¶ä¼ é€’æ–¹æ³•çš„è¿‡ç¨‹ä¸­ï¼Œå˜æ›´æ–¹æ³•çš„ä½œç”¨åŸŸï¼Œthisç»‘å®šåœ¨çˆ¶ç»„ä»¶ä¸­ï¼Œå¦åˆ™ä¼ é€’åˆ°å­ç»„ä»¶åï¼Œthisçš„æŒ‡å‘ä¼šå‡ºç°é—®é¢˜ã€‚\næ‹†åˆ†ç»„ä»¶åçš„å®Œæ•´ä»£ç ç›®å½•ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š\n\npublic/index.html\n&lt;!-- index.html --&gt;&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;utf-8&quot; /&gt;    &lt;link rel=&quot;icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot; /&gt;    &lt;title&gt;Orla React&lt;/title&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;\n\nsrc/index.js\n// index.jsimport React from &quot;react&quot;;import ReactDom from &quot;react-dom&quot;;// å¼•å…¥ç»„ä»¶import TodoList from &quot;./TodoList&quot;;ReactDom.render(&lt;TodoList&gt;&lt;/TodoList&gt;, document.getElementById(&quot;root&quot;));\n\nsrc/TodoList.js\n// TodoListç»„ä»¶ï¼Œç»„ä»¶å¼€å¤´å­—æ¯å¤§å†™// å¼•å…¥Fragmentç»„ä»¶import React, &#123; Component, Fragment &#125; from &quot;react&quot;;import TodoItem from &quot;./TodoItem&quot;;class TodoList extends Component &#123;  // å®šä¹‰ç»„ä»¶ä¸­çš„æ•°æ®  constructor(props) &#123;    // æ¥æ”¶å‚æ•°propsï¼Œä¼ é€’ç»™åŸºç±»(Component)çš„æ„é€ å‡½æ•°    super(props);    this.handleInputChange = this.handleInputChange.bind(this);    this.handleKeyUp = this.handleKeyUp.bind(this);    this.handleItemClick = this.handleItemClick.bind(this);    // Reactä¸­ï¼Œå®šä¹‰ç»„ä»¶çš„æ•°æ®è¦æ”¾åœ¨this.stateä¸­    // inputValueå®šä¹‰inputè¾“å…¥æ¡†ä¸­çš„æ•°æ®    // listå®šä¹‰ulåˆ—è¡¨ä¸­çš„æ•°æ®    this.state = &#123;      inputValue: &quot;&quot;,      list: [],    &#125;;  &#125;  handleInputChange(e) &#123;    // è¿™ä¸ªå‡½æ•°çš„thisé»˜è®¤æ˜¯undefined    // æƒ³è¦è®©thisæŒ‡å‘è¿™ä¸ªç»„ä»¶ï¼Œéœ€è¦åœ¨renderå‡½æ•°ä¸­è°ƒç”¨æ­¤æ–¹æ³•æ—¶ä½¿ç”¨bind(this)    // console.log(e.target.value);    // æ•°æ®ä¸èƒ½ç›´æ¥æ”¹å˜    // this.state.inputValue = e.target.value;    // è¦ä½¿ç”¨setStateæ–¹æ³•æ¥æ”¹å˜ç»„ä»¶ä¸­çš„æ•°æ®    // console.log(this);    this.setState(&#123;      inputValue: e.target.value,    &#125;);  &#125;  handleKeyUp(e) &#123;    // å›è½¦é”®çš„é”®ç›˜ç æ˜¯13ï¼ŒæŒ‰ä¸‹å›è½¦ä»£è¡¨è¾“å…¥å®Œæ¯•ï¼Œæ·»åŠ åˆ—è¡¨é¡¹    // ç”±äºå‡½æ•°handleInputChange,this.state.inputValueçš„å€¼ä¼šéšç€è¾“å…¥æ¡†ä¸­å†…å®¹çš„æ”¹å˜åŠ¨æ€æ”¹å˜    // è·å–this.state.inputValueå°±æ˜¯è·å–è¾“å…¥æ¡†å½“å‰å†…å®¹    // æ·»åŠ åè‡ªåŠ¨æ¸…ç©ºè¾“å…¥æ¡†    if (e.keyCode === 13 &amp;&amp; e.target.value.trim() !== &quot;&quot;) &#123;      const list = [...this.state.list, this.state.inputValue.trim()];      this.setState(&#123;        list: list,        inputValue: &quot;&quot;,      &#125;);    &#125;  &#125;  handleItemClick(index) &#123;    const list = [...this.state.list];    list.splice(index, 1);    this.setState(&#123;      list,    &#125;);  &#125;  getListItems() &#123;    return this.state.list.map((value, index) =&gt; &#123;      //   return (      //     &lt;li key=&#123;index&#125; onClick=&#123;this.handleItemClick.bind(this, index)&#125;&gt;      //       &#123;value&#125;      //     &lt;/li&gt;      //   );      // æ­¤å¤„å±æ€§åä¸ºcontentï¼Œå‘å­ç»„ä»¶TodoItemä¼ é€’valueè¿™ä¸ªå€¼      return (        &lt;TodoItem          content=&#123;value&#125;          key=&#123;index&#125;          index=&#123;index&#125;          delFunction=&#123;this.handleItemClick&#125;        &gt;&lt;/TodoItem&gt;      );    &#125;);  &#125;  render() &#123;    // renderä¸€æ¬¡åªèƒ½æ¸²æŸ“ä¸€ä¸ªå¤–éƒ¨æ ‡ç­¾ï¼Œæƒ³æ¸²æŸ“å¤šä¸ªï¼Œéœ€è¦å°†æ ‡ç­¾æ”¾åœ¨ä¸€ä¸ªdivä¸­ã€‚    // ä½†æ˜¯è¿™æ ·çš„åšæ³•ä¼šå¯¼è‡´domä¸­å¤šå‡ºæ¥ä¸€ä¸ªdiv    // React16ä¸­æä¾›äº†å ä½ç¬¦ç»„ä»¶Fragment    // å°†æ‰€æœ‰ç»„ä»¶æ”¾åœ¨Fragmentä¸­ï¼Œä¸ä¼šåœ¨domä¸­æ·»åŠ å…¶ä»–çš„å…ƒç´     return (      &lt;Fragment&gt;        &#123;/* ä½¿ç”¨èŠ±æ‹¬å·å°†æ•°æ®åŒ…è£¹èµ·æ¥ */&#125;        &lt;input          value=&#123;this.state.inputValue&#125;          onChange=&#123;this.handleInputChange&#125;          onKeyUp=&#123;this.handleKeyUp&#125;        /&gt;        &lt;ul&gt;&#123;this.getListItems()&#125;&lt;/ul&gt;      &lt;/Fragment&gt;    );  &#125;&#125;export default TodoList;\n\nsrc/TodoItem.js\n// TodoItemç»„ä»¶ TodoItem.jsimport React, &#123; Component &#125; from &quot;react&quot;;class TodoItem extends Component &#123;  constructor(props) &#123;    super(props);    this.handleItemClick = this.handleItemClick.bind(this);  &#125;  handleItemClick(e) &#123;    // æ”¹å˜çˆ¶ç»„ä»¶ä¸­çš„listæ•°æ®ï¼Œè·å–åˆ°çˆ¶ç»„ä»¶ä¼ é€’çš„indexå€¼    // ES6è§£æ„èµ‹å€¼ï¼Œç®€åŒ–å†™æ³•ã€‚å’Œthis.props.delFunction(this.props.index);ç­‰ä»·    const &#123; delFunction, index &#125; = this.props;    delFunction(index);  &#125;  render() &#123;    // ä½¿ç”¨this.propsæ¥æ”¶çˆ¶ç»„ä»¶ä¼ é€’è¿‡æ¥çš„å†…å®¹ï¼Œå±æ€§åä¸ºcontent    // ES6è§£æ„èµ‹å€¼ç®€åŒ–å†™æ³•    // const &#123; content &#125; = this.props;    // return &lt;li&gt;&#123;content&#125;&lt;/li&gt;;    return &lt;li onClick=&#123;this.handleItemClick&#125;&gt;&#123;this.props.content&#125;&lt;/li&gt;;  &#125;&#125;export default TodoItem;\n\nReactç”Ÿå‘½å‘¨æœŸReactæ ¸å¿ƒç‰¹æ€§æ€»ç»“Reacté‡‡ç”¨çš„æ˜¯å£°æ˜å¼å¼€å‘æ¨¡å¼ï¼Œä¸éœ€è¦æˆ‘ä»¬å¯¹DOMè¿›è¡Œä»»ä½•æ“ä½œï¼Œåªéœ€è¦å®šä¹‰å¥½JSXæ¨¡æ¿å’Œæ•°æ®ï¼Œæ•°æ®å‘ç”Ÿå˜åŒ–æ—¶ï¼Œé¡µé¢DOMä¼šè‡ªåŠ¨å‘ç”Ÿå˜åŒ–ã€‚ä»ä¸Šè¿°TodoListçš„å¼€å‘ä¸­å¯è§ä¸€æ–‘ã€‚\nReactå¯ä»¥å’Œå…¶ä»–æ¡†æ¶å¹¶å­˜ã€‚æœ‰ä¸€å¥—è§£è€¦çš„æœºåˆ¶ã€‚\nç»„ä»¶åŒ–ã€‚ä¸ç”¨å¤šè¯´äº†å§ï¼Œéƒ½æ˜¯ç»„ä»¶ã€‚\nå•å‘æ•°æ®æµã€‚çˆ¶ç»„ä»¶å¯ä»¥æ”¹å˜å­ç»„ä»¶çš„æ•°æ®ï¼Œä½†æ˜¯å­ç»„ä»¶ä¸€å®šä¸èƒ½ç›´æ¥æ”¹å˜çˆ¶ç»„ä»¶çš„æ•°æ®ã€‚\nå‡½æ•°å¼ç¼–ç¨‹ã€‚æ¯ä¸ªç»„ä»¶éƒ½ç”±å¾ˆå¤šå‡½æ•°æ„æˆï¼Œæ–¹ä¾¿è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚\nprops, stateä¸renderå‡½æ•°props: å±æ€§ã€‚çˆ¶ç»„ä»¶é€šè¿‡å±æ€§å‘å­ç»„ä»¶ä¼ é€’å‚æ•°ã€‚\nstate: ç»„ä»¶ä¸­çš„æ•°æ®ã€‚\nrenderå‡½æ•°: ç”¨æ¥æ¸²æŸ“ç»„ä»¶ä¸­çš„å†…å®¹ã€‚\nè¿™ä¸‰è€…ä¹‹é—´å­˜åœ¨ä¸€å®šçš„è”ç³»ï¼š\nå½“ç»„ä»¶åˆæ¬¡åˆ›å»ºçš„æ—¶å€™ï¼Œrenderå‡½æ•°ä¼šè¢«æ‰§è¡Œä¸€æ¬¡ã€‚\nå½“stateæ•°æ®å‘ç”Ÿå˜æ›´çš„æ—¶å€™ï¼Œrenderå‡½æ•°ä¼šè¢«é‡æ–°æ‰§è¡Œã€‚\nå½“propsæ•°æ®å‘ç”Ÿå˜æ›´çš„æ—¶å€™ï¼Œæ¥æ”¶propsçš„å­ç»„ä»¶çš„renderå‡½æ•°ä¼šè¢«é‡æ–°æ‰§è¡Œã€‚\nå½“çˆ¶ç»„ä»¶çš„renderå‡½æ•°è¢«è¿è¡Œæ—¶ï¼Œå­ç»„ä»¶çš„renderå‡½æ•°éƒ½å°†è¢«é‡æ–°è¿è¡Œã€‚\nç”¨ä»£ç æ¥ä¸¾ä¾‹ï¼š\nä¾ç„¶æ˜¯åˆ›å»ºä¸€ä¸ªReacté¡¹ç›®ã€‚é¡µé¢ä¸Šæ˜¾ç¤ºä¸€ä¸ªbuttonå’Œä¸€ä¸ªæ•°å­—ï¼Œæ¯å½“æˆ‘ä»¬ç‚¹å‡»è¿™ä¸ªbuttonï¼Œæ•°å­—å°±ä¼š+1ã€‚\n\npublic/index.html\n&lt;!DOCTYPE html&gt;&lt;html lang=&quot;en&quot;&gt;  &lt;head&gt;    &lt;meta charset=&quot;utf-8&quot; /&gt;    &lt;link rel=&quot;icon&quot; href=&quot;%PUBLIC_URL%/favicon.ico&quot; /&gt;    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot; /&gt;    &lt;title&gt;props-state-render&lt;/title&gt;  &lt;/head&gt;  &lt;body&gt;    &lt;noscript&gt;You need to enable JavaScript to run this app.&lt;/noscript&gt;    &lt;div id=&quot;root&quot;&gt;&lt;/div&gt;  &lt;/body&gt;&lt;/html&gt;\n\nsrc/counter.js\nimport React, &#123; Component &#125; from &quot;react&quot;;class Counter extends Component &#123;  constructor(props) &#123;    super(props);    this.handleClick = this.handleClick.bind(this);    this.state = &#123;      number: 1,    &#125;;  &#125;  handleClick() &#123;    const newNumber = this.state.number + 1;    this.setState(&#123;      number: newNumber,    &#125;);  &#125;  render() &#123;    console.log(&quot;counter render&quot;);    return (      &lt;div&gt;        &lt;button onClick=&#123;this.handleClick&#125;&gt;ç‚¹å‡»+1&lt;/button&gt;        &lt;div&gt;&#123;this.state.number&#125;&lt;/div&gt;      &lt;/div&gt;    );  &#125;&#125;export default Counter;\n\nåœ¨è¿™ä¸ªç»„ä»¶ä¸­ï¼Œæ¯æ¬¡è°ƒç”¨renderå‡½æ•°å°±ä¼šåœ¨æ§åˆ¶å°æ‰“å°â€counter renderâ€ã€‚\næ¥çœ‹æ•ˆæœï¼š\n\nä»è¿™é‡Œå¯ä»¥çœ‹å‡ºï¼Œå½“ç»„ä»¶åˆæ¬¡åˆ›å»ºçš„æ—¶å€™ï¼Œrenderå‡½æ•°ä¼šè¢«æ‰§è¡Œä¸€æ¬¡ã€‚å½“stateæ•°æ®å‘ç”Ÿå˜æ›´çš„æ—¶å€™ï¼Œrenderå‡½æ•°ä¼šè¢«é‡æ–°æ‰§è¡Œã€‚\né‚£ä¹ˆå½“propsæ”¹å˜æ—¶ï¼Œrenderå‡½æ•°åˆä¼šå¦‚ä½•æ‰§è¡Œï¼Ÿ\nè¦ç”¨propsï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªå­ç»„ä»¶ï¼Œå¹¶åœ¨çˆ¶ç»„ä»¶ä¸­å¼•ç”¨å®ƒã€‚åœ¨å­ç»„ä»¶çš„renderå‡½æ•°ä¸­æ‰“å°â€props changeâ€ã€‚\nsrc/child.js\n// å­ç»„ä»¶child.jsimport React, &#123; Component &#125; from &quot;react&quot;;class Child extends Component &#123;  render() &#123;    // propsæ•°æ®å‘ç”Ÿæ”¹å˜ï¼Œå­ç»„ä»¶çš„renderå‡½æ•°å°±ä¼šé‡æ–°æ‰§è¡Œ    console.log(&quot;props change&quot;);    return &lt;div&gt;&#123;this.props.number&#125;&lt;/div&gt;;  &#125;&#125;export default Child;\n\nsrc/counter.js\n// çˆ¶ç»„ä»¶counter.jsimport React, &#123; Component &#125; from &quot;react&quot;;import Child from &quot;./child&quot;;class Counter extends Component &#123;  constructor(props) &#123;    super(props);    this.handleClick = this.handleClick.bind(this);    this.state = &#123;      number: 1,    &#125;;  &#125;  handleClick() &#123;    const newNumber = this.state.number + 1;    this.setState(&#123;      number: newNumber,    &#125;);  &#125;  render() &#123;    return (      &lt;div&gt;        &lt;button onClick=&#123;this.handleClick&#125;&gt;ç‚¹å‡»+1&lt;/button&gt;        &lt;Child number=&#123;this.state.number&#125;&gt;&lt;/Child&gt;      &lt;/div&gt;    );  &#125;&#125;export default Counter;\n\nå®ç°æ•ˆæœï¼š\n\nå½“åˆæ¬¡ä½¿ç”¨å­ç»„ä»¶æ—¶ï¼Œå­ç»„ä»¶çš„renderå‡½æ•°ä¼šè¢«æ‰§è¡Œä¸€æ¬¡ã€‚æ¯å½“propsä¸­çš„æ•°æ®å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ¥æ”¶propsçš„å­ç»„ä»¶çš„renderä¹Ÿä¼šé‡æ–°æ‰§è¡Œã€‚\nReactä¸­refçš„ä½¿ç”¨Reactæ˜¯ä¸€ä¸ªæ•°æ®é©±åŠ¨çš„æ¡†æ¶ï¼Œæˆ‘ä»¬æƒ³å®ç°ä¸€ä¸ªåŠŸèƒ½çš„æ—¶å€™ï¼Œä¸è¦ç›´æ¥å»æ“ä½œDOMï¼Œè€Œæ˜¯ç›´æ¥æ“ä½œæ•°æ®ï¼Œæ•°æ®å˜åŒ–ï¼Œé¡µé¢å°±ä¼šéšä¹‹æ”¹å˜ã€‚\nä½†æ˜¯åœ¨æŸäº›ç‰¹æ®Šåœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬ä¾ç„¶éœ€è¦å¯¹Reactä¸­æŸäº›ç»„ä»¶çš„DOMåšä¸€äº›æ“ä½œã€‚åœ¨Reactä¸­æ“ä½œDOMï¼Œå°±éœ€è¦ä½¿ç”¨refã€‚ï¼ˆä¸æ¨èä½¿ç”¨refï¼‰\næ‹¿ä¸Šä¸€å°èŠ‚çš„counterç»„ä»¶ä¸¾ä¾‹ã€‚ç°åœ¨æƒ³å®ç°è¿™æ ·ä¸€ä¸ªåŠŸèƒ½ï¼šå½“æˆ‘ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œæˆ‘æƒ³çŸ¥é“è¿™ä¸ªæŒ‰é’®è·ç¦»æµè§ˆå™¨é¡¶éƒ¨çš„è·ç¦»æ˜¯å¤šå°‘ã€‚\næ€è€ƒä¸€ä¸‹ï¼Œè¦æƒ³è·å–åˆ°buttonæŒ‰é’®è·ç¦»æµè§ˆå™¨é¡¶éƒ¨çš„è·ç¦»ï¼Œé‚£æˆ‘ä»¬å°±å¿…é¡»è·å–åˆ°buttonçš„è¿™ä¸ªDOMç»“ç‚¹ï¼ŒReactæ˜¯æ•°æ®é©±åŠ¨çš„ï¼Œä¸ç›´æ¥æ“ä½œDOMï¼Œæ— æ³•å¸®æˆ‘ä»¬è®¡ç®—è·ç¦»è¿™æ ·çš„ä¸œè¥¿ã€‚æ‰€ä»¥è¿™é‡Œéœ€è¦é€šè¿‡åŸç”Ÿçš„DOMè®¡ç®—æ¥è·å–åˆ°è¿™ä¸ªè·ç¦»ã€‚\nè¿™æ—¶å€™ï¼Œrefå±æ€§å°±æ´¾ä¸Šç”¨åœºäº†ã€‚\næˆ‘ä»¬å¯ä»¥æ‰¾åˆ°JSXä¸­å¯¹åº”çš„é‚£ä¸ªbuttonæŒ‰é’®ï¼Œåœ¨è¿™ä¸ªæŒ‰é’®ä¸Šå¢åŠ ä¸€ä¸ªrefå±æ€§ï¼Œè¿™ä¸ªå±æ€§ä¸€èˆ¬ç­‰äºä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°æ¥æ”¶çš„å‚æ•°å°±æ˜¯buttonè¿™ä¸ªJSXæ ‡ç­¾çœŸå®å¯¹åº”çš„DOMã€‚å°†è¿™ä¸ªå‚æ•°èµ‹å€¼ç»™å½“å‰ç»„å»ºçš„thisä¹‹ä¸­ã€‚æˆ‘ä»¬é€šè¿‡thiså°±å¯ä»¥ç›´æ¥æ‹¿åˆ°è¿™ä¸ªDOMç»“ç‚¹äº†ã€‚\nçœ‹ä»£ç ï¼š\n// counter.jsimport React, &#123; Component &#125; from &quot;react&quot;;import Child from &quot;./child&quot;;class Counter extends Component &#123;  constructor(props) &#123;    super(props);    this.handleClick = this.handleClick.bind(this);    this.state = &#123;      number: 1,    &#125;;  &#125;  handleClick() &#123;    // è·å–buttonå¯¹åº”çš„DOMç»“ç‚¹    console.log(this.buttonElem);    const newNumber = this.state.number + 1;    this.setState(&#123;      number: newNumber,    &#125;);  &#125;  render() &#123;    // ç»™buttonæ·»åŠ refå±æ€§    return (      &lt;div&gt;        &lt;button          onClick=&#123;this.handleClick&#125;          ref=&#123;(button) =&gt; &#123;            this.buttonElem = button;          &#125;&#125;        &gt;          ç‚¹å‡»+1        &lt;/button&gt;        &lt;Child number=&#123;this.state.number&#125;&gt;&lt;/Child&gt;      &lt;/div&gt;    );  &#125;&#125;export default Counter;\n\nè¿™æ ·é€šè¿‡this.buttonElemæˆ‘ä»¬å°±æ‹¿åˆ°äº†buttonè¿™ä¸ªJSXæ ‡ç­¾çœŸå®å¯¹åº”çš„DOMã€‚\n\nè·å–åˆ°è¿™ä¸ªDOMç»“ç‚¹ä¹‹åï¼Œå°±å¯ä»¥è°ƒç”¨åŸç”Ÿå±æ€§äº†~  ä½¿ç”¨this.buttonElem.clientTopå°±å¯ä»¥è·å–åˆ°è·ç¦»é¡¶éƒ¨çš„è·ç¦»ã€‚\nç°åœ¨æˆ‘ä»¬çŸ¥é“äº†refçš„ä½œç”¨ï¼šrefå¯ä»¥å¸®åŠ©æˆ‘ä»¬è·å–JSXæ ‡ç­¾å¯¹åº”çš„åŸç”ŸDOMç»“ç‚¹\nç°åœ¨æœ‰ä¸€ä¸ªé—®é¢˜ã€‚æˆ‘ä»¬æŠŠrefæ”¾åˆ°äº†æ ‡ç­¾ä¸Šå¯ä»¥è·å–åˆ°å¯¹åº”çš„DOMç»“ç‚¹ã€‚é‚£å¦‚æœæŠŠrefå±æ€§æ”¾åˆ°ç»„ä»¶ä¸Šå‘¢ï¼Ÿ\næ³¨æ„refä¸­çš„å‡½æ•°æ¥æ”¶å‚æ•°çš„åå­—è¦å’Œæ ‡ç­¾ç›¸åŒã€‚\n// counter.js// ç»™Childç»„ä»¶æ·»åŠ refå±æ€§import React, &#123; Component &#125; from &quot;react&quot;;import Child from &quot;./child&quot;;class Counter extends Component &#123;  constructor(props) &#123;    super(props);    this.handleClick = this.handleClick.bind(this);    this.state = &#123;      number: 1,    &#125;;  &#125;  handleClick() &#123;    // è·å–buttonå¯¹åº”çš„DOMç»“ç‚¹    console.log(this.childElem);    const newNumber = this.state.number + 1;    this.setState(&#123;      number: newNumber,    &#125;);  &#125;  render() &#123;    // ç»™å­ç»„ä»¶Childæ·»åŠ refå±æ€§    return (      &lt;div&gt;        &lt;button onClick=&#123;this.handleClick&#125;&gt;ç‚¹å‡»+1&lt;/button&gt;        &lt;Child          number=&#123;this.state.number&#125;          ref=&#123;(child) =&gt; &#123;            this.childElem = child;          &#125;&#125;        &gt;&lt;/Child&gt;      &lt;/div&gt;    );  &#125;&#125;export default Counter;\n\næ­¤æ—¶æ‰“å°çš„æ˜¯å­ç»„ä»¶å¯¹åº”çš„ç»„ä»¶å®ä¾‹ã€‚\n\nå°ç»“ï¼š\nrefå†™åœ¨JSXçš„æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯å¯¹åº”çš„DOMç»“ç‚¹ï¼›\nrefå†™åœ¨ç»„ä»¶æ ‡ç­¾ä¸Šï¼Œè·å–çš„æ˜¯ç»„ä»¶çš„jså®ä¾‹ã€‚\nå¼‚æ­¥çš„setStatesetStateæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„ç‰¹ç‚¹ï¼šå®ƒçš„æ‰§è¡Œæ˜¯å¼‚æ­¥çš„ã€‚\nä¸¾ä¸ªä¾‹å­ã€‚\nåœ¨è®¡æ•°å™¨çš„åŸºç¡€ä¸Šï¼Œä¿®æ”¹ä»£ç ï¼Œæ˜¾ç¤ºæ•°å­—çš„åœ°æ–¹ä½¿ç”¨divæ ‡ç­¾ï¼Œä½¿ç”¨refè·å–åˆ°è¿™ä¸ªdivå¯¹åº”çš„DOMå…ƒç´ ï¼Œç‚¹å‡»æŒ‰é’®ä½¿ç”¨setStateä¿®æ”¹å…¶ä¸­çš„æ•°æ®ã€‚ç„¶ååœ¨setStateä¹‹å‰æ‰“å°ä¸€æ¬¡divçš„innerHTMLï¼Œåœ¨setStateä¹‹åå†æ‰“å°ä¸€æ¬¡divçš„innerHTMLã€‚ä»£ç å¦‚ä¸‹ï¼š\n// counter.jsimport React, &#123; Component &#125; from &quot;react&quot;;class Counter extends Component &#123;  constructor(props) &#123;    super(props);    this.handleClick = this.handleClick.bind(this);    this.state = &#123;      number: 1,    &#125;;  &#125;  handleClick() &#123;    // setStateä¹‹å‰è·å–divå¯¹åº”çš„DOMç»“ç‚¹ä¸­çš„å†…å®¹    console.log(this.divElem.innerHTML);    const newNumber = this.state.number + 1;    this.setState(&#123;      number: newNumber,    &#125;);    // setStateä¹‹åè·å–divå¯¹åº”çš„DOMç»“ç‚¹ä¸­çš„å†…å®¹    console.log(this.divElem.innerHTML);  &#125;  render() &#123;    return (      &lt;div&gt;        &lt;button onClick=&#123;this.handleClick&#125;&gt;ç‚¹å‡»+1&lt;/button&gt;        &lt;div          ref=&#123;(div) =&gt; &#123;            this.divElem = div;          &#125;&#125;        &gt;          &#123;this.state.number&#125;        &lt;/div&gt;      &lt;/div&gt;    );  &#125;&#125;export default Counter;\n\næŒ‰ç†æ¥è¯´ï¼ŒsetStateä¹‹å‰ï¼Œnumberçš„å€¼å¹¶æœªè¢«ä¿®æ”¹ã€‚åˆå§‹numberå€¼ä¸º1ï¼Œé‚£ä¹ˆæœ€å¼€å§‹åº”è¯¥è¾“å‡º1ï¼Œè°ƒç”¨setStateä¹‹åï¼Œnumber=number + 1ï¼Œå†æ¬¡è¾“å‡ºnumberçš„å€¼åº”è¯¥ä¸º2ã€‚\nè¿è¡Œä¸€ä¸‹çœ‹çœ‹ã€‚\n\nä¸¤æ¬¡è¾“å‡ºçš„ç»“æœå±…ç„¶ä¸€æ ·ã€‚\nè¿™é‡Œçš„åŸå› å°±åœ¨äºï¼Œ**setStateæ˜¯å¼‚æ­¥æ‰§è¡Œçš„**ã€‚setStateè¿˜æ²¡æ‰§è¡Œï¼Œåé¢çš„ä»£ç å¯èƒ½å°±å…ˆæ‰§è¡Œäº†ã€‚\næƒ³è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥å°†setStateæ¢ç§å†™æ³•ã€‚\nä¹‹å‰æˆ‘ä»¬å†™setStateï¼Œéƒ½æ˜¯è®©å…¶æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ã€‚\nthis.setState(&#123;     number: newNumber,&#125;);\n\nå®ƒä¹Ÿå¯ä»¥æ¥æ”¶ä¸€ä¸ªå‡½æ•°ï¼Œåœ¨è¿™ä¸ªå‡½æ•°ä¸­returnä¸€ä¸ªå¯¹è±¡ã€‚è¿™ä¸¤ç§å†™æ³•å…¶å®æ˜¯ç­‰ä»·çš„\nthis.setState(() =&gt; &#123;  return &#123;    number: newNumber,  &#125;;&#125;);\n\nè¿™æ ·å†™çš„å¥½å¤„æ˜¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨setStateä¸­å†™ç¬¬äºŒä¸ªå‚æ•°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå‡½æ•°ï¼Œè¿™ä¸ªå‡½æ•°åœ¨setStateå°†æ•°æ®æ”¹å˜ä¹‹åæ‰ä¼šæ‰§è¡Œã€‚\nä¿®æ”¹ä»£ç å¦‚ä¸‹ã€‚\nimport React, &#123; Component &#125; from &quot;react&quot;;class Counter extends Component &#123;  constructor(props) &#123;    super(props);    this.handleClick = this.handleClick.bind(this);    this.state = &#123;      number: 1,    &#125;;  &#125;  handleClick() &#123;    console.log(this.divElem.innerHTML);    const newNumber = this.state.number + 1;    // è¿™é‡Œä¿®æ”¹setStateçš„å†™æ³•ï¼Œå¹¶ä¼ å…¥ç¬¬äºŒä¸ªå‚æ•°    this.setState(      () =&gt; &#123;        return &#123;          number: newNumber,        &#125;;      &#125;,      () =&gt; &#123;        console.log(this.divElem.innerHTML);      &#125;    );  &#125;  render() &#123;    return (      &lt;div&gt;        &lt;button onClick=&#123;this.handleClick&#125;&gt;ç‚¹å‡»+1&lt;/button&gt;        &lt;div          ref=&#123;(div) =&gt; &#123;            this.divElem = div;          &#125;&#125;        &gt;          &#123;this.state.number&#125;        &lt;/div&gt;      &lt;/div&gt;    );  &#125;&#125;export default Counter;\n\nè¿™æ ·ï¼Œç¬¬äºŒæ¬¡è¾“å‡ºçš„å°±æ˜¯ä¿®æ”¹åçš„numberå€¼äº†ã€‚\n\nReactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°å…ˆä¸‹ä¸ªå®šä¹‰ï¼šåœ¨Reactä¸­ï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°æ˜¯ç»„ä»¶åœ¨æŸä¸€æ—¶åˆ»ä¼šè‡ªåŠ¨æ‰§è¡Œçš„å‡½æ•°ã€‚\nä¹‹å‰ä½¿ç”¨çš„render()å‡½æ•°å°±æ˜¯ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼Œå®ƒåœ¨ç»„ä»¶çš„æ•°æ®å‘ç”Ÿå˜åŒ–æ—¶è‡ªåŠ¨æ‰§è¡Œã€‚\né¦–å…ˆæ¥çœ‹ä¸€ä¸‹ï¼ŒReactç»„ä»¶åœ¨å±•ç¤ºé¡µé¢æ—¶ä¼šåˆ†ä¸ºå‡ ä¸ªå‘¨æœŸã€‚æ¯ä¸ªå‘¨æœŸä¼šæœ‰ä¸€äº›ç”Ÿå‘½å‘¨æœŸå‡½æ•°è‡ªåŠ¨æ‰§è¡Œã€‚\n\nâ‘  Initializationï¼šç»„ä»¶åˆå§‹åŒ–é˜¶æ®µã€‚è®¾ç½®ä¸€äº›props/stateæ•°æ®ã€‚æ²¡æœ‰ç”¨åˆ°ç”Ÿå‘½å‘¨æœŸå‡½æ•°ã€‚\nâ‘¡ Mountingï¼šé¡µé¢æŒ‚è½½é˜¶æ®µã€‚å°†æ•°æ®å±•ç¤ºåˆ°HTMLé¡µé¢ä¸Šã€‚ä¸‰ä¸ªç”Ÿå‘½å‘¨æœŸå‡½æ•°å‡½æ•°æ‰§è¡Œé¡ºåºï¼šcomponentWillMount() â€“&gt; render() â€“&gt; componentDidMount()ï¼Œå³æŒ‚è½½å‰å‡†å¤‡â€“&gt;æŒ‚è½½â€“&gt;æŒ‚è½½å®Œæˆã€‚åªæœ‰åœ¨ç»„ä»¶ç¬¬ä¸€æ¬¡æ¸²æŸ“åˆ°é¡µé¢ä¸­æ—¶ï¼Œæ‰ä¼šæ‰§è¡ŒMountingè¿™ä¸€é˜¶æ®µã€‚åç»­ä¿®æ”¹æ•°æ®ï¼Œé¡µé¢é‡æ–°æ¸²æŸ“ï¼ŒMountingä¹Ÿä¸ä¼šé‡æ–°æ‰§è¡Œã€‚\nâ‘¢ Updationï¼šæ•°æ®æ›´æ–°é˜¶æ®µã€‚ç»„ä»¶ä¸­çš„æ•°æ®å‘ç”Ÿå˜åŒ–ï¼Œä¸ä¼šé‡æ–°è¿›è¡ŒMountingï¼Œè€Œæ˜¯æ‰§è¡ŒUpdationè¿™ä¸€é˜¶æ®µã€‚\nâ€‹    è¿™ä¸€é˜¶æ®µçš„æ‰§è¡Œæµç¨‹åˆ†ä¸ºä¸¤ç±»ã€‚ä¸€ç±»æ˜¯propså‘ç”Ÿå˜åŒ–æ—¶çš„æ‰§è¡Œæµç¨‹ï¼›å¦ä¸€ç±»æ˜¯stateså‘ç”Ÿå˜åŒ–æ—¶çš„æ‰§è¡Œæµç¨‹ã€‚\nâ‘£ Unmountingï¼šç»„ä»¶é”€æ¯é˜¶æ®µã€‚å½“ç»„ä»¶å³å°†ä»é¡µé¢ä¸­ç§»é™¤æ—¶ï¼ŒcomponentWillUnmount()ä¼šè‡ªåŠ¨æ‰§è¡Œã€‚\n","tags":["å‰ç«¯","React"]}]